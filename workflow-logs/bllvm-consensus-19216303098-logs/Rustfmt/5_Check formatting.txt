2025-11-10T00:04:28.1787104Z ##[group]Run cargo fmt -- --check
2025-11-10T00:04:28.1788263Z [36;1mcargo fmt -- --check[0m
2025-11-10T00:04:28.1825192Z shell: /usr/bin/bash -e {0}
2025-11-10T00:04:28.1826168Z env:
2025-11-10T00:04:28.1826970Z   CARGO_TERM_COLOR: always
2025-11-10T00:04:28.1827968Z   CARGO_HOME: /home/jswift/.cargo
2025-11-10T00:04:28.1830737Z   CARGO_INCREMENTAL: 0
2025-11-10T00:04:28.1831649Z ##[endgroup]
2025-11-10T00:04:28.4305892Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/block_validation_realistic.rs:4:
2025-11-10T00:04:28.4312823Z  use consensus_proof::block::connect_block;
2025-11-10T00:04:28.4314031Z  use consensus_proof::segwit::Witness;
2025-11-10T00:04:28.4315585Z  use consensus_proof::{
2025-11-10T00:04:28.4317038Z -    Block, BlockHeader, Transaction, TransactionInput, TransactionOutput, OutPoint, UtxoSet,
2025-11-10T00:04:28.4319277Z +    Block, BlockHeader, OutPoint, Transaction, TransactionInput, TransactionOutput, UtxoSet,
2025-11-10T00:04:28.4320826Z  };
2025-11-10T00:04:28.4321923Z  use criterion::{black_box, criterion_group, criterion_main, Criterion};
2025-11-10T00:04:28.4323286Z  
2025-11-10T00:04:28.4325179Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/block_validation_realistic.rs:23:
2025-11-10T00:04:28.4327210Z              sequence: 0xffffffff,
2025-11-10T00:04:28.4328114Z          }],
2025-11-10T00:04:28.4328892Z          outputs: vec![TransactionOutput {
2025-11-10T00:04:28.4329929Z -            value: 50_000_000_000, // 50 BTC
2025-11-10T00:04:28.4330955Z +            value: 50_000_000_000,     // 50 BTC
2025-11-10T00:04:28.4332013Z              script_pubkey: vec![0x51], // OP_1
2025-11-10T00:04:28.4332989Z          }],
2025-11-10T00:04:28.4333704Z          lock_time: 0,
2025-11-10T00:04:28.4335709Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/block_validation_realistic.rs:44:
2025-11-10T00:04:28.4337681Z              }],
2025-11-10T00:04:28.4338443Z              outputs: vec![
2025-11-10T00:04:28.4339361Z                  TransactionOutput {
2025-11-10T00:04:28.4340361Z -                    value: 10_000_000, // 0.1 BTC
2025-11-10T00:04:28.4341436Z +                    value: 10_000_000,             // 0.1 BTC
2025-11-10T00:04:28.4342603Z                      script_pubkey: vec![0x51; 25], // Longer script
2025-11-10T00:04:28.4343680Z                  },
2025-11-10T00:04:28.4408517Z                  TransactionOutput {
2025-11-10T00:04:28.4411752Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/block_validation_realistic.rs:113:
2025-11-10T00:04:28.4414021Z      benchmark_connect_block_realistic_1000tx
2025-11-10T00:04:28.4415428Z  );
2025-11-10T00:04:28.4416168Z  criterion_main!(benches);
2025-11-10T00:04:28.4418886Z -
2025-11-10T00:04:28.4419571Z  
2025-11-10T00:04:28.4437170Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/hash_operations.rs:1:
2025-11-10T00:04:28.4439196Z +use bllvm_consensus::crypto::OptimizedSha256;
2025-11-10T00:04:28.4440639Z  use criterion::{black_box, criterion_group, criterion_main, Criterion};
2025-11-10T00:04:28.4441987Z  use sha2::{Digest, Sha256};
2025-11-10T00:04:28.4443002Z -use bllvm_consensus::crypto::OptimizedSha256;
2025-11-10T00:04:28.4444049Z  
2025-11-10T00:04:28.4445086Z  fn benchmark_sha256(c: &mut Criterion) {
2025-11-10T00:04:28.4446126Z      let data = vec![0u8; 1024];
2025-11-10T00:04:28.4447878Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/hash_operations.rs:29:
2025-11-10T00:04:28.4449715Z  #[cfg(target_arch = "x86_64")]
2025-11-10T00:04:28.4450703Z  fn benchmark_sha_ni_single(c: &mut Criterion) {
2025-11-10T00:04:28.4451816Z      use bllvm_consensus::crypto::sha_ni;
2025-11-10T00:04:28.4452761Z -    
2025-11-10T00:04:28.4455849Z +
2025-11-10T00:04:28.4456599Z      if !sha_ni::is_sha_ni_available() {
2025-11-10T00:04:28.4457659Z          return; // Skip on CPUs without SHA-NI
2025-11-10T00:04:28.4458640Z      }
2025-11-10T00:04:28.4460542Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/hash_operations.rs:36:
2025-11-10T00:04:28.4462331Z -    
2025-11-10T00:04:28.4462988Z +
2025-11-10T00:04:28.4463692Z      let data_32b = vec![0u8; 32];
2025-11-10T00:04:28.4464857Z      let data_64b = vec![0u8; 64];
2025-11-10T00:04:28.4467620Z      let data_1kb = vec![0u8; 1024];
2025-11-10T00:04:28.4469391Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/hash_operations.rs:40:
2025-11-10T00:04:28.4471164Z -    
2025-11-10T00:04:28.4471808Z +
2025-11-10T00:04:28.4472567Z      // 32-byte input (typical transaction hash)
2025-11-10T00:04:28.4473643Z      c.bench_function("sha_ni_32b", |b| {
2025-11-10T00:04:28.4475199Z          b.iter(|| black_box(sha_ni::sha256(black_box(&data_32b))))
2025-11-10T00:04:28.4478797Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/hash_operations.rs:44:
2025-11-10T00:04:28.4480583Z      });
2025-11-10T00:04:28.4481441Z -    
2025-11-10T00:04:28.4482096Z +
2025-11-10T00:04:28.4482849Z      c.bench_function("sha2_crate_32b", |b| {
2025-11-10T00:04:28.4483842Z          b.iter(|| {
2025-11-10T00:04:28.4485043Z              let hash = Sha256::digest(black_box(&data_32b));
2025-11-10T00:04:28.4486973Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/hash_operations.rs:49:
2025-11-10T00:04:28.4488802Z              black_box(hash)
2025-11-10T00:04:28.4489638Z          })
2025-11-10T00:04:28.4490308Z      });
2025-11-10T00:04:28.4490957Z -    
2025-11-10T00:04:28.4491596Z +
2025-11-10T00:04:28.4492342Z      // 64-byte input (typical block header)
2025-11-10T00:04:28.4493375Z      c.bench_function("sha_ni_64b", |b| {
2025-11-10T00:04:28.4494748Z          b.iter(|| black_box(sha_ni::sha256(black_box(&data_64b))))
2025-11-10T00:04:28.4498632Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/hash_operations.rs:56:
2025-11-10T00:04:28.4500856Z      });
2025-11-10T00:04:28.4501514Z -    
2025-11-10T00:04:28.4502171Z +
2025-11-10T00:04:28.4502926Z      c.bench_function("sha2_crate_64b", |b| {
2025-11-10T00:04:28.4503915Z          b.iter(|| {
2025-11-10T00:04:28.4505456Z              let hash = Sha256::digest(black_box(&data_64b));
2025-11-10T00:04:28.4509366Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/hash_operations.rs:61:
2025-11-10T00:04:28.4511191Z              black_box(hash)
2025-11-10T00:04:28.4512209Z          })
2025-11-10T00:04:28.4512897Z      });
2025-11-10T00:04:28.4513550Z -    
2025-11-10T00:04:28.4514273Z +
2025-11-10T00:04:28.4515497Z      // 1KB input
2025-11-10T00:04:28.4518327Z      c.bench_function("sha_ni_1kb", |b| {
2025-11-10T00:04:28.4519939Z          b.iter(|| black_box(sha_ni::sha256(black_box(&data_1kb))))
2025-11-10T00:04:28.4521960Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/hash_operations.rs:68:
2025-11-10T00:04:28.4524015Z      });
2025-11-10T00:04:28.4524976Z -    
2025-11-10T00:04:28.4525638Z +
2025-11-10T00:04:28.4526344Z      // Double SHA256 comparison
2025-11-10T00:04:28.4527362Z      c.bench_function("sha_ni_double_32b", |b| {
2025-11-10T00:04:28.4528632Z          b.iter(|| black_box(sha_ni::hash256(black_box(&data_32b))))
2025-11-10T00:04:28.4530667Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/hash_operations.rs:73:
2025-11-10T00:04:28.4532443Z      });
2025-11-10T00:04:28.4533095Z -    
2025-11-10T00:04:28.4533743Z +
2025-11-10T00:04:28.4534890Z      c.bench_function("sha2_crate_double_32b", |b| {
2025-11-10T00:04:28.4537751Z          b.iter(|| {
2025-11-10T00:04:28.4538696Z              let hash1 = Sha256::digest(black_box(&data_32b));
2025-11-10T00:04:28.4540673Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/hash_operations.rs:194:
2025-11-10T00:04:28.4542691Z  
2025-11-10T00:04:28.4543411Z  #[cfg(feature = "production")]
2025-11-10T00:04:28.4544872Z  fn benchmark_merkle_root_batching(c: &mut Criterion) {
2025-11-10T00:04:28.4547768Z -use bllvm_consensus::mining::calculate_merkle_root;
2025-11-10T00:04:28.4549384Z -use bllvm_consensus::{OutPoint, Transaction, TransactionInput, TransactionOutput};
2025-11-10T00:04:28.4551023Z +    use bllvm_consensus::mining::calculate_merkle_root;
2025-11-10T00:04:28.4553055Z +    use bllvm_consensus::{OutPoint, Transaction, TransactionInput, TransactionOutput};
2025-11-10T00:04:28.4556073Z  
2025-11-10T00:04:28.4556817Z      let tx_counts = vec![10, 100, 1000];
2025-11-10T00:04:28.4557739Z  
2025-11-10T00:04:28.4559871Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/hash_operations.rs:232:
2025-11-10T00:04:28.4561772Z  #[cfg(feature = "production")]
2025-11-10T00:04:28.4562892Z  fn benchmark_block_validation_tx_ids(c: &mut Criterion) {
2025-11-10T00:04:28.4564967Z      use bllvm_consensus::optimizations::simd_vectorization;
2025-11-10T00:04:28.4567928Z -use bllvm_consensus::serialization::transaction::serialize_transaction;
2025-11-10T00:04:28.4569806Z -use bllvm_consensus::{OutPoint, Transaction, TransactionInput, TransactionOutput};
2025-11-10T00:04:28.4571679Z +    use bllvm_consensus::serialization::transaction::serialize_transaction;
2025-11-10T00:04:28.4573534Z +    use bllvm_consensus::{OutPoint, Transaction, TransactionInput, TransactionOutput};
2025-11-10T00:04:28.4575629Z  
2025-11-10T00:04:28.4576363Z      let tx_counts = vec![10, 100];
2025-11-10T00:04:28.4577259Z  
2025-11-10T00:04:28.4579088Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/hash_operations.rs:539:
2025-11-10T00:04:28.4581133Z  );
2025-11-10T00:04:28.4581942Z  
2025-11-10T00:04:28.4582673Z  #[cfg(not(feature = "production"))]
2025-11-10T00:04:28.4585004Z -criterion_group!(benches, benchmark_sha256, benchmark_double_sha256, benchmark_sha_ni_single);
2025-11-10T00:04:28.4586644Z +criterion_group!(
2025-11-10T00:04:28.4587767Z +    benches,
2025-11-10T00:04:28.4588906Z +    benchmark_sha256,
2025-11-10T00:04:28.4590149Z +    benchmark_double_sha256,
2025-11-10T00:04:28.4591649Z +    benchmark_sha_ni_single
2025-11-10T00:04:28.4592983Z +);
2025-11-10T00:04:28.4594026Z  
2025-11-10T00:04:28.4595434Z  criterion_main!(benches);
2025-11-10T00:04:28.4596994Z  
2025-11-10T00:04:28.4600123Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/performance_focused.rs:11:
2025-11-10T00:04:28.4603125Z  //!
2025-11-10T00:04:28.4605207Z  //! Run with: cargo bench --bench performance_focused --features production
2025-11-10T00:04:28.4607356Z  
2025-11-10T00:04:28.4609235Z -use criterion::{black_box, criterion_group, criterion_main, BenchmarkId, Criterion};
2025-11-10T00:04:28.4611704Z  use bllvm_consensus::{
2025-11-10T00:04:28.4613285Z -    Block, BlockHeader, Transaction, TransactionInput, TransactionOutput, OutPoint, UtxoSet, UTXO,
2025-11-10T00:04:28.4615266Z -    block::connect_block,
2025-11-10T00:04:28.4616130Z -    segwit::Witness,
2025-11-10T00:04:28.4617423Z +    block::connect_block, segwit::Witness, Block, BlockHeader, OutPoint, Transaction,
2025-11-10T00:04:28.4619046Z +    TransactionInput, TransactionOutput, UtxoSet, UTXO,
2025-11-10T00:04:28.4620140Z  };
2025-11-10T00:04:28.4621319Z +use criterion::{black_box, criterion_group, criterion_main, BenchmarkId, Criterion};
2025-11-10T00:04:28.4622711Z  
2025-11-10T00:04:28.4623476Z  // ============================================================================
2025-11-10T00:04:28.4624814Z  // CRYPTOGRAPHIC OPERATIONS (SHA-NI + AVX2)
2025-11-10T00:04:28.4626787Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/performance_focused.rs:23:
2025-11-10T00:04:28.4628724Z  // ============================================================================
2025-11-10T00:04:28.4629976Z  
2025-11-10T00:04:28.4630740Z  fn bench_hash_single(c: &mut Criterion) {
2025-11-10T00:04:28.4631904Z -    let data_32b = vec![0u8; 32];  // Transaction hash size
2025-11-10T00:04:28.4633289Z -    let data_64b = vec![0u8; 64];  // Block header size
2025-11-10T00:04:28.4634492Z -    
2025-11-10T00:04:28.4635431Z +    let data_32b = vec![0u8; 32]; // Transaction hash size
2025-11-10T00:04:28.4636642Z +    let data_64b = vec![0u8; 64]; // Block header size
2025-11-10T00:04:28.4637656Z +
2025-11-10T00:04:28.4638473Z      let mut group = c.benchmark_group("hash_single");
2025-11-10T00:04:28.4639509Z -    
2025-11-10T00:04:28.4640155Z +
2025-11-10T00:04:28.4641006Z      // Single SHA256 - 32 bytes (typical transaction hash)
2025-11-10T00:04:28.4642190Z      group.bench_function("sha256_32b", |b| {
2025-11-10T00:04:28.4643236Z          use sha2::{Digest, Sha256};
2025-11-10T00:04:28.4645340Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/performance_focused.rs:36:
2025-11-10T00:04:28.4647245Z              black_box(hash)
2025-11-10T00:04:28.4648085Z          })
2025-11-10T00:04:28.4648747Z      });
2025-11-10T00:04:28.4649396Z -    
2025-11-10T00:04:28.4650047Z +
2025-11-10T00:04:28.4650813Z      // Double SHA256 - 32 bytes (Bitcoin standard)
2025-11-10T00:04:28.4651973Z      group.bench_function("double_sha256_32b", |b| {
2025-11-10T00:04:28.4653324Z          use sha2::{Digest, Sha256};
2025-11-10T00:04:28.4655519Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/performance_focused.rs:46:
2025-11-10T00:04:28.4659796Z              black_box(hash2)
2025-11-10T00:04:28.4660775Z          })
2025-11-10T00:04:28.4661454Z      });
2025-11-10T00:04:28.4662222Z -    
2025-11-10T00:04:28.4662875Z +
2025-11-10T00:04:28.4663590Z      // Block header hash - 64 bytes
2025-11-10T00:04:28.4664899Z      group.bench_function("double_sha256_64b", |b| {
2025-11-10T00:04:28.4667750Z          use sha2::{Digest, Sha256};
2025-11-10T00:04:28.4669668Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/performance_focused.rs:56:
2025-11-10T00:04:28.4671544Z              black_box(hash2)
2025-11-10T00:04:28.4672388Z          })
2025-11-10T00:04:28.4673051Z      });
2025-11-10T00:04:28.4673699Z -    
2025-11-10T00:04:28.4674524Z +
2025-11-10T00:04:28.4675203Z      group.finish();
2025-11-10T00:04:28.4675940Z  }
2025-11-10T00:04:28.4676574Z  
2025-11-10T00:04:28.4678151Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/performance_focused.rs:63:
2025-11-10T00:04:28.4680032Z  #[cfg(feature = "production")]
2025-11-10T00:04:28.4681241Z  fn bench_hash_batch(c: &mut Criterion) {
2025-11-10T00:04:28.4682447Z      use bllvm_consensus::optimizations::simd_vectorization;
2025-11-10T00:04:28.4683552Z -    
2025-11-10T00:04:28.4684193Z +
2025-11-10T00:04:28.4685067Z      let data = vec![0u8; 64];
2025-11-10T00:04:28.4686077Z      let mut group = c.benchmark_group("hash_batch");
2025-11-10T00:04:28.4688400Z -    
2025-11-10T00:04:28.4689045Z +
2025-11-10T00:04:28.4689792Z      // Batch sizes that matter in real blocks
2025-11-10T00:04:28.4690832Z      for size in [8, 16, 32, 64, 128].iter() {
2025-11-10T00:04:28.4691972Z          let inputs: Vec<&[u8]> = vec![data.as_slice(); *size];
2025-11-10T00:04:28.4693986Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/performance_focused.rs:73:
2025-11-10T00:04:28.4697863Z -        
2025-11-10T00:04:28.4699069Z -        group.bench_with_input(BenchmarkId::new("avx2_double_sha256", size), size, |b, _| {
2025-11-10T00:04:28.4700505Z -            b.iter(|| {
2025-11-10T00:04:28.4701705Z -                black_box(simd_vectorization::batch_double_sha256(black_box(&inputs)))
2025-11-10T00:04:28.4703006Z -            })
2025-11-10T00:04:28.4703710Z -        });
2025-11-10T00:04:28.4704630Z +
2025-11-10T00:04:28.4705366Z +        group.bench_with_input(
2025-11-10T00:04:28.4706410Z +            BenchmarkId::new("avx2_double_sha256", size),
2025-11-10T00:04:28.4707668Z +            size,
2025-11-10T00:04:28.4710198Z +            |b, _| {
2025-11-10T00:04:28.4711444Z +                b.iter(|| black_box(simd_vectorization::batch_double_sha256(black_box(&inputs))))
2025-11-10T00:04:28.4712981Z +            },
2025-11-10T00:04:28.4713672Z +        );
2025-11-10T00:04:28.4714580Z      }
2025-11-10T00:04:28.4715298Z -    
2025-11-10T00:04:28.4715944Z +
2025-11-10T00:04:28.4716598Z      group.finish();
2025-11-10T00:04:28.4719298Z  }
2025-11-10T00:04:28.4719924Z  
2025-11-10T00:04:28.4721517Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/performance_focused.rs:100:
2025-11-10T00:04:28.4723407Z              sequence: 0xffffffff,
2025-11-10T00:04:28.4724412Z          }],
2025-11-10T00:04:28.4725196Z          outputs: vec![TransactionOutput {
2025-11-10T00:04:28.4726210Z -            value: 1_000_000, // 0.01 BTC
2025-11-10T00:04:28.4727199Z +            value: 1_000_000,          // 0.01 BTC
2025-11-10T00:04:28.4730104Z              script_pubkey: vec![0x51], // OP_1
2025-11-10T00:04:28.4731051Z          }],
2025-11-10T00:04:28.4731742Z          lock_time: 0,
2025-11-10T00:04:28.4733455Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/performance_focused.rs:109:
2025-11-10T00:04:28.4735389Z  
2025-11-10T00:04:28.4736175Z  fn bench_transaction_basics(c: &mut Criterion) {
2025-11-10T00:04:28.4737711Z      let tx = create_simple_transaction();
2025-11-10T00:04:28.4738651Z -    
2025-11-10T00:04:28.4739470Z +
2025-11-10T00:04:28.4740401Z      let mut group = c.benchmark_group("transaction");
2025-11-10T00:04:28.4741438Z -    
2025-11-10T00:04:28.4742079Z +
2025-11-10T00:04:28.4742999Z      // Transaction serialization (needed for tx ID calculation)
2025-11-10T00:04:28.4744245Z      group.bench_function("serialize", |b| {
2025-11-10T00:04:28.4747614Z          use bllvm_consensus::serialization::transaction::serialize_transaction;
2025-11-10T00:04:28.4749873Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/performance_focused.rs:118:
2025-11-10T00:04:28.4752064Z -        b.iter(|| {
2025-11-10T00:04:28.4752995Z -            black_box(serialize_transaction(black_box(&tx)))
2025-11-10T00:04:28.4754067Z -        })
2025-11-10T00:04:28.4756917Z +        b.iter(|| black_box(serialize_transaction(black_box(&tx))))
2025-11-10T00:04:28.4758031Z      });
2025-11-10T00:04:28.4758678Z -    
2025-11-10T00:04:28.4759315Z +
2025-11-10T00:04:28.4760521Z      // Transaction ID calculation (SHA256D of serialized tx)
2025-11-10T00:04:28.4762095Z      group.bench_function("calculate_id", |b| {
2025-11-10T00:04:28.4763287Z          use bllvm_consensus::block::calculate_tx_id;
2025-11-10T00:04:28.4766877Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/performance_focused.rs:126:
2025-11-10T00:04:28.4768755Z -        b.iter(|| {
2025-11-10T00:04:28.4769640Z -            black_box(calculate_tx_id(black_box(&tx)))
2025-11-10T00:04:28.4770967Z -        })
2025-11-10T00:04:28.4771839Z +        b.iter(|| black_box(calculate_tx_id(black_box(&tx))))
2025-11-10T00:04:28.4772889Z      });
2025-11-10T00:04:28.4773560Z -    
2025-11-10T00:04:28.4774200Z +
2025-11-10T00:04:28.4775194Z      group.finish();
2025-11-10T00:04:28.4775950Z  }
2025-11-10T00:04:28.4776588Z  
2025-11-10T00:04:28.4778182Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/performance_focused.rs:153:
2025-11-10T00:04:28.4781076Z                  script_pubkey: vec![0x51],
2025-11-10T00:04:28.4782013Z              }],
2025-11-10T00:04:28.4782742Z              lock_time: 0,
2025-11-10T00:04:28.4783536Z -        }
2025-11-10T00:04:28.4784196Z +        },
2025-11-10T00:04:28.4784990Z      ];
2025-11-10T00:04:28.4785625Z -    
2025-11-10T00:04:28.4788139Z +
2025-11-10T00:04:28.4788819Z      // Regular transactions
2025-11-10T00:04:28.4789684Z      for i in 0..num_txs {
2025-11-10T00:04:28.4790579Z          transactions.push(Transaction {
2025-11-10T00:04:28.4792699Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/performance_focused.rs:181:
2025-11-10T00:04:28.4794836Z              lock_time: 0,
2025-11-10T00:04:28.4797571Z          });
2025-11-10T00:04:28.4798248Z      }
2025-11-10T00:04:28.4798885Z -    
2025-11-10T00:04:28.4799524Z +
2025-11-10T00:04:28.4800153Z      Block {
2025-11-10T00:04:28.4800886Z          header: BlockHeader {
2025-11-10T00:04:28.4801750Z              version: 1,
2025-11-10T00:04:28.4803485Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/performance_focused.rs:198:
2025-11-10T00:04:28.4805608Z  fn bench_block_validation(c: &mut Criterion) {
2025-11-10T00:04:28.4806801Z      let mut group = c.benchmark_group("block_validation");
2025-11-10T00:04:28.4808156Z      group.sample_size(10); // Fewer samples for longer benchmarks
2025-11-10T00:04:28.4809301Z -    
2025-11-10T00:04:28.4809948Z +
2025-11-10T00:04:28.4810730Z      // Small block (10 txs) - typical for quick blocks
2025-11-10T00:04:28.4811903Z      let block_10 = create_realistic_block(10);
2025-11-10T00:04:28.4813497Z      let witnesses_10: Vec<Witness> = block_10.transactions.iter().map(|_| Vec::new()).collect();
2025-11-10T00:04:28.4816053Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/performance_focused.rs:205:
2025-11-10T00:04:28.4817874Z -    
2025-11-10T00:04:28.4818516Z +
2025-11-10T00:04:28.4819237Z      group.bench_function("10_txs", |b| {
2025-11-10T00:04:28.4820184Z          b.iter(|| {
2025-11-10T00:04:28.4821003Z              let utxo_set = UtxoSet::new();
2025-11-10T00:04:28.4822905Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/performance_focused.rs:215:
2025-11-10T00:04:28.4825151Z              );
2025-11-10T00:04:28.4827669Z          })
2025-11-10T00:04:28.4828605Z      });
2025-11-10T00:04:28.4829261Z -    
2025-11-10T00:04:28.4829903Z +
2025-11-10T00:04:28.4830708Z      // Medium block (100 txs) - typical average block
2025-11-10T00:04:28.4831882Z      let block_100 = create_realistic_block(100);
2025-11-10T00:04:28.4833529Z      let witnesses_100: Vec<Witness> = block_100.transactions.iter().map(|_| Vec::new()).collect();
2025-11-10T00:04:28.4836103Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/performance_focused.rs:222:
2025-11-10T00:04:28.4839761Z -    
2025-11-10T00:04:28.4840400Z +
2025-11-10T00:04:28.4841133Z      group.bench_function("100_txs", |b| {
2025-11-10T00:04:28.4842094Z          b.iter(|| {
2025-11-10T00:04:28.4842921Z              let utxo_set = UtxoSet::new();
2025-11-10T00:04:28.4844924Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/performance_focused.rs:232:
2025-11-10T00:04:28.4848314Z              );
2025-11-10T00:04:28.4849013Z          })
2025-11-10T00:04:28.4849667Z      });
2025-11-10T00:04:28.4850312Z -    
2025-11-10T00:04:28.4850943Z +
2025-11-10T00:04:28.4851609Z      group.finish();
2025-11-10T00:04:28.4852351Z  }
2025-11-10T00:04:28.4852982Z  
2025-11-10T00:04:28.4854835Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/performance_focused.rs:242:
2025-11-10T00:04:28.4856704Z  
2025-11-10T00:04:28.4857479Z  fn bench_utxo_operations(c: &mut Criterion) {
2025-11-10T00:04:28.4860217Z      use std::collections::HashMap;
2025-11-10T00:04:28.4861104Z -    
2025-11-10T00:04:28.4861739Z +
2025-11-10T00:04:28.4862500Z      let mut utxo_set: UtxoSet = HashMap::new();
2025-11-10T00:04:28.4863543Z      let outpoint = OutPoint {
2025-11-10T00:04:28.4864526Z          hash: [1; 32],
2025-11-10T00:04:28.4866233Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/performance_focused.rs:253:
2025-11-10T00:04:28.4868132Z          script_pubkey: vec![0x51],
2025-11-10T00:04:28.4869029Z          height: 0,
2025-11-10T00:04:28.4869736Z      };
2025-11-10T00:04:28.4870376Z -    
2025-11-10T00:04:28.4871011Z +
2025-11-10T00:04:28.4871992Z      let mut group = c.benchmark_group("utxo");
2025-11-10T00:04:28.4872971Z -    
2025-11-10T00:04:28.4875897Z +
2025-11-10T00:04:28.4876655Z      // Insert UTXO
2025-11-10T00:04:28.4877657Z      group.bench_function("insert", |b| {
2025-11-10T00:04:28.4878614Z          b.iter(|| {
2025-11-10T00:04:28.4880302Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/performance_focused.rs:264:
2025-11-10T00:04:28.4882427Z              black_box(set)
2025-11-10T00:04:28.4883231Z          })
2025-11-10T00:04:28.4883894Z      });
2025-11-10T00:04:28.4884678Z -    
2025-11-10T00:04:28.4885326Z +
2025-11-10T00:04:28.4885961Z      // Lookup UTXO
2025-11-10T00:04:28.4888605Z      utxo_set.insert(outpoint.clone(), utxo.clone());
2025-11-10T00:04:28.4889773Z      group.bench_function("get", |b| {
2025-11-10T00:04:28.4891642Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/performance_focused.rs:271:
2025-11-10T00:04:28.4893489Z -        b.iter(|| {
2025-11-10T00:04:28.4894693Z -            black_box(utxo_set.get(black_box(&outpoint)))
2025-11-10T00:04:28.4898026Z -        })
2025-11-10T00:04:28.4898947Z +        b.iter(|| black_box(utxo_set.get(black_box(&outpoint))))
2025-11-10T00:04:28.4900074Z      });
2025-11-10T00:04:28.4900714Z -    
2025-11-10T00:04:28.4901361Z +
2025-11-10T00:04:28.4902005Z      // Remove UTXO
2025-11-10T00:04:28.4902828Z      group.bench_function("remove", |b| {
2025-11-10T00:04:28.4903780Z          b.iter(|| {
2025-11-10T00:04:28.4905599Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/performance_focused.rs:280:
2025-11-10T00:04:28.4907576Z              black_box(set.remove(black_box(&outpoint)))
2025-11-10T00:04:28.4908580Z          })
2025-11-10T00:04:28.4911201Z      });
2025-11-10T00:04:28.4911931Z -    
2025-11-10T00:04:28.4912570Z +
2025-11-10T00:04:28.4913222Z      group.finish();
2025-11-10T00:04:28.4913963Z  }
2025-11-10T00:04:28.4914716Z  
2025-11-10T00:04:28.4916328Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/benches/performance_focused.rs:318:
2025-11-10T00:04:28.4918163Z      block_benches,
2025-11-10T00:04:28.4918971Z      utxo_benches
2025-11-10T00:04:28.4919665Z  );
2025-11-10T00:04:28.4920293Z -
2025-11-10T00:04:28.4920918Z  
2025-11-10T00:04:28.4922384Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/examples/cpu_features.rs:3:
2025-11-10T00:04:28.4926186Z      {
2025-11-10T00:04:28.4926947Z          println!("CPU Feature Detection:");
2025-11-10T00:04:28.4928218Z          println!("  AVX2: {}", std::arch::is_x86_feature_detected!("avx2"));
2025-11-10T00:04:28.4929704Z -        println!("  SSE4.1: {}", std::arch::is_x86_feature_detected!("sse4.1"));
2025-11-10T00:04:28.4930937Z +        println!(
2025-11-10T00:04:28.4931762Z +            "  SSE4.1: {}",
2025-11-10T00:04:28.4932893Z +            std::arch::is_x86_feature_detected!("sse4.1")
2025-11-10T00:04:28.4933921Z +        );
2025-11-10T00:04:28.4936974Z          println!("  SHA-NI: {}", std::arch::is_x86_feature_detected!("sha"));
2025-11-10T00:04:28.4938440Z          println!("  AVX: {}", std::arch::is_x86_feature_detected!("avx"));
2025-11-10T00:04:28.4939777Z      }
2025-11-10T00:04:28.5641883Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/block.rs:58:
2025-11-10T00:04:28.5644758Z              return override_val;
2025-11-10T00:04:28.5646034Z          }
2025-11-10T00:04:28.5646978Z      }
2025-11-10T00:04:28.5647911Z -    
2025-11-10T00:04:28.5648836Z +
2025-11-10T00:04:28.5650424Z      // Load from environment variable (supports config files via std::env)
2025-11-10T00:04:28.5652776Z      // Default to 0 (validate all blocks) for maximum safety
2025-11-10T00:04:28.5654083Z      std::env::var("ASSUME_VALID_HEIGHT")
2025-11-10T00:04:28.5656569Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/block.rs:199:
2025-11-10T00:04:28.5658201Z              .collect();
2025-11-10T00:04:28.5659298Z  
2025-11-10T00:04:28.5660758Z          // Batch UTXO lookup for all transactions (single pass through HashMap)
2025-11-10T00:04:28.5662706Z -        let mut utxo_cache: std::collections::HashMap<&OutPoint, &UTXO> = 
2025-11-10T00:04:28.5666410Z +        let mut utxo_cache: std::collections::HashMap<&OutPoint, &UTXO> =
2025-11-10T00:04:28.5667914Z              std::collections::HashMap::with_capacity(all_prevouts.len());
2025-11-10T00:04:28.5669171Z          for prevout in &all_prevouts {
2025-11-10T00:04:28.5670238Z              if let Some(utxo) = utxo_set.get(prevout) {
2025-11-10T00:04:28.5672375Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/block.rs:297:
2025-11-10T00:04:28.5674524Z                          let input_utxos: Vec<(usize, Option<&ByteString>)> = {
2025-11-10T00:04:28.5675895Z                              let mut result = Vec::with_capacity(tx.inputs.len());
2025-11-10T00:04:28.5678458Z                              for (j, input) in tx.inputs.iter().enumerate() {
2025-11-10T00:04:28.5680712Z -                                result.push((j, utxo_set.get(&input.prevout).map(|u| &u.script_pubkey)));
2025-11-10T00:04:28.5682349Z +                                result.push((
2025-11-10T00:04:28.5683315Z +                                    j,
2025-11-10T00:04:28.5684591Z +                                    utxo_set.get(&input.prevout).map(|u| &u.script_pubkey),
2025-11-10T00:04:28.5685782Z +                                ));
2025-11-10T00:04:28.5686687Z                              }
2025-11-10T00:04:28.5687531Z                              result
2025-11-10T00:04:28.5688404Z                          };
2025-11-10T00:04:28.5689878Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/block.rs:365:
2025-11-10T00:04:28.5691435Z  
2025-11-10T00:04:28.5692117Z                  if !script_valid {
2025-11-10T00:04:28.5693024Z                      return Ok((
2025-11-10T00:04:28.5694083Z -                        ValidationResult::Invalid(format!(
2025-11-10T00:04:28.5695523Z -                            "Invalid script at transaction {i}"
2025-11-10T00:04:28.5696568Z -                        )),
2025-11-10T00:04:28.5697857Z +                        ValidationResult::Invalid(format!("Invalid script at transaction {i}")),
2025-11-10T00:04:28.5699239Z                          utxo_set,
2025-11-10T00:04:28.5700109Z                      ));
2025-11-10T00:04:28.5700880Z                  }
2025-11-10T00:04:28.5702279Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/block.rs:374:
2025-11-10T00:04:28.5703840Z  
2025-11-10T00:04:28.5704935Z                  // Use checked arithmetic to prevent fee overflow
2025-11-10T00:04:28.5707869Z                  total_fees = total_fees.checked_add(fee).ok_or_else(|| {
2025-11-10T00:04:28.5709592Z -                    ConsensusError::BlockValidation(format!("Total fees overflow at transaction {i}"))
2025-11-10T00:04:28.5711227Z +                    ConsensusError::BlockValidation(format!(
2025-11-10T00:04:28.5712413Z +                        "Total fees overflow at transaction {i}"
2025-11-10T00:04:28.5713450Z +                    ))
2025-11-10T00:04:28.5714207Z                  })?;
2025-11-10T00:04:28.5715070Z              }
2025-11-10T00:04:28.5715753Z          }
2025-11-10T00:04:28.5718280Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/block.rs:426:
2025-11-10T00:04:28.5720475Z                          .map_err(|e| ConsensusError::TransactionValidation(e.to_string()))?;
2025-11-10T00:04:28.5721732Z  
2025-11-10T00:04:28.5722672Z                      let fee = total_input.checked_sub(total_output).ok_or_else(|| {
2025-11-10T00:04:28.5725018Z -                        ConsensusError::TransactionValidation("Fee calculation underflow".to_string())
2025-11-10T00:04:28.5728483Z +                        ConsensusError::TransactionValidation(
2025-11-10T00:04:28.5729665Z +                            "Fee calculation underflow".to_string(),
2025-11-10T00:04:28.5730935Z +                        )
2025-11-10T00:04:28.5731728Z                      })?;
2025-11-10T00:04:28.5732495Z  
2025-11-10T00:04:28.5733168Z                      if fee < 0 {
2025-11-10T00:04:28.5734961Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/block.rs:441:
2025-11-10T00:04:28.5738035Z  
2025-11-10T00:04:28.5738881Z                  if !matches!(input_valid, ValidationResult::Valid) {
2025-11-10T00:04:28.5740400Z                      return Ok((
2025-11-10T00:04:28.5741767Z -                        ValidationResult::Invalid(format!("Invalid transaction inputs at index {i}")),
2025-11-10T00:04:28.5743309Z +                        ValidationResult::Invalid(format!(
2025-11-10T00:04:28.5744746Z +                            "Invalid transaction inputs at index {i}"
2025-11-10T00:04:28.5745828Z +                        )),
2025-11-10T00:04:28.5746666Z                          utxo_set,
2025-11-10T00:04:28.5747527Z                      ));
2025-11-10T00:04:28.5748312Z                  }
2025-11-10T00:04:28.5749691Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/block.rs:495:
2025-11-10T00:04:28.5751263Z  
2025-11-10T00:04:28.5752066Z                  // Use checked arithmetic to prevent fee overflow
2025-11-10T00:04:28.5753354Z                  total_fees = total_fees.checked_add(fee).ok_or_else(|| {
2025-11-10T00:04:28.5755184Z -                    ConsensusError::BlockValidation(format!("Total fees overflow at transaction {i}"))
2025-11-10T00:04:28.5756803Z +                    ConsensusError::BlockValidation(format!(
2025-11-10T00:04:28.5757965Z +                        "Total fees overflow at transaction {i}"
2025-11-10T00:04:28.5758989Z +                    ))
2025-11-10T00:04:28.5759743Z                  })?;
2025-11-10T00:04:28.5760483Z              }
2025-11-10T00:04:28.5761169Z          }
2025-11-10T00:04:28.5762501Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/block.rs:779:
2025-11-10T00:04:28.5764592Z      // Estimate: current size + new outputs - spent inputs (for non-coinbase)
2025-11-10T00:04:28.5765924Z      #[cfg(feature = "production")]
2025-11-10T00:04:28.5767182Z      {
2025-11-10T00:04:28.5767961Z -        let estimated_new_size = utxo_set.len()
2025-11-10T00:04:28.5769014Z +        let estimated_new_size = utxo_set
2025-11-10T00:04:28.5769949Z +            .len()
2025-11-10T00:04:28.5770756Z              .saturating_add(tx.outputs.len())
2025-11-10T00:04:28.5772355Z              .saturating_sub(if is_coinbase(tx) { 0 } else { tx.inputs.len() });
2025-11-10T00:04:28.5773739Z          if estimated_new_size > utxo_set.capacity() {
2025-11-10T00:04:28.5775571Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/block.rs:896:
2025-11-10T00:04:28.5777270Z  /// is the transaction in Bitcoin wire format.
2025-11-10T00:04:28.5778875Z  ///
2025-11-10T00:04:28.5780624Z  /// For batch operations, use serialize_transaction + batch_double_sha256 instead.
2025-11-10T00:04:28.5782986Z -/// 
2025-11-10T00:04:28.5784120Z +///
2025-11-10T00:04:28.5786458Z  /// Performance optimization: Uses OptimizedSha256 (SHA-NI or AVX2) instead of sha2 crate
2025-11-10T00:04:28.5789261Z  /// for 2-3x faster transaction ID calculation.
2025-11-10T00:04:28.5791041Z  #[inline(always)]
2025-11-10T00:04:28.5792521Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/block.rs:903:
2025-11-10T00:04:28.5794253Z  pub fn calculate_tx_id(tx: &Transaction) -> Hash {
2025-11-10T00:04:28.5796266Z -    use crate::serialization::transaction::serialize_transaction;
2025-11-10T00:04:28.5797573Z      use crate::crypto::OptimizedSha256;
2025-11-10T00:04:28.5800192Z +    use crate::serialization::transaction::serialize_transaction;
2025-11-10T00:04:28.5801348Z  
2025-11-10T00:04:28.5802131Z      // Serialize transaction to Bitcoin wire format
2025-11-10T00:04:28.5803261Z      let serialized = serialize_transaction(tx);
2025-11-10T00:04:28.5805646Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/avx2_batch.rs:8:
2025-11-10T00:04:28.5808938Z  //! - Batch (8+ items): Uses AVX2 8-way parallel processing
2025-11-10T00:04:28.5810859Z  //! - Expected: 4-8x speedup for batch operations on AVX2-capable CPUs
2025-11-10T00:04:28.5812290Z  
2025-11-10T00:04:28.5812998Z -use sha2::{Digest, Sha256};
2025-11-10T00:04:28.5813909Z  use crate::crypto::sha256_avx2;
2025-11-10T00:04:28.5814978Z +use sha2::{Digest, Sha256};
2025-11-10T00:04:28.5815802Z  
2025-11-10T00:04:28.5816617Z  /// Batch SHA256 using AVX2 8-way parallel processing
2025-11-10T00:04:28.5817649Z  ///
2025-11-10T00:04:28.5819808Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/avx2_batch.rs:46:
2025-11-10T00:04:28.5821559Z      }
2025-11-10T00:04:28.5822209Z  
2025-11-10T00:04:28.5823043Z      let mut results = Vec::with_capacity(inputs.len());
2025-11-10T00:04:28.5825930Z -    
2025-11-10T00:04:28.5826574Z +
2025-11-10T00:04:28.5827312Z      // Process in chunks of 8 using AVX2
2025-11-10T00:04:28.5828421Z      let chunks = inputs.chunks_exact(8);
2025-11-10T00:04:28.5829450Z      let remainder = chunks.remainder();
2025-11-10T00:04:28.5831254Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/avx2_batch.rs:55:
2025-11-10T00:04:28.5833013Z      for chunk in chunks {
2025-11-10T00:04:28.5833933Z          // Convert chunk to array of 8 references
2025-11-10T00:04:28.5837113Z          let chunk_array: [&[u8]; 8] = [
2025-11-10T00:04:28.5838132Z -            chunk[0], chunk[1], chunk[2], chunk[3],
2025-11-10T00:04:28.5839217Z -            chunk[4], chunk[5], chunk[6], chunk[7],
2025-11-10T00:04:28.5840547Z +            chunk[0], chunk[1], chunk[2], chunk[3], chunk[4], chunk[5], chunk[6], chunk[7],
2025-11-10T00:04:28.5841801Z          ];
2025-11-10T00:04:28.5842465Z -        
2025-11-10T00:04:28.5843115Z +
2025-11-10T00:04:28.5845825Z          // Use AVX2 8-way parallel double SHA256
2025-11-10T00:04:28.5847118Z          // Note: sha256_8way_avx2 expects 64-byte inputs (one SHA256 block)
2025-11-10T00:04:28.5848643Z          // For non-64-byte inputs, it will fall back to sequential processing
2025-11-10T00:04:28.5850702Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/avx2_batch.rs:93:
2025-11-10T00:04:28.5852421Z          })
2025-11-10T00:04:28.5853107Z          .collect()
2025-11-10T00:04:28.5853955Z  }
2025-11-10T00:04:28.5854772Z -
2025-11-10T00:04:28.5855407Z  
2025-11-10T00:04:28.5858700Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/hash_compare.rs:99:
2025-11-10T00:04:28.5860454Z  
2025-11-10T00:04:28.5861091Z      #[test]
2025-11-10T00:04:28.5861817Z      fn test_hash_eq_random() {
2025-11-10T00:04:28.5863141Z -        let hash1: Hash = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32];
2025-11-10T00:04:28.5866608Z -        let hash2: Hash = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 33];
2025-11-10T00:04:28.5867968Z -        
2025-11-10T00:04:28.5868678Z +        let hash1: Hash = [
2025-11-10T00:04:28.5869702Z +            1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24,
2025-11-10T00:04:28.5870833Z +            25, 26, 27, 28, 29, 30, 31, 32,
2025-11-10T00:04:28.5871734Z +        ];
2025-11-10T00:04:28.5872445Z +        let hash2: Hash = [
2025-11-10T00:04:28.5873458Z +            1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24,
2025-11-10T00:04:28.5874726Z +            25, 26, 27, 28, 29, 30, 31, 33,
2025-11-10T00:04:28.5877028Z +        ];
2025-11-10T00:04:28.5877678Z +
2025-11-10T00:04:28.5878401Z          // Should match standard comparison
2025-11-10T00:04:28.5879523Z          assert_eq!(hash_eq(&hash1, &hash1), hash1 == hash1);
2025-11-10T00:04:28.5880750Z          assert_eq!(hash_eq(&hash1, &hash2), hash1 == hash2);
2025-11-10T00:04:28.5883213Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/hash_compare.rs:108:
2025-11-10T00:04:28.5885469Z      }
2025-11-10T00:04:28.5886123Z  }
2025-11-10T00:04:28.5886752Z -
2025-11-10T00:04:28.5888867Z  
2025-11-10T00:04:28.5890299Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/int_ops.rs:49:
2025-11-10T00:04:28.5891967Z          Ok(a + b)
2025-11-10T00:04:28.5892670Z      } else {
2025-11-10T00:04:28.5893912Z          // Mixed signs: use checked arithmetic (overflow not possible, but safer)
2025-11-10T00:04:28.5895416Z -        a.checked_add(b).ok_or_else(|| {
2025-11-10T00:04:28.5896833Z -            ConsensusError::TransactionValidation("Arithmetic overflow".to_string())
2025-11-10T00:04:28.5898201Z -        })
2025-11-10T00:04:28.5898905Z +        a.checked_add(b)
2025-11-10T00:04:28.5900295Z +            .ok_or_else(|| ConsensusError::TransactionValidation("Arithmetic overflow".to_string()))
2025-11-10T00:04:28.5901772Z      }
2025-11-10T00:04:28.5902414Z  }
2025-11-10T00:04:28.5903090Z  
2025-11-10T00:04:28.5905781Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/int_ops.rs:58:
2025-11-10T00:04:28.5910532Z  #[cfg(not(feature = "production"))]
2025-11-10T00:04:28.5912327Z  pub fn safe_add(a: i64, b: i64) -> Result<i64> {
2025-11-10T00:04:28.5914633Z      // Always use checked arithmetic in non-production builds
2025-11-10T00:04:28.5917117Z -    a.checked_add(b).ok_or_else(|| {
2025-11-10T00:04:28.5920759Z -        ConsensusError::TransactionValidation("Arithmetic overflow".to_string())
2025-11-10T00:04:28.5923143Z -    })
2025-11-10T00:04:28.5924268Z +    a.checked_add(b)
2025-11-10T00:04:28.5928108Z +        .ok_or_else(|| ConsensusError::TransactionValidation("Arithmetic overflow".to_string()))
2025-11-10T00:04:28.5929657Z  }
2025-11-10T00:04:28.5930287Z  
2025-11-10T00:04:28.5931076Z  /// Fast-path subtraction with overflow checking
2025-11-10T00:04:28.5932911Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/int_ops.rs:98:
2025-11-10T00:04:28.5934862Z  #[cfg(not(feature = "production"))]
2025-11-10T00:04:28.5935925Z  pub fn safe_sub(a: i64, b: i64) -> Result<i64> {
2025-11-10T00:04:28.5938956Z      // Always use checked arithmetic in non-production builds
2025-11-10T00:04:28.5940326Z -    a.checked_sub(b).ok_or_else(|| {
2025-11-10T00:04:28.5941741Z -        ConsensusError::TransactionValidation("Arithmetic underflow".to_string())
2025-11-10T00:04:28.5943113Z -    })
2025-11-10T00:04:28.5943778Z +    a.checked_sub(b)
2025-11-10T00:04:28.5945433Z +        .ok_or_else(|| ConsensusError::TransactionValidation("Arithmetic underflow".to_string()))
2025-11-10T00:04:28.5946904Z  }
2025-11-10T00:04:28.5947542Z  
2025-11-10T00:04:28.5949571Z  #[cfg(test)]
2025-11-10T00:04:28.5951076Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/int_ops.rs:129:
2025-11-10T00:04:28.5953099Z          assert!(safe_sub(i64::MIN, 1).is_err());
2025-11-10T00:04:28.5954214Z      }
2025-11-10T00:04:28.5955017Z  }
2025-11-10T00:04:28.5955643Z -
2025-11-10T00:04:28.5956286Z  
2025-11-10T00:04:28.5957663Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/mod.rs:71:
2025-11-10T00:04:28.5959470Z      }
2025-11-10T00:04:28.5960108Z  
2025-11-10T00:04:28.5960937Z      /// Hash data using the best available implementation
2025-11-10T00:04:28.5961991Z -    /// 
2025-11-10T00:04:28.5962730Z +    ///
2025-11-10T00:04:28.5963860Z      /// Priority:
2025-11-10T00:04:28.5965738Z      /// 1. SHA-NI (Intel SHA Extensions) - 10-15x faster for single hashes
2025-11-10T00:04:28.5968499Z      /// 2. sha2 crate with asm - baseline fallback
2025-11-10T00:04:28.5970243Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/mod.rs:78:
2025-11-10T00:04:28.5971865Z -    /// 
2025-11-10T00:04:28.5972511Z +    ///
2025-11-10T00:04:28.5973698Z      /// For batch operations, see batch_sha256 in optimizations module.
2025-11-10T00:04:28.5975321Z      pub fn hash(&self, data: &[u8]) -> [u8; 32] {
2025-11-10T00:04:28.5977015Z          #[cfg(target_arch = "x86_64")]
2025-11-10T00:04:28.5978679Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/mod.rs:85:
2025-11-10T00:04:28.5980390Z                  return sha_ni::sha256(data);
2025-11-10T00:04:28.5981579Z              }
2025-11-10T00:04:28.5982261Z          }
2025-11-10T00:04:28.5982913Z -        
2025-11-10T00:04:28.5983552Z +
2025-11-10T00:04:28.5984460Z          // Fallback: sha2 crate with asm optimizations
2025-11-10T00:04:28.5985538Z          let mut hasher = Sha256::new();
2025-11-10T00:04:28.5986510Z          hasher.update(data);
2025-11-10T00:04:28.5988097Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/mod.rs:96:
2025-11-10T00:04:28.5990712Z      }
2025-11-10T00:04:28.5991364Z  
2025-11-10T00:04:28.5992146Z      /// Compute double SHA256 (SHA256(SHA256(data)))
2025-11-10T00:04:28.5993158Z -    /// 
2025-11-10T00:04:28.5993812Z +    ///
2025-11-10T00:04:28.5994908Z      /// Uses SHA-NI if available for optimal single-hash performance.
2025-11-10T00:04:28.5996227Z      pub fn hash256(&self, data: &[u8]) -> [u8; 32] {
2025-11-10T00:04:28.5997303Z          #[cfg(target_arch = "x86_64")]
2025-11-10T00:04:28.6001079Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/mod.rs:105:
2025-11-10T00:04:28.6002834Z                  return sha_ni::hash256(data);
2025-11-10T00:04:28.6003775Z              }
2025-11-10T00:04:28.6004781Z          }
2025-11-10T00:04:28.6005552Z -        
2025-11-10T00:04:28.6006277Z +
2025-11-10T00:04:28.6006979Z          let first = self.hash(data);
2025-11-10T00:04:28.6007918Z          self.hash(&first)
2025-11-10T00:04:28.6008708Z      }
2025-11-10T00:04:28.6010926Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:17:
2025-11-10T00:04:28.6013251Z  struct AlignedInitialHash([u32; 8]);
2025-11-10T00:04:28.6014183Z  
2025-11-10T00:04:28.6015275Z  static INITIAL_HASH: AlignedInitialHash = AlignedInitialHash([
2025-11-10T00:04:28.6017997Z -    0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a,
2025-11-10T00:04:28.6019138Z -    0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19,
2025-11-10T00:04:28.6020754Z +    0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19,
2025-11-10T00:04:28.6022254Z  ]);
2025-11-10T00:04:28.6022889Z  
2025-11-10T00:04:28.6023547Z  // SHA256 K constants
2025-11-10T00:04:28.6025276Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:27:
2025-11-10T00:04:28.6027766Z  struct AlignedKArray([u32; 64]);
2025-11-10T00:04:28.6028624Z  
2025-11-10T00:04:28.6029412Z  static K_ARRAY: AlignedKArray = AlignedKArray([
2025-11-10T00:04:28.6030559Z -    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5,
2025-11-10T00:04:28.6031696Z -    0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,
2025-11-10T00:04:28.6032816Z -    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3,
2025-11-10T00:04:28.6033969Z -    0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,
2025-11-10T00:04:28.6035229Z -    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc,
2025-11-10T00:04:28.6036359Z -    0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,
2025-11-10T00:04:28.6037488Z -    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7,
2025-11-10T00:04:28.6039902Z -    0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,
2025-11-10T00:04:28.6041020Z -    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13,
2025-11-10T00:04:28.6042136Z -    0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,
2025-11-10T00:04:28.6043273Z -    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3,
2025-11-10T00:04:28.6044506Z -    0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,
2025-11-10T00:04:28.6045625Z -    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5,
2025-11-10T00:04:28.6046862Z -    0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,
2025-11-10T00:04:28.6048214Z -    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208,
2025-11-10T00:04:28.6049412Z -    0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2,
2025-11-10T00:04:28.6051166Z +    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,
2025-11-10T00:04:28.6053689Z +    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,
2025-11-10T00:04:28.6055951Z +    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,
2025-11-10T00:04:28.6058037Z +    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,
2025-11-10T00:04:28.6060112Z +    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,
2025-11-10T00:04:28.6062188Z +    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,
2025-11-10T00:04:28.6064262Z +    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,
2025-11-10T00:04:28.6066486Z +    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2,
2025-11-10T00:04:28.6067995Z  ]);
2025-11-10T00:04:28.6068628Z  
2025-11-10T00:04:28.6069630Z  /// Helper functions for AVX2 operations
2025-11-10T00:04:28.6071433Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:64:
2025-11-10T00:04:28.6073441Z      pub unsafe fn add3(x: __m256i, y: __m256i, z: __m256i) -> __m256i {
2025-11-10T00:04:28.6074751Z          add(add(x, y), z)
2025-11-10T00:04:28.6075543Z      }
2025-11-10T00:04:28.6076187Z -    
2025-11-10T00:04:28.6076817Z +
2025-11-10T00:04:28.6077476Z      #[inline(always)]
2025-11-10T00:04:28.6078567Z      pub unsafe fn add4(x: __m256i, y: __m256i, z: __m256i, w: __m256i) -> __m256i {
2025-11-10T00:04:28.6079972Z          // Core: Add(x, y, z, w) = Add(Add(x, y), Add(z, w))
2025-11-10T00:04:28.6082046Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:71:
2025-11-10T00:04:28.6085618Z          add(add(x, y), add(z, w))
2025-11-10T00:04:28.6086506Z      }
2025-11-10T00:04:28.6087148Z -    
2025-11-10T00:04:28.6087782Z +
2025-11-10T00:04:28.6088430Z      #[inline(always)]
2025-11-10T00:04:28.6090210Z      pub unsafe fn add5(x: __m256i, y: __m256i, z: __m256i, w: __m256i, v: __m256i) -> __m256i {
2025-11-10T00:04:28.6091713Z          // Core: Add(x, y, z, w, v) = Add(Add(x, y, z), Add(w, v))
2025-11-10T00:04:28.6093640Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:171:
2025-11-10T00:04:28.6095548Z  /// One round of SHA-256
2025-11-10T00:04:28.6096388Z  #[cfg(target_arch = "x86_64")]
2025-11-10T00:04:28.6097256Z  macro_rules! round {
2025-11-10T00:04:28.6100111Z -    ($a:expr, $b:expr, $c:expr, $d:expr, $e:expr, $f:expr, $g:expr, $h:expr, $k:expr) => {
2025-11-10T00:04:28.6101463Z -        {
2025-11-10T00:04:28.6102391Z -            use helpers::*;
2025-11-10T00:04:28.6103585Z -            // Core: Add(h, Sigma1(e), Ch(e, f, g), k) = Add(Add(h, Sigma1(e)), Add(Ch(e, f, g), k))
2025-11-10T00:04:28.6105351Z -            let t1 = add(add($h, helpers::sigma1($e)), add(helpers::ch($e, $f, $g), $k));
2025-11-10T00:04:28.6107176Z -            let t2 = add(helpers::sigma0($a), helpers::maj($a, $b, $c));
2025-11-10T00:04:28.6108347Z -            $d = add($d, t1);
2025-11-10T00:04:28.6109211Z -            $h = add(t1, t2);
2025-11-10T00:04:28.6110037Z -        }
2025-11-10T00:04:28.6110794Z -    };
2025-11-10T00:04:28.6111892Z +    ($a:expr, $b:expr, $c:expr, $d:expr, $e:expr, $f:expr, $g:expr, $h:expr, $k:expr) => {{
2025-11-10T00:04:28.6113198Z +        use helpers::*;
2025-11-10T00:04:28.6116210Z +        // Core: Add(h, Sigma1(e), Ch(e, f, g), k) = Add(Add(h, Sigma1(e)), Add(Ch(e, f, g), k))
2025-11-10T00:04:28.6117484Z +        let t1 = add(
2025-11-10T00:04:28.6118317Z +            add($h, helpers::sigma1($e)),
2025-11-10T00:04:28.6119575Z +            add(helpers::ch($e, $f, $g), $k),
2025-11-10T00:04:28.6120512Z +        );
2025-11-10T00:04:28.6121403Z +        let t2 = add(helpers::sigma0($a), helpers::maj($a, $b, $c));
2025-11-10T00:04:28.6122650Z +        $d = add($d, t1);
2025-11-10T00:04:28.6123821Z +        $h = add(t1, t2);
2025-11-10T00:04:28.6124768Z +    }};
2025-11-10T00:04:28.6125420Z  }
2025-11-10T00:04:28.6126043Z  
2025-11-10T00:04:28.6126853Z  /// Read 8 32-bit words from 8 different 64-byte blocks
2025-11-10T00:04:28.6129723Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:190:
2025-11-10T00:04:28.6132126Z      let mut words = [0u32; 8];
2025-11-10T00:04:28.6133406Z      for i in 0..8 {
2025-11-10T00:04:28.6134765Z          let pos = (i * 64) + offset;
2025-11-10T00:04:28.6138219Z -        words[i] = u32::from_le_bytes([
2025-11-10T00:04:28.6139886Z -            input[pos],
2025-11-10T00:04:28.6141224Z -            input[pos + 1],
2025-11-10T00:04:28.6142544Z -            input[pos + 2],
2025-11-10T00:04:28.6143989Z -            input[pos + 3],
2025-11-10T00:04:28.6145569Z -        ]);
2025-11-10T00:04:28.6149015Z +        words[i] = u32::from_le_bytes([input[pos], input[pos + 1], input[pos + 2], input[pos + 3]]);
2025-11-10T00:04:28.6150419Z      }
2025-11-10T00:04:28.6151062Z -    
2025-11-10T00:04:28.6151700Z +
2025-11-10T00:04:28.6168493Z      // _mm256_set_epi32 places first argument at index 7, last at index 0
2025-11-10T00:04:28.6170490Z      // Core: ReadLE32(chunk + 0) is first arg -> index 7, ReadLE32(chunk + 64) is second arg -> index 6, etc.
2025-11-10T00:04:28.6172219Z      // So words[0] (chunk + 0) should be first arg -> index 7
2025-11-10T00:04:28.6174184Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:205:
2025-11-10T00:04:28.6176716Z      // So chunk 0 goes to index 7, chunk 1 (chunk + 64) goes to index 6, etc.
2025-11-10T00:04:28.6178352Z      // This means words[0] -> index 7, words[1] -> index 6, ..., words[7] -> index 0
2025-11-10T00:04:28.6179713Z      let ret = _mm256_set_epi32(
2025-11-10T00:04:28.6181010Z -        words[0] as i32,  // chunk + 0 -> index 7 (first arg)
2025-11-10T00:04:28.6182296Z -        words[1] as i32,  // chunk + 64 -> index 6 (second arg)
2025-11-10T00:04:28.6183477Z -        words[2] as i32,  // chunk + 128 -> index 5
2025-11-10T00:04:28.6184822Z -        words[3] as i32,  // chunk + 192 -> index 4
2025-11-10T00:04:28.6185943Z -        words[4] as i32,  // chunk + 256 -> index 3
2025-11-10T00:04:28.6187047Z -        words[5] as i32,  // chunk + 320 -> index 2
2025-11-10T00:04:28.6189361Z -        words[6] as i32,  // chunk + 384 -> index 1
2025-11-10T00:04:28.6190512Z -        words[7] as i32,  // chunk + 448 -> index 0 (last arg)
2025-11-10T00:04:28.6191746Z +        words[0] as i32, // chunk + 0 -> index 7 (first arg)
2025-11-10T00:04:28.6192968Z +        words[1] as i32, // chunk + 64 -> index 6 (second arg)
2025-11-10T00:04:28.6194142Z +        words[2] as i32, // chunk + 128 -> index 5
2025-11-10T00:04:28.6195475Z +        words[3] as i32, // chunk + 192 -> index 4
2025-11-10T00:04:28.6198081Z +        words[4] as i32, // chunk + 256 -> index 3
2025-11-10T00:04:28.6199473Z +        words[5] as i32, // chunk + 320 -> index 2
2025-11-10T00:04:28.6200598Z +        words[6] as i32, // chunk + 384 -> index 1
2025-11-10T00:04:28.6201757Z +        words[7] as i32, // chunk + 448 -> index 0 (last arg)
2025-11-10T00:04:28.6202816Z      );
2025-11-10T00:04:28.6203553Z -    
2025-11-10T00:04:28.6204655Z +
2025-11-10T00:04:28.6205713Z      // Byte swap within each 32-bit word using shuffle (matching Core exactly)
2025-11-10T00:04:28.6207205Z      // SHA256 operates on big-endian 32-bit words internally
2025-11-10T00:04:28.6208549Z      // We read little-endian, so we need to byte-swap each word
2025-11-10T00:04:28.6210524Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:221:
2025-11-10T00:04:28.6213214Z      // The shuffle mask 0x0C0D0E0F, 0x08090A0B, 0x04050607, 0x00010203
2025-11-10T00:04:28.6214697Z      // reverses bytes within each 32-bit word
2025-11-10T00:04:28.6215849Z -    // 
2025-11-10T00:04:28.6218568Z +    //
2025-11-10T00:04:28.6219773Z      // Note: _mm256_shuffle_epi8 operates on 8-bit elements across the entire vector
2025-11-10T00:04:28.6221391Z      // The mask pattern is designed to swap bytes within each word
2025-11-10T00:04:28.6222622Z      let shuffle_mask = _mm256_set_epi32(
2025-11-10T00:04:28.6224585Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:227:
2025-11-10T00:04:28.6228037Z -        0x0C0D0E0F, 0x08090A0B, 0x04050607, 0x00010203,
2025-11-10T00:04:28.6229196Z -        0x0C0D0E0F, 0x08090A0B, 0x04050607, 0x00010203,
2025-11-10T00:04:28.6230682Z +        0x0C0D0E0F, 0x08090A0B, 0x04050607, 0x00010203, 0x0C0D0E0F, 0x08090A0B, 0x04050607,
2025-11-10T00:04:28.6232763Z +        0x00010203,
2025-11-10T00:04:28.6233536Z      );
2025-11-10T00:04:28.6234527Z      _mm256_shuffle_epi8(ret, shuffle_mask)
2025-11-10T00:04:28.6235491Z  }
2025-11-10T00:04:28.6237000Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:236:
2025-11-10T00:04:28.6240585Z      // Core's Write8 does: byte-swap with shuffle, then WriteLE32 to each position
2025-11-10T00:04:28.6242100Z      // Byte swap within each 32-bit word using shuffle
2025-11-10T00:04:28.6243203Z      let shuffle_mask = _mm256_set_epi32(
2025-11-10T00:04:28.6244421Z -        0x0C0D0E0F, 0x08090A0B, 0x04050607, 0x00010203,
2025-11-10T00:04:28.6245574Z -        0x0C0D0E0F, 0x08090A0B, 0x04050607, 0x00010203,
2025-11-10T00:04:28.6247052Z +        0x0C0D0E0F, 0x08090A0B, 0x04050607, 0x00010203, 0x0C0D0E0F, 0x08090A0B, 0x04050607,
2025-11-10T00:04:28.6248420Z +        0x00010203,
2025-11-10T00:04:28.6249162Z      );
2025-11-10T00:04:28.6249939Z      let v = _mm256_shuffle_epi8(v, shuffle_mask);
2025-11-10T00:04:28.6250971Z -    
2025-11-10T00:04:28.6251623Z +
2025-11-10T00:04:28.6252566Z      // Extract and write to 8 different positions (Core's WriteLE32)
2025-11-10T00:04:28.6255762Z      // Unroll loop because _mm256_extract_epi32 requires compile-time constant index
2025-11-10T00:04:28.6257263Z      let word0 = _mm256_extract_epi32(v, 7) as u32;
2025-11-10T00:04:28.6259144Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:264:
2025-11-10T00:04:28.6261124Z  /// Transform 8 double SHA256 blocks in parallel (SHA256D)
2025-11-10T00:04:28.6262393Z  /// Input: 512 bytes (8 * 64-byte blocks, contiguous)
2025-11-10T00:04:28.6263580Z  /// Output: 256 bytes (8 * 32-byte hashes, contiguous)
2025-11-10T00:04:28.6264739Z -/// 
2025-11-10T00:04:28.6266916Z +///
2025-11-10T00:04:28.6268001Z  /// This performs double SHA256 (SHA256(SHA256(input))) on 8 blocks in parallel.
2025-11-10T00:04:28.6269388Z  #[cfg(target_arch = "x86_64")]
2025-11-10T00:04:28.6270454Z  unsafe fn transform_8way(out: &mut [u8], input: &[u8]) {
2025-11-10T00:04:28.6272864Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:271:
2025-11-10T00:04:28.6274863Z      use helpers::*;
2025-11-10T00:04:28.6275630Z -    
2025-11-10T00:04:28.6276279Z +
2025-11-10T00:04:28.6277369Z      // Initialize state with initial hash values (host byte order, matching Core)
2025-11-10T00:04:28.6279120Z      let mut a = _mm256_set1_epi32(INITIAL_HASH.0[0] as i32);
2025-11-10T00:04:28.6280382Z      let mut b = _mm256_set1_epi32(INITIAL_HASH.0[1] as i32);
2025-11-10T00:04:28.6283051Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:279:
2025-11-10T00:04:28.6286290Z      let mut f = _mm256_set1_epi32(INITIAL_HASH.0[5] as i32);
2025-11-10T00:04:28.6287563Z      let mut g = _mm256_set1_epi32(INITIAL_HASH.0[6] as i32);
2025-11-10T00:04:28.6288817Z      let mut h = _mm256_set1_epi32(INITIAL_HASH.0[7] as i32);
2025-11-10T00:04:28.6290301Z -    
2025-11-10T00:04:28.6291121Z +
2025-11-10T00:04:28.6291831Z      #[cfg(debug_assertions)]
2025-11-10T00:04:28.6292685Z      {
2025-11-10T00:04:28.6293482Z          let a_init = _mm256_extract_epi32(a, 0) as u32;
2025-11-10T00:04:28.6295801Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:312:
2025-11-10T00:04:28.6297547Z      {
2025-11-10T00:04:28.6300244Z          let w0_val = _mm256_extract_epi32(w0, 0) as u32;
2025-11-10T00:04:28.6301533Z          let w0_val_7 = _mm256_extract_epi32(w0, 7) as u32;
2025-11-10T00:04:28.6303195Z -        println!("DEBUG: w0 after read8 and shuffle: index 0 = 0x{:08x}, index 7 = 0x{:08x}", w0_val, w0_val_7);
2025-11-10T00:04:28.6305117Z +        println!(
2025-11-10T00:04:28.6306246Z +            "DEBUG: w0 after read8 and shuffle: index 0 = 0x{:08x}, index 7 = 0x{:08x}",
2025-11-10T00:04:28.6307577Z +            w0_val, w0_val_7
2025-11-10T00:04:28.6309654Z +        );
2025-11-10T00:04:28.6310388Z          if w0_val == 0 && w0_val_7 == 0 {
2025-11-10T00:04:28.6311570Z              println!("DEBUG: w0 is zero (expected for zero input)");
2025-11-10T00:04:28.6312702Z          }
2025-11-10T00:04:28.6314247Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:322:
2025-11-10T00:04:28.6316205Z      {
2025-11-10T00:04:28.6317078Z          let a_after_round0 = _mm256_extract_epi32(a, 0) as u32;
2025-11-10T00:04:28.6318346Z          let h_after_round0 = _mm256_extract_epi32(h, 0) as u32;
2025-11-10T00:04:28.6320509Z -        println!("DEBUG After round 0: a=0x{:08x}, h=0x{:08x}", a_after_round0, h_after_round0);
2025-11-10T00:04:28.6321939Z +        println!(
2025-11-10T00:04:28.6322816Z +            "DEBUG After round 0: a=0x{:08x}, h=0x{:08x}",
2025-11-10T00:04:28.6323904Z +            a_after_round0, h_after_round0
2025-11-10T00:04:28.6324998Z +        );
2025-11-10T00:04:28.6325672Z      }
2025-11-10T00:04:28.6328454Z      w1 = read8(input, 4);
2025-11-10T00:04:28.6329468Z      round!(h, a, b, c, d, e, f, g, add(k(K_ARRAY.0[1]), w1));
2025-11-10T00:04:28.6331402Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:330:
2025-11-10T00:04:28.6333163Z      {
2025-11-10T00:04:28.6334021Z          let a_after_round1 = _mm256_extract_epi32(a, 0) as u32;
2025-11-10T00:04:28.6335440Z          let h_after_round1 = _mm256_extract_epi32(h, 0) as u32;
2025-11-10T00:04:28.6338837Z -        println!("DEBUG After round 1: a=0x{:08x}, h=0x{:08x}", a_after_round1, h_after_round1);
2025-11-10T00:04:28.6340223Z +        println!(
2025-11-10T00:04:28.6341136Z +            "DEBUG After round 1: a=0x{:08x}, h=0x{:08x}",
2025-11-10T00:04:28.6342227Z +            a_after_round1, h_after_round1
2025-11-10T00:04:28.6343165Z +        );
2025-11-10T00:04:28.6343828Z      }
2025-11-10T00:04:28.6344646Z      w2 = read8(input, 8);
2025-11-10T00:04:28.6345656Z      round!(g, h, a, b, c, d, e, f, add(k(K_ARRAY.0[2]), w2));
2025-11-10T00:04:28.6349588Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:349:
2025-11-10T00:04:28.6351589Z          let a_after_round7 = _mm256_extract_epi32(a, 0) as u32;
2025-11-10T00:04:28.6352932Z          let b_after_round7 = _mm256_extract_epi32(b, 0) as u32;
2025-11-10T00:04:28.6354208Z          let h_after_round7 = _mm256_extract_epi32(h, 0) as u32;
2025-11-10T00:04:28.6356048Z -        println!("DEBUG After round 7: a=0x{:08x}, b=0x{:08x}, h=0x{:08x}", a_after_round7, b_after_round7, h_after_round7);
2025-11-10T00:04:28.6358584Z +        println!(
2025-11-10T00:04:28.6359517Z +            "DEBUG After round 7: a=0x{:08x}, b=0x{:08x}, h=0x{:08x}",
2025-11-10T00:04:28.6360775Z +            a_after_round7, b_after_round7, h_after_round7
2025-11-10T00:04:28.6361795Z +        );
2025-11-10T00:04:28.6362471Z      }
2025-11-10T00:04:28.6363174Z      w8 = read8(input, 32);
2025-11-10T00:04:28.6364170Z      round!(a, b, c, d, e, f, g, h, add(k(K_ARRAY.0[8]), w8));
2025-11-10T00:04:28.6366560Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:371:
2025-11-10T00:04:28.6369916Z      {
2025-11-10T00:04:28.6370927Z          let a_after_round15 = _mm256_extract_epi32(a, 0) as u32;
2025-11-10T00:04:28.6372216Z          let h_after_round15 = _mm256_extract_epi32(h, 0) as u32;
2025-11-10T00:04:28.6373772Z -        println!("DEBUG After round 15: a=0x{:08x}, h=0x{:08x}", a_after_round15, h_after_round15);
2025-11-10T00:04:28.6375358Z +        println!(
2025-11-10T00:04:28.6376235Z +            "DEBUG After round 15: a=0x{:08x}, h=0x{:08x}",
2025-11-10T00:04:28.6379264Z +            a_after_round15, h_after_round15
2025-11-10T00:04:28.6380304Z +        );
2025-11-10T00:04:28.6381095Z      }
2025-11-10T00:04:28.6381742Z  
2025-11-10T00:04:28.6382448Z      // Rounds 16-63: Message schedule
2025-11-10T00:04:28.6384216Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:382:
2025-11-10T00:04:28.6388392Z          let w14_val = _mm256_extract_epi32(w14, 0) as u32;
2025-11-10T00:04:28.6389571Z          let w9_val = _mm256_extract_epi32(w9, 0) as u32;
2025-11-10T00:04:28.6390742Z          let w1_val = _mm256_extract_epi32(w1, 0) as u32;
2025-11-10T00:04:28.6392470Z -        println!("DEBUG Round 16 before inc4: w0=0x{:08x}, w14=0x{:08x}, w9=0x{:08x}, w1=0x{:08x}", w0_before, w14_val, w9_val, w1_val);
2025-11-10T00:04:28.6394103Z +        println!(
2025-11-10T00:04:28.6395420Z +            "DEBUG Round 16 before inc4: w0=0x{:08x}, w14=0x{:08x}, w9=0x{:08x}, w1=0x{:08x}",
2025-11-10T00:04:28.6398079Z +            w0_before, w14_val, w9_val, w1_val
2025-11-10T00:04:28.6399040Z +        );
2025-11-10T00:04:28.6399696Z      }
2025-11-10T00:04:28.6400927Z -    helpers::inc4(&mut w0, helpers::sigma1_small(w14), w9, helpers::sigma0_small(w1));
2025-11-10T00:04:28.6402297Z +    helpers::inc4(
2025-11-10T00:04:28.6403040Z +        &mut w0,
2025-11-10T00:04:28.6403831Z +        helpers::sigma1_small(w14),
2025-11-10T00:04:28.6405053Z +        w9,
2025-11-10T00:04:28.6407720Z +        helpers::sigma0_small(w1),
2025-11-10T00:04:28.6408618Z +    );
2025-11-10T00:04:28.6409326Z      #[cfg(debug_assertions)]
2025-11-10T00:04:28.6410179Z      {
2025-11-10T00:04:28.6411033Z          let w0_after_inc = _mm256_extract_epi32(w0, 0) as u32;
2025-11-10T00:04:28.6412958Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:405:
2025-11-10T00:04:28.6417810Z                   a_after_round16, b_after_round16, c_after_round16, d_after_round16,
2025-11-10T00:04:28.6419442Z                   e_after_round16, f_after_round16, g_after_round16, h_after_round16);
2025-11-10T00:04:28.6420839Z      }
2025-11-10T00:04:28.6421955Z -    helpers::inc4(&mut w1, helpers::sigma1_small(w15), w10, helpers::sigma0_small(w2));
2025-11-10T00:04:28.6423335Z +    helpers::inc4(
2025-11-10T00:04:28.6424075Z +        &mut w1,
2025-11-10T00:04:28.6425045Z +        helpers::sigma1_small(w15),
2025-11-10T00:04:28.6426341Z +        w10,
2025-11-10T00:04:28.6427098Z +        helpers::sigma0_small(w2),
2025-11-10T00:04:28.6427989Z +    );
2025-11-10T00:04:28.6428819Z      round!(h, a, b, c, d, e, f, g, add(k(K_ARRAY.0[17]), w1));
2025-11-10T00:04:28.6430398Z -    helpers::inc4(&mut w2, helpers::sigma1_small(w0), w11, helpers::sigma0_small(w3));
2025-11-10T00:04:28.6431771Z +    helpers::inc4(
2025-11-10T00:04:28.6432510Z +        &mut w2,
2025-11-10T00:04:28.6433322Z +        helpers::sigma1_small(w0),
2025-11-10T00:04:28.6434219Z +        w11,
2025-11-10T00:04:28.6435193Z +        helpers::sigma0_small(w3),
2025-11-10T00:04:28.6436076Z +    );
2025-11-10T00:04:28.6436990Z      round!(g, h, a, b, c, d, e, f, add(k(K_ARRAY.0[18]), w2));
2025-11-10T00:04:28.6439805Z      #[cfg(debug_assertions)]
2025-11-10T00:04:28.6440646Z      {
2025-11-10T00:04:28.6442162Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:414:
2025-11-10T00:04:28.6444114Z          let a_after_round18 = _mm256_extract_epi32(a, 0) as u32;
2025-11-10T00:04:28.6445891Z          println!("DEBUG After round 18: a=0x{:08x}", a_after_round18);
2025-11-10T00:04:28.6447201Z      }
2025-11-10T00:04:28.6448365Z -    helpers::inc4(&mut w3, helpers::sigma1_small(w1), w12, helpers::sigma0_small(w4));
2025-11-10T00:04:28.6449732Z +    helpers::inc4(
2025-11-10T00:04:28.6450465Z +        &mut w3,
2025-11-10T00:04:28.6451228Z +        helpers::sigma1_small(w1),
2025-11-10T00:04:28.6452117Z +        w12,
2025-11-10T00:04:28.6452860Z +        helpers::sigma0_small(w4),
2025-11-10T00:04:28.6455751Z +    );
2025-11-10T00:04:28.6456594Z      round!(f, g, h, a, b, c, d, e, add(k(K_ARRAY.0[19]), w3));
2025-11-10T00:04:28.6458092Z -    helpers::inc4(&mut w4, helpers::sigma1_small(w2), w13, helpers::sigma0_small(w5));
2025-11-10T00:04:28.6459458Z +    helpers::inc4(
2025-11-10T00:04:28.6460187Z +        &mut w4,
2025-11-10T00:04:28.6460966Z +        helpers::sigma1_small(w2),
2025-11-10T00:04:28.6461848Z +        w13,
2025-11-10T00:04:28.6462613Z +        helpers::sigma0_small(w5),
2025-11-10T00:04:28.6463491Z +    );
2025-11-10T00:04:28.6464451Z      round!(e, f, g, h, a, b, c, d, add(k(K_ARRAY.0[20]), w4));
2025-11-10T00:04:28.6465572Z      #[cfg(debug_assertions)]
2025-11-10T00:04:28.6468194Z      {
2025-11-10T00:04:28.6469698Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:423:
2025-11-10T00:04:28.6471657Z          let a_after_round20 = _mm256_extract_epi32(a, 0) as u32;
2025-11-10T00:04:28.6473014Z          println!("DEBUG After round 20: a=0x{:08x}", a_after_round20);
2025-11-10T00:04:28.6474160Z      }
2025-11-10T00:04:28.6475442Z -    helpers::inc4(&mut w5, helpers::sigma1_small(w3), w14, helpers::sigma0_small(w6));
2025-11-10T00:04:28.6476802Z +    helpers::inc4(
2025-11-10T00:04:28.6477532Z +        &mut w5,
2025-11-10T00:04:28.6478301Z +        helpers::sigma1_small(w3),
2025-11-10T00:04:28.6479188Z +        w14,
2025-11-10T00:04:28.6479929Z +        helpers::sigma0_small(w6),
2025-11-10T00:04:28.6481002Z +    );
2025-11-10T00:04:28.6481910Z      round!(d, e, f, g, h, a, b, c, add(k(K_ARRAY.0[21]), w5));
2025-11-10T00:04:28.6483424Z -    helpers::inc4(&mut w6, helpers::sigma1_small(w4), w15, helpers::sigma0_small(w7));
2025-11-10T00:04:28.6484922Z +    helpers::inc4(
2025-11-10T00:04:28.6485658Z +        &mut w6,
2025-11-10T00:04:28.6488070Z +        helpers::sigma1_small(w4),
2025-11-10T00:04:28.6489206Z +        w15,
2025-11-10T00:04:28.6490020Z +        helpers::sigma0_small(w7),
2025-11-10T00:04:28.6490897Z +    );
2025-11-10T00:04:28.6492061Z      round!(c, d, e, f, g, h, a, b, add(k(K_ARRAY.0[22]), w6));
2025-11-10T00:04:28.6493905Z -    helpers::inc4(&mut w7, helpers::sigma1_small(w5), w0, helpers::sigma0_small(w8));
2025-11-10T00:04:28.6495457Z +    helpers::inc4(
2025-11-10T00:04:28.6497987Z +        &mut w7,
2025-11-10T00:04:28.6498752Z +        helpers::sigma1_small(w5),
2025-11-10T00:04:28.6499704Z +        w0,
2025-11-10T00:04:28.6500895Z +        helpers::sigma0_small(w8),
2025-11-10T00:04:28.6502068Z +    );
2025-11-10T00:04:28.6503023Z      round!(b, c, d, e, f, g, h, a, add(k(K_ARRAY.0[23]), w7));
2025-11-10T00:04:28.6504686Z -    helpers::inc4(&mut w8, helpers::sigma1_small(w6), w1, helpers::sigma0_small(w9));
2025-11-10T00:04:28.6506046Z +    helpers::inc4(
2025-11-10T00:04:28.6506828Z +        &mut w8,
2025-11-10T00:04:28.6507611Z +        helpers::sigma1_small(w6),
2025-11-10T00:04:28.6508498Z +        w1,
2025-11-10T00:04:28.6509246Z +        helpers::sigma0_small(w9),
2025-11-10T00:04:28.6510124Z +    );
2025-11-10T00:04:28.6510953Z      round!(a, b, c, d, e, f, g, h, add(k(K_ARRAY.0[24]), w8));
2025-11-10T00:04:28.6512445Z -    helpers::inc4(&mut w9, helpers::sigma1_small(w7), w2, helpers::sigma0_small(w10));
2025-11-10T00:04:28.6513816Z +    helpers::inc4(
2025-11-10T00:04:28.6514676Z +        &mut w9,
2025-11-10T00:04:28.6515454Z +        helpers::sigma1_small(w7),
2025-11-10T00:04:28.6516341Z +        w2,
2025-11-10T00:04:28.6517310Z +        helpers::sigma0_small(w10),
2025-11-10T00:04:28.6518205Z +    );
2025-11-10T00:04:28.6519031Z      round!(h, a, b, c, d, e, f, g, add(k(K_ARRAY.0[25]), w9));
2025-11-10T00:04:28.6520679Z -    helpers::inc4(&mut w10, helpers::sigma1_small(w8), w3, helpers::sigma0_small(w11));
2025-11-10T00:04:28.6522063Z +    helpers::inc4(
2025-11-10T00:04:28.6522800Z +        &mut w10,
2025-11-10T00:04:28.6523571Z +        helpers::sigma1_small(w8),
2025-11-10T00:04:28.6524591Z +        w3,
2025-11-10T00:04:28.6525348Z +        helpers::sigma0_small(w11),
2025-11-10T00:04:28.6526241Z +    );
2025-11-10T00:04:28.6527064Z      round!(g, h, a, b, c, d, e, f, add(k(K_ARRAY.0[26]), w10));
2025-11-10T00:04:28.6528585Z -    helpers::inc4(&mut w11, helpers::sigma1_small(w9), w4, helpers::sigma0_small(w12));
2025-11-10T00:04:28.6530314Z +    helpers::inc4(
2025-11-10T00:04:28.6531048Z +        &mut w11,
2025-11-10T00:04:28.6531823Z +        helpers::sigma1_small(w9),
2025-11-10T00:04:28.6532704Z +        w4,
2025-11-10T00:04:28.6533466Z +        helpers::sigma0_small(w12),
2025-11-10T00:04:28.6536017Z +    );
2025-11-10T00:04:28.6536856Z      round!(f, g, h, a, b, c, d, e, add(k(K_ARRAY.0[27]), w11));
2025-11-10T00:04:28.6538399Z -    helpers::inc4(&mut w12, helpers::sigma1_small(w10), w5, helpers::sigma0_small(w13));
2025-11-10T00:04:28.6539794Z +    helpers::inc4(
2025-11-10T00:04:28.6540528Z +        &mut w12,
2025-11-10T00:04:28.6541301Z +        helpers::sigma1_small(w10),
2025-11-10T00:04:28.6542189Z +        w5,
2025-11-10T00:04:28.6543094Z +        helpers::sigma0_small(w13),
2025-11-10T00:04:28.6544004Z +    );
2025-11-10T00:04:28.6545284Z      round!(e, f, g, h, a, b, c, d, add(k(K_ARRAY.0[28]), w12));
2025-11-10T00:04:28.6547992Z -    helpers::inc4(&mut w13, helpers::sigma1_small(w11), w6, helpers::sigma0_small(w14));
2025-11-10T00:04:28.6549380Z +    helpers::inc4(
2025-11-10T00:04:28.6550112Z +        &mut w13,
2025-11-10T00:04:28.6550883Z +        helpers::sigma1_small(w11),
2025-11-10T00:04:28.6551787Z +        w6,
2025-11-10T00:04:28.6552555Z +        helpers::sigma0_small(w14),
2025-11-10T00:04:28.6553438Z +    );
2025-11-10T00:04:28.6554266Z      round!(d, e, f, g, h, a, b, c, add(k(K_ARRAY.0[29]), w13));
2025-11-10T00:04:28.6555997Z -    helpers::inc4(&mut w14, helpers::sigma1_small(w12), w7, helpers::sigma0_small(w15));
2025-11-10T00:04:28.6557399Z +    helpers::inc4(
2025-11-10T00:04:28.6558493Z +        &mut w14,
2025-11-10T00:04:28.6559282Z +        helpers::sigma1_small(w12),
2025-11-10T00:04:28.6560173Z +        w7,
2025-11-10T00:04:28.6560913Z +        helpers::sigma0_small(w15),
2025-11-10T00:04:28.6561793Z +    );
2025-11-10T00:04:28.6562627Z      round!(c, d, e, f, g, h, a, b, add(k(K_ARRAY.0[30]), w14));
2025-11-10T00:04:28.6565920Z      #[cfg(debug_assertions)]
2025-11-10T00:04:28.6566754Z      {
2025-11-10T00:04:28.6568275Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:468:
2025-11-10T00:04:28.6570147Z          let w0_val = _mm256_extract_epi32(w0, 0) as u32;
2025-11-10T00:04:28.6571316Z          let w11_val = _mm256_extract_epi32(w11, 0) as u32;
2025-11-10T00:04:28.6572466Z          let w6_val = _mm256_extract_epi32(w6, 0) as u32;
2025-11-10T00:04:28.6574218Z -        println!("DEBUG w15 before inc4: 0x{:08x}, w13: 0x{:08x}, w8: 0x{:08x}, w0: 0x{:08x}", w15_before, w13_val, w8_val, w0_val);
2025-11-10T00:04:28.6577422Z +        println!(
2025-11-10T00:04:28.6578471Z +            "DEBUG w15 before inc4: 0x{:08x}, w13: 0x{:08x}, w8: 0x{:08x}, w0: 0x{:08x}",
2025-11-10T00:04:28.6579791Z +            w15_before, w13_val, w8_val, w0_val
2025-11-10T00:04:28.6580741Z +        );
2025-11-10T00:04:28.6581951Z          println!("DEBUG w11: 0x{:08x}, w6: 0x{:08x}", w11_val, w6_val);
2025-11-10T00:04:28.6583789Z          let sigma1_w13 = _mm256_extract_epi32(helpers::sigma1_small(w13), 0) as u32;
2025-11-10T00:04:28.6585573Z          let sigma0_w0 = _mm256_extract_epi32(helpers::sigma0_small(w0), 0) as u32;
2025-11-10T00:04:28.6587709Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:475:
2025-11-10T00:04:28.6590213Z -        println!("DEBUG sigma1_small(w13): 0x{:08x}, sigma0_small(w0): 0x{:08x}", sigma1_w13, sigma0_w0);
2025-11-10T00:04:28.6591837Z +        println!(
2025-11-10T00:04:28.6592835Z +            "DEBUG sigma1_small(w13): 0x{:08x}, sigma0_small(w0): 0x{:08x}",
2025-11-10T00:04:28.6594055Z +            sigma1_w13, sigma0_w0
2025-11-10T00:04:28.6595055Z +        );
2025-11-10T00:04:28.6595720Z      }
2025-11-10T00:04:28.6596819Z -    helpers::inc4(&mut w15, helpers::sigma1_small(w13), w8, helpers::sigma0_small(w0));
2025-11-10T00:04:28.6598201Z +    helpers::inc4(
2025-11-10T00:04:28.6598932Z +        &mut w15,
2025-11-10T00:04:28.6599705Z +        helpers::sigma1_small(w13),
2025-11-10T00:04:28.6600605Z +        w8,
2025-11-10T00:04:28.6601338Z +        helpers::sigma0_small(w0),
2025-11-10T00:04:28.6602229Z +    );
2025-11-10T00:04:28.6603231Z      #[cfg(debug_assertions)]
2025-11-10T00:04:28.6604100Z      {
2025-11-10T00:04:28.6605045Z          let w15_after = _mm256_extract_epi32(w15, 0) as u32;
2025-11-10T00:04:28.6606939Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:497:
2025-11-10T00:04:28.6610764Z                   a_after_round31, b_after_round31, c_after_round31, d_after_round31,
2025-11-10T00:04:28.6612306Z                   e_after_round31, f_after_round31, g_after_round31, h_after_round31);
2025-11-10T00:04:28.6613532Z      }
2025-11-10T00:04:28.6614832Z -    helpers::inc4(&mut w0, helpers::sigma1_small(w14), w9, helpers::sigma0_small(w1));
2025-11-10T00:04:28.6616195Z +    helpers::inc4(
2025-11-10T00:04:28.6616923Z +        &mut w0,
2025-11-10T00:04:28.6619476Z +        helpers::sigma1_small(w14),
2025-11-10T00:04:28.6620366Z +        w9,
2025-11-10T00:04:28.6621105Z +        helpers::sigma0_small(w1),
2025-11-10T00:04:28.6621986Z +    );
2025-11-10T00:04:28.6622805Z      round!(a, b, c, d, e, f, g, h, add(k(K_ARRAY.0[32]), w0));
2025-11-10T00:04:28.6624446Z -    helpers::inc4(&mut w1, helpers::sigma1_small(w15), w10, helpers::sigma0_small(w2));
2025-11-10T00:04:28.6625811Z +    helpers::inc4(
2025-11-10T00:04:28.6626557Z +        &mut w1,
2025-11-10T00:04:28.6627310Z +        helpers::sigma1_small(w15),
2025-11-10T00:04:28.6628204Z +        w10,
2025-11-10T00:04:28.6628937Z +        helpers::sigma0_small(w2),
2025-11-10T00:04:28.6629821Z +    );
2025-11-10T00:04:28.6630640Z      round!(h, a, b, c, d, e, f, g, add(k(K_ARRAY.0[33]), w1));
2025-11-10T00:04:28.6632113Z -    helpers::inc4(&mut w2, helpers::sigma1_small(w0), w11, helpers::sigma0_small(w3));
2025-11-10T00:04:28.6633477Z +    helpers::inc4(
2025-11-10T00:04:28.6634203Z +        &mut w2,
2025-11-10T00:04:28.6635158Z +        helpers::sigma1_small(w0),
2025-11-10T00:04:28.6637917Z +        w11,
2025-11-10T00:04:28.6638669Z +        helpers::sigma0_small(w3),
2025-11-10T00:04:28.6639546Z +    );
2025-11-10T00:04:28.6640373Z      round!(g, h, a, b, c, d, e, f, add(k(K_ARRAY.0[34]), w2));
2025-11-10T00:04:28.6641882Z -    helpers::inc4(&mut w3, helpers::sigma1_small(w1), w12, helpers::sigma0_small(w4));
2025-11-10T00:04:28.6643246Z +    helpers::inc4(
2025-11-10T00:04:28.6644489Z +        &mut w3,
2025-11-10T00:04:28.6645286Z +        helpers::sigma1_small(w1),
2025-11-10T00:04:28.6646183Z +        w12,
2025-11-10T00:04:28.6646921Z +        helpers::sigma0_small(w4),
2025-11-10T00:04:28.6649597Z +    );
2025-11-10T00:04:28.6650414Z      round!(f, g, h, a, b, c, d, e, add(k(K_ARRAY.0[35]), w3));
2025-11-10T00:04:28.6651895Z -    helpers::inc4(&mut w4, helpers::sigma1_small(w2), w13, helpers::sigma0_small(w5));
2025-11-10T00:04:28.6653243Z +    helpers::inc4(
2025-11-10T00:04:28.6653968Z +        &mut w4,
2025-11-10T00:04:28.6654866Z +        helpers::sigma1_small(w2),
2025-11-10T00:04:28.6655748Z +        w13,
2025-11-10T00:04:28.6658345Z +        helpers::sigma0_small(w5),
2025-11-10T00:04:28.6659217Z +    );
2025-11-10T00:04:28.6660041Z      round!(e, f, g, h, a, b, c, d, add(k(K_ARRAY.0[36]), w4));
2025-11-10T00:04:28.6661726Z -    helpers::inc4(&mut w5, helpers::sigma1_small(w3), w14, helpers::sigma0_small(w6));
2025-11-10T00:04:28.6663094Z +    helpers::inc4(
2025-11-10T00:04:28.6664154Z +        &mut w5,
2025-11-10T00:04:28.6665106Z +        helpers::sigma1_small(w3),
2025-11-10T00:04:28.6667858Z +        w14,
2025-11-10T00:04:28.6668609Z +        helpers::sigma0_small(w6),
2025-11-10T00:04:28.6669492Z +    );
2025-11-10T00:04:28.6670311Z      round!(d, e, f, g, h, a, b, c, add(k(K_ARRAY.0[37]), w5));
2025-11-10T00:04:28.6671808Z -    helpers::inc4(&mut w6, helpers::sigma1_small(w4), w15, helpers::sigma0_small(w7));
2025-11-10T00:04:28.6673171Z +    helpers::inc4(
2025-11-10T00:04:28.6673917Z +        &mut w6,
2025-11-10T00:04:28.6674809Z +        helpers::sigma1_small(w4),
2025-11-10T00:04:28.6675708Z +        w15,
2025-11-10T00:04:28.6678176Z +        helpers::sigma0_small(w7),
2025-11-10T00:04:28.6679325Z +    );
2025-11-10T00:04:28.6680158Z      round!(c, d, e, f, g, h, a, b, add(k(K_ARRAY.0[38]), w6));
2025-11-10T00:04:28.6681977Z -    helpers::inc4(&mut w7, helpers::sigma1_small(w5), w0, helpers::sigma0_small(w8));
2025-11-10T00:04:28.6683355Z +    helpers::inc4(
2025-11-10T00:04:28.6684101Z +        &mut w7,
2025-11-10T00:04:28.6685000Z +        helpers::sigma1_small(w5),
2025-11-10T00:04:28.6685883Z +        w0,
2025-11-10T00:04:28.6686634Z +        helpers::sigma0_small(w8),
2025-11-10T00:04:28.6687513Z +    );
2025-11-10T00:04:28.6688341Z      round!(b, c, d, e, f, g, h, a, add(k(K_ARRAY.0[39]), w7));
2025-11-10T00:04:28.6689825Z -    helpers::inc4(&mut w8, helpers::sigma1_small(w6), w1, helpers::sigma0_small(w9));
2025-11-10T00:04:28.6691181Z +    helpers::inc4(
2025-11-10T00:04:28.6691909Z +        &mut w8,
2025-11-10T00:04:28.6692833Z +        helpers::sigma1_small(w6),
2025-11-10T00:04:28.6693883Z +        w1,
2025-11-10T00:04:28.6695152Z +        helpers::sigma0_small(w9),
2025-11-10T00:04:28.6708609Z +    );
2025-11-10T00:04:28.6709591Z      round!(a, b, c, d, e, f, g, h, add(k(K_ARRAY.0[40]), w8));
2025-11-10T00:04:28.6711173Z -    helpers::inc4(&mut w9, helpers::sigma1_small(w7), w2, helpers::sigma0_small(w10));
2025-11-10T00:04:28.6712573Z +    helpers::inc4(
2025-11-10T00:04:28.6713314Z +        &mut w9,
2025-11-10T00:04:28.6714092Z +        helpers::sigma1_small(w7),
2025-11-10T00:04:28.6715152Z +        w2,
2025-11-10T00:04:28.6715899Z +        helpers::sigma0_small(w10),
2025-11-10T00:04:28.6716789Z +    );
2025-11-10T00:04:28.6719221Z      round!(h, a, b, c, d, e, f, g, add(k(K_ARRAY.0[41]), w9));
2025-11-10T00:04:28.6720752Z -    helpers::inc4(&mut w10, helpers::sigma1_small(w8), w3, helpers::sigma0_small(w11));
2025-11-10T00:04:28.6722142Z +    helpers::inc4(
2025-11-10T00:04:28.6722878Z +        &mut w10,
2025-11-10T00:04:28.6723663Z +        helpers::sigma1_small(w8),
2025-11-10T00:04:28.6724913Z +        w3,
2025-11-10T00:04:28.6725691Z +        helpers::sigma0_small(w11),
2025-11-10T00:04:28.6726594Z +    );
2025-11-10T00:04:28.6727426Z      round!(g, h, a, b, c, d, e, f, add(k(K_ARRAY.0[42]), w10));
2025-11-10T00:04:28.6730787Z -    helpers::inc4(&mut w11, helpers::sigma1_small(w9), w4, helpers::sigma0_small(w12));
2025-11-10T00:04:28.6732310Z +    helpers::inc4(
2025-11-10T00:04:28.6733061Z +        &mut w11,
2025-11-10T00:04:28.6733834Z +        helpers::sigma1_small(w9),
2025-11-10T00:04:28.6734870Z +        w4,
2025-11-10T00:04:28.6735620Z +        helpers::sigma0_small(w12),
2025-11-10T00:04:28.6736512Z +    );
2025-11-10T00:04:28.6737343Z      round!(f, g, h, a, b, c, d, e, add(k(K_ARRAY.0[43]), w11));
2025-11-10T00:04:28.6738866Z -    helpers::inc4(&mut w12, helpers::sigma1_small(w10), w5, helpers::sigma0_small(w13));
2025-11-10T00:04:28.6740258Z +    helpers::inc4(
2025-11-10T00:04:28.6740991Z +        &mut w12,
2025-11-10T00:04:28.6741766Z +        helpers::sigma1_small(w10),
2025-11-10T00:04:28.6743029Z +        w5,
2025-11-10T00:04:28.6743790Z +        helpers::sigma0_small(w13),
2025-11-10T00:04:28.6744994Z +    );
2025-11-10T00:04:28.6746096Z      round!(e, f, g, h, a, b, c, d, add(k(K_ARRAY.0[44]), w12));
2025-11-10T00:04:28.6747618Z -    helpers::inc4(&mut w13, helpers::sigma1_small(w11), w6, helpers::sigma0_small(w14));
2025-11-10T00:04:28.6750028Z +    helpers::inc4(
2025-11-10T00:04:28.6750765Z +        &mut w13,
2025-11-10T00:04:28.6751534Z +        helpers::sigma1_small(w11),
2025-11-10T00:04:28.6752586Z +        w6,
2025-11-10T00:04:28.6753332Z +        helpers::sigma0_small(w14),
2025-11-10T00:04:28.6754226Z +    );
2025-11-10T00:04:28.6755243Z      round!(d, e, f, g, h, a, b, c, add(k(K_ARRAY.0[45]), w13));
2025-11-10T00:04:28.6758026Z -    helpers::inc4(&mut w14, helpers::sigma1_small(w12), w7, helpers::sigma0_small(w15));
2025-11-10T00:04:28.6759405Z +    helpers::inc4(
2025-11-10T00:04:28.6760139Z +        &mut w14,
2025-11-10T00:04:28.6760908Z +        helpers::sigma1_small(w12),
2025-11-10T00:04:28.6761816Z +        w7,
2025-11-10T00:04:28.6762578Z +        helpers::sigma0_small(w15),
2025-11-10T00:04:28.6763463Z +    );
2025-11-10T00:04:28.6764435Z      round!(c, d, e, f, g, h, a, b, add(k(K_ARRAY.0[46]), w14));
2025-11-10T00:04:28.6765953Z -    helpers::inc4(&mut w15, helpers::sigma1_small(w13), w8, helpers::sigma0_small(w0));
2025-11-10T00:04:28.6767340Z +    helpers::inc4(
2025-11-10T00:04:28.6768064Z +        &mut w15,
2025-11-10T00:04:28.6768843Z +        helpers::sigma1_small(w13),
2025-11-10T00:04:28.6769921Z +        w8,
2025-11-10T00:04:28.6770954Z +        helpers::sigma0_small(w0),
2025-11-10T00:04:28.6771835Z +    );
2025-11-10T00:04:28.6772672Z      round!(b, c, d, e, f, g, h, a, add(k(K_ARRAY.0[47]), w15));
2025-11-10T00:04:28.6774166Z -    helpers::inc4(&mut w0, helpers::sigma1_small(w14), w9, helpers::sigma0_small(w1));
2025-11-10T00:04:28.6775920Z +    helpers::inc4(
2025-11-10T00:04:28.6776660Z +        &mut w0,
2025-11-10T00:04:28.6777435Z +        helpers::sigma1_small(w14),
2025-11-10T00:04:28.6778346Z +        w9,
2025-11-10T00:04:28.6779091Z +        helpers::sigma0_small(w1),
2025-11-10T00:04:28.6779994Z +    );
2025-11-10T00:04:28.6781066Z      round!(a, b, c, d, e, f, g, h, add(k(K_ARRAY.0[48]), w0));
2025-11-10T00:04:28.6782577Z -    helpers::inc4(&mut w1, helpers::sigma1_small(w15), w10, helpers::sigma0_small(w2));
2025-11-10T00:04:28.6783978Z +    helpers::inc4(
2025-11-10T00:04:28.6784875Z +        &mut w1,
2025-11-10T00:04:28.6785648Z +        helpers::sigma1_small(w15),
2025-11-10T00:04:28.6786534Z +        w10,
2025-11-10T00:04:28.6787277Z +        helpers::sigma0_small(w2),
2025-11-10T00:04:28.6788153Z +    );
2025-11-10T00:04:28.6788973Z      round!(h, a, b, c, d, e, f, g, add(k(K_ARRAY.0[49]), w1));
2025-11-10T00:04:28.6790463Z -    helpers::inc4(&mut w2, helpers::sigma1_small(w0), w11, helpers::sigma0_small(w3));
2025-11-10T00:04:28.6791818Z +    helpers::inc4(
2025-11-10T00:04:28.6792546Z +        &mut w2,
2025-11-10T00:04:28.6793316Z +        helpers::sigma1_small(w0),
2025-11-10T00:04:28.6794205Z +        w11,
2025-11-10T00:04:28.6795210Z +        helpers::sigma0_small(w3),
2025-11-10T00:04:28.6796112Z +    );
2025-11-10T00:04:28.6796919Z      round!(g, h, a, b, c, d, e, f, add(k(K_ARRAY.0[50]), w2));
2025-11-10T00:04:28.6798405Z -    helpers::inc4(&mut w3, helpers::sigma1_small(w1), w12, helpers::sigma0_small(w4));
2025-11-10T00:04:28.6799768Z +    helpers::inc4(
2025-11-10T00:04:28.6800495Z +        &mut w3,
2025-11-10T00:04:28.6801259Z +        helpers::sigma1_small(w1),
2025-11-10T00:04:28.6802144Z +        w12,
2025-11-10T00:04:28.6802884Z +        helpers::sigma0_small(w4),
2025-11-10T00:04:28.6803758Z +    );
2025-11-10T00:04:28.6804761Z      round!(f, g, h, a, b, c, d, e, add(k(K_ARRAY.0[51]), w3));
2025-11-10T00:04:28.6806254Z -    helpers::inc4(&mut w4, helpers::sigma1_small(w2), w13, helpers::sigma0_small(w5));
2025-11-10T00:04:28.6807621Z +    helpers::inc4(
2025-11-10T00:04:28.6808342Z +        &mut w4,
2025-11-10T00:04:28.6809110Z +        helpers::sigma1_small(w2),
2025-11-10T00:04:28.6809987Z +        w13,
2025-11-10T00:04:28.6810734Z +        helpers::sigma0_small(w5),
2025-11-10T00:04:28.6811883Z +    );
2025-11-10T00:04:28.6812726Z      round!(e, f, g, h, a, b, c, d, add(k(K_ARRAY.0[52]), w4));
2025-11-10T00:04:28.6814229Z -    helpers::inc4(&mut w5, helpers::sigma1_small(w3), w14, helpers::sigma0_small(w6));
2025-11-10T00:04:28.6816085Z +    helpers::inc4(
2025-11-10T00:04:28.6816828Z +        &mut w5,
2025-11-10T00:04:28.6817599Z +        helpers::sigma1_small(w3),
2025-11-10T00:04:28.6818494Z +        w14,
2025-11-10T00:04:28.6819243Z +        helpers::sigma0_small(w6),
2025-11-10T00:04:28.6820134Z +    );
2025-11-10T00:04:28.6820956Z      round!(d, e, f, g, h, a, b, c, add(k(K_ARRAY.0[53]), w5));
2025-11-10T00:04:28.6822487Z -    helpers::inc4(&mut w6, helpers::sigma1_small(w4), w15, helpers::sigma0_small(w7));
2025-11-10T00:04:28.6823841Z +    helpers::inc4(
2025-11-10T00:04:28.6824733Z +        &mut w6,
2025-11-10T00:04:28.6825505Z +        helpers::sigma1_small(w4),
2025-11-10T00:04:28.6826399Z +        w15,
2025-11-10T00:04:28.6827152Z +        helpers::sigma0_small(w7),
2025-11-10T00:04:28.6828045Z +    );
2025-11-10T00:04:28.6828882Z      round!(c, d, e, f, g, h, a, b, add(k(K_ARRAY.0[54]), w6));
2025-11-10T00:04:28.6830379Z -    helpers::inc4(&mut w7, helpers::sigma1_small(w5), w0, helpers::sigma0_small(w8));
2025-11-10T00:04:28.6831747Z +    helpers::inc4(
2025-11-10T00:04:28.6832475Z +        &mut w7,
2025-11-10T00:04:28.6833245Z +        helpers::sigma1_small(w5),
2025-11-10T00:04:28.6834131Z +        w0,
2025-11-10T00:04:28.6835015Z +        helpers::sigma0_small(w8),
2025-11-10T00:04:28.6835899Z +    );
2025-11-10T00:04:28.6836716Z      round!(b, c, d, e, f, g, h, a, add(k(K_ARRAY.0[55]), w7));
2025-11-10T00:04:28.6838206Z -    helpers::inc4(&mut w8, helpers::sigma1_small(w6), w1, helpers::sigma0_small(w9));
2025-11-10T00:04:28.6839551Z +    helpers::inc4(
2025-11-10T00:04:28.6840285Z +        &mut w8,
2025-11-10T00:04:28.6841044Z +        helpers::sigma1_small(w6),
2025-11-10T00:04:28.6841924Z +        w1,
2025-11-10T00:04:28.6842662Z +        helpers::sigma0_small(w9),
2025-11-10T00:04:28.6843545Z +    );
2025-11-10T00:04:28.6844498Z      round!(a, b, c, d, e, f, g, h, add(k(K_ARRAY.0[56]), w8));
2025-11-10T00:04:28.6846800Z -    helpers::inc4(&mut w9, helpers::sigma1_small(w7), w2, helpers::sigma0_small(w10));
2025-11-10T00:04:28.6848207Z +    helpers::inc4(
2025-11-10T00:04:28.6848938Z +        &mut w9,
2025-11-10T00:04:28.6849708Z +        helpers::sigma1_small(w7),
2025-11-10T00:04:28.6850586Z +        w2,
2025-11-10T00:04:28.6851329Z +        helpers::sigma0_small(w10),
2025-11-10T00:04:28.6852217Z +    );
2025-11-10T00:04:28.6853043Z      round!(h, a, b, c, d, e, f, g, add(k(K_ARRAY.0[57]), w9));
2025-11-10T00:04:28.6854905Z -    helpers::inc4(&mut w10, helpers::sigma1_small(w8), w3, helpers::sigma0_small(w11));
2025-11-10T00:04:28.6856338Z +    helpers::inc4(
2025-11-10T00:04:28.6857071Z +        &mut w10,
2025-11-10T00:04:28.6857853Z +        helpers::sigma1_small(w8),
2025-11-10T00:04:28.6858747Z +        w3,
2025-11-10T00:04:28.6859487Z +        helpers::sigma0_small(w11),
2025-11-10T00:04:28.6860396Z +    );
2025-11-10T00:04:28.6861212Z      round!(g, h, a, b, c, d, e, f, add(k(K_ARRAY.0[58]), w10));
2025-11-10T00:04:28.6863229Z -    helpers::inc4(&mut w11, helpers::sigma1_small(w9), w4, helpers::sigma0_small(w12));
2025-11-10T00:04:28.6865120Z +    helpers::inc4(
2025-11-10T00:04:28.6865874Z +        &mut w11,
2025-11-10T00:04:28.6866647Z +        helpers::sigma1_small(w9),
2025-11-10T00:04:28.6867857Z +        w4,
2025-11-10T00:04:28.6868619Z +        helpers::sigma0_small(w12),
2025-11-10T00:04:28.6869512Z +    );
2025-11-10T00:04:28.6870938Z      round!(f, g, h, a, b, c, d, e, add(k(K_ARRAY.0[59]), w11));
2025-11-10T00:04:28.6872475Z -    helpers::inc4(&mut w12, helpers::sigma1_small(w10), w5, helpers::sigma0_small(w13));
2025-11-10T00:04:28.6873873Z +    helpers::inc4(
2025-11-10T00:04:28.6874768Z +        &mut w12,
2025-11-10T00:04:28.6875546Z +        helpers::sigma1_small(w10),
2025-11-10T00:04:28.6876436Z +        w5,
2025-11-10T00:04:28.6877184Z +        helpers::sigma0_small(w13),
2025-11-10T00:04:28.6878288Z +    );
2025-11-10T00:04:28.6879119Z      round!(e, f, g, h, a, b, c, d, add(k(K_ARRAY.0[60]), w12));
2025-11-10T00:04:28.6880636Z -    helpers::inc4(&mut w13, helpers::sigma1_small(w11), w6, helpers::sigma0_small(w14));
2025-11-10T00:04:28.6882411Z +    helpers::inc4(
2025-11-10T00:04:28.6883133Z +        &mut w13,
2025-11-10T00:04:28.6883906Z +        helpers::sigma1_small(w11),
2025-11-10T00:04:28.6884938Z +        w6,
2025-11-10T00:04:28.6885674Z +        helpers::sigma0_small(w14),
2025-11-10T00:04:28.6886566Z +    );
2025-11-10T00:04:28.6887384Z      round!(d, e, f, g, h, a, b, c, add(k(K_ARRAY.0[61]), w13));
2025-11-10T00:04:28.6888894Z -    helpers::inc4(&mut w14, helpers::sigma1_small(w12), w7, helpers::sigma0_small(w15));
2025-11-10T00:04:28.6890268Z +    helpers::inc4(
2025-11-10T00:04:28.6890999Z +        &mut w14,
2025-11-10T00:04:28.6891767Z +        helpers::sigma1_small(w12),
2025-11-10T00:04:28.6893081Z +        w7,
2025-11-10T00:04:28.6893864Z +        helpers::sigma0_small(w15),
2025-11-10T00:04:28.6895792Z +    );
2025-11-10T00:04:28.6896671Z      round!(c, d, e, f, g, h, a, b, add(k(K_ARRAY.0[62]), w14));
2025-11-10T00:04:28.6898214Z -    helpers::inc4(&mut w15, helpers::sigma1_small(w13), w8, helpers::sigma0_small(w0));
2025-11-10T00:04:28.6899585Z +    helpers::inc4(
2025-11-10T00:04:28.6900314Z +        &mut w15,
2025-11-10T00:04:28.6901081Z +        helpers::sigma1_small(w13),
2025-11-10T00:04:28.6901960Z +        w8,
2025-11-10T00:04:28.6902695Z +        helpers::sigma0_small(w0),
2025-11-10T00:04:28.6903565Z +    );
2025-11-10T00:04:28.6904531Z      round!(b, c, d, e, f, g, h, a, add(k(K_ARRAY.0[63]), w15));
2025-11-10T00:04:28.6905649Z      #[cfg(debug_assertions)]
2025-11-10T00:04:28.6906477Z      {
2025-11-10T00:04:28.6907987Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:578:
2025-11-10T00:04:28.6910215Z          // First SHA256 of 64 zero bytes should produce: 0x42fda5f5 (little-endian of first word)
2025-11-10T00:04:28.6911805Z          // So a should be: 0x42fda5f5 - 0x6a09e667 = 0xd8f3bf8e
2025-11-10T00:04:28.6913308Z          println!("DEBUG Expected a after round 63: 0xd8f3bf8e (0x42fda5f5 - 0x6a09e667)");
2025-11-10T00:04:28.6915257Z -        println!("DEBUG Difference: 0x{:08x}", a_after_round63.wrapping_sub(0xd8f3bf8e));
2025-11-10T00:04:28.6916616Z +        println!(
2025-11-10T00:04:28.6917398Z +            "DEBUG Difference: 0x{:08x}",
2025-11-10T00:04:28.6918435Z +            a_after_round63.wrapping_sub(0xd8f3bf8e)
2025-11-10T00:04:28.6920060Z +        );
2025-11-10T00:04:28.6920732Z      }
2025-11-10T00:04:28.6921377Z  
2025-11-10T00:04:28.6922157Z      // Add initial hash values (Transform 1 complete)
2025-11-10T00:04:28.6924023Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:586:
2025-11-10T00:04:28.6925890Z      {
2025-11-10T00:04:28.6926689Z          let a_before = _mm256_extract_epi32(a, 0) as u32;
2025-11-10T00:04:28.6927871Z          let h_before = _mm256_extract_epi32(h, 0) as u32;
2025-11-10T00:04:28.6929541Z -        println!("DEBUG Transform 1 before adding initial hash: a=0x{:08x}, h=0x{:08x}", a_before, h_before);
2025-11-10T00:04:28.6931107Z +        println!(
2025-11-10T00:04:28.6932186Z +            "DEBUG Transform 1 before adding initial hash: a=0x{:08x}, h=0x{:08x}",
2025-11-10T00:04:28.6933478Z +            a_before, h_before
2025-11-10T00:04:28.6934536Z +        );
2025-11-10T00:04:28.6935579Z          println!("Expected SHA256(64 zeros) first word: 0xf5a5fd42");
2025-11-10T00:04:28.6936733Z      }
2025-11-10T00:04:28.6937442Z      a = add(a, k(INITIAL_HASH.0[0]));
2025-11-10T00:04:28.6939207Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:601:
2025-11-10T00:04:28.6940931Z      {
2025-11-10T00:04:28.6941721Z          let a_after = _mm256_extract_epi32(a, 0) as u32;
2025-11-10T00:04:28.6942879Z          let h_after = _mm256_extract_epi32(h, 0) as u32;
2025-11-10T00:04:28.6945511Z -        println!("DEBUG Transform 1 after adding initial hash: a=0x{:08x}, h=0x{:08x}", a_after, h_after);
2025-11-10T00:04:28.6947239Z +        println!(
2025-11-10T00:04:28.6948310Z +            "DEBUG Transform 1 after adding initial hash: a=0x{:08x}, h=0x{:08x}",
2025-11-10T00:04:28.6949593Z +            a_after, h_after
2025-11-10T00:04:28.6950412Z +        );
2025-11-10T00:04:28.6951672Z          println!("Expected: a=0xf5a5fd42 (from SHA256(64 zeros))");
2025-11-10T00:04:28.6952808Z      }
2025-11-10T00:04:28.6953450Z  
2025-11-10T00:04:28.6955077Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:610:
2025-11-10T00:04:28.6956806Z      {
2025-11-10T00:04:28.6957633Z          let a_before_t2 = _mm256_extract_epi32(a, 0) as u32;
2025-11-10T00:04:28.6958831Z          let b_before_t2 = _mm256_extract_epi32(b, 0) as u32;
2025-11-10T00:04:28.6960445Z -        println!("DEBUG Transform 2 starting state: a=0x{:08x}, b=0x{:08x}", a_before_t2, b_before_t2);
2025-11-10T00:04:28.6962050Z +        println!(
2025-11-10T00:04:28.6963063Z +            "DEBUG Transform 2 starting state: a=0x{:08x}, b=0x{:08x}",
2025-11-10T00:04:28.6964258Z +            a_before_t2, b_before_t2
2025-11-10T00:04:28.6965262Z +        );
2025-11-10T00:04:28.6966154Z      }
2025-11-10T00:04:28.6967221Z      let t0 = a;
2025-11-10T00:04:28.6970261Z      let t1 = b;
2025-11-10T00:04:28.6971845Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:711:
2025-11-10T00:04:28.6973599Z      {
2025-11-10T00:04:28.6974915Z          let w0_combined = _mm256_extract_epi32(w0, 0) as u32;
2025-11-10T00:04:28.6976197Z          let w1_combined = _mm256_extract_epi32(w1, 0) as u32;
2025-11-10T00:04:28.6977904Z -        println!("DEBUG After combining Transform 1 and 2: w0=0x{:08x}, w1=0x{:08x}", w0_combined, w1_combined);
2025-11-10T00:04:28.6979457Z +        println!(
2025-11-10T00:04:28.6980506Z +            "DEBUG After combining Transform 1 and 2: w0=0x{:08x}, w1=0x{:08x}",
2025-11-10T00:04:28.6982023Z +            w0_combined, w1_combined
2025-11-10T00:04:28.6982928Z +        );
2025-11-10T00:04:28.6983596Z      }
2025-11-10T00:04:28.6984232Z  
2025-11-10T00:04:28.6985319Z      // Transform 3: Final SHA256 on the combined state
2025-11-10T00:04:28.6987194Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:730:
2025-11-10T00:04:28.6988923Z      {
2025-11-10T00:04:28.6989695Z          let w0_t3 = _mm256_extract_epi32(w0, 0) as u32;
2025-11-10T00:04:28.6991094Z          let w1_t3 = _mm256_extract_epi32(w1, 0) as u32;
2025-11-10T00:04:28.6992496Z -        println!("DEBUG Transform 3 input w0=0x{:08x}, w1=0x{:08x}", w0_t3, w1_t3);
2025-11-10T00:04:28.6993908Z +        println!(
2025-11-10T00:04:28.6995617Z +            "DEBUG Transform 3 input w0=0x{:08x}, w1=0x{:08x}",
2025-11-10T00:04:28.6996854Z +            w0_t3, w1_t3
2025-11-10T00:04:28.6997648Z +        );
2025-11-10T00:04:28.6998322Z      }
2025-11-10T00:04:28.6999146Z      round!(a, b, c, d, e, f, g, h, add(k(K_ARRAY.0[0]), w0));
2025-11-10T00:04:28.7000240Z      #[cfg(debug_assertions)]
2025-11-10T00:04:28.7002301Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:737:
2025-11-10T00:04:28.7004027Z      {
2025-11-10T00:04:28.7005025Z          let a_after_t3_round0 = _mm256_extract_epi32(a, 0) as u32;
2025-11-10T00:04:28.7006318Z          let h_after_t3_round0 = _mm256_extract_epi32(h, 0) as u32;
2025-11-10T00:04:28.7008237Z -        println!("DEBUG Transform 3 after round 0: a=0x{:08x} (old), h=0x{:08x} (new a for next round)", a_after_t3_round0, h_after_t3_round0);
2025-11-10T00:04:28.7009978Z +        println!(
2025-11-10T00:04:28.7011144Z +            "DEBUG Transform 3 after round 0: a=0x{:08x} (old), h=0x{:08x} (new a for next round)",
2025-11-10T00:04:28.7012582Z +            a_after_t3_round0, h_after_t3_round0
2025-11-10T00:04:28.7013751Z +        );
2025-11-10T00:04:28.7014038Z      }
2025-11-10T00:04:28.7014692Z      round!(h, a, b, c, d, e, f, g, add(k(K_ARRAY.0[1]), w1));
2025-11-10T00:04:28.7015167Z      round!(g, h, a, b, c, d, e, f, add(k(K_ARRAY.0[2]), w2));
2025-11-10T00:04:28.7018138Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:750:
2025-11-10T00:04:28.7018431Z      {
2025-11-10T00:04:28.7019556Z          // After round 7, the new a (for next round) is in h
2025-11-10T00:04:28.7020063Z          let h_after_t3_round7 = _mm256_extract_epi32(h, 0) as u32;
2025-11-10T00:04:28.7020832Z -        println!("DEBUG Transform 3 after round 7: h (new a)=0x{:08x}", h_after_t3_round7);
2025-11-10T00:04:28.7021137Z +        println!(
2025-11-10T00:04:28.7021624Z +            "DEBUG Transform 3 after round 7: h (new a)=0x{:08x}",
2025-11-10T00:04:28.7021962Z +            h_after_t3_round7
2025-11-10T00:04:28.7022265Z +        );
2025-11-10T00:04:28.7022547Z      }
2025-11-10T00:04:28.7022952Z      round!(a, b, c, d, e, f, g, h, k(0x5807aa98));
2025-11-10T00:04:28.7023351Z      round!(h, a, b, c, d, e, f, g, k(0x12835b01));
2025-11-10T00:04:28.7025011Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:778:
2025-11-10T00:04:28.7025503Z          let f_after_15 = _mm256_extract_epi32(f, 0) as u32;
2025-11-10T00:04:28.7025962Z          let g_after_15 = _mm256_extract_epi32(g, 0) as u32;
2025-11-10T00:04:28.7026452Z          let h_after_15 = _mm256_extract_epi32(h, 0) as u32;
2025-11-10T00:04:28.7027563Z -        println!("DEBUG Transform 3 after round 15: a=0x{:08x}, b=0x{:08x}, c=0x{:08x}, d=0x{:08x}", a_after_15, b_after_15, c_after_15, d_after_15);
2025-11-10T00:04:28.7028330Z -        println!("  e=0x{:08x}, f=0x{:08x}, g=0x{:08x}, h=0x{:08x}", e_after_15, f_after_15, g_after_15, h_after_15);
2025-11-10T00:04:28.7028640Z +        println!(
2025-11-10T00:04:28.7029359Z +            "DEBUG Transform 3 after round 15: a=0x{:08x}, b=0x{:08x}, c=0x{:08x}, d=0x{:08x}",
2025-11-10T00:04:28.7029791Z +            a_after_15, b_after_15, c_after_15, d_after_15
2025-11-10T00:04:28.7030079Z +        );
2025-11-10T00:04:28.7030379Z +        println!(
2025-11-10T00:04:28.7030786Z +            "  e=0x{:08x}, f=0x{:08x}, g=0x{:08x}, h=0x{:08x}",
2025-11-10T00:04:28.7031198Z +            e_after_15, f_after_15, g_after_15, h_after_15
2025-11-10T00:04:28.7031489Z +        );
2025-11-10T00:04:28.7032186Z          println!("  Expected: a=0xf5539ad2, b=0x2c0362a7, c=0xda1fbbd3, d=0x3c3a4027");
2025-11-10T00:04:28.7032484Z      }
2025-11-10T00:04:28.7032767Z  
2025-11-10T00:04:28.7033904Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:795:
2025-11-10T00:04:28.7034502Z          let f_before_16 = _mm256_extract_epi32(f, 0) as u32;
2025-11-10T00:04:28.7034975Z          let g_before_16 = _mm256_extract_epi32(g, 0) as u32;
2025-11-10T00:04:28.7035435Z          let h_before_16 = _mm256_extract_epi32(h, 0) as u32;
2025-11-10T00:04:28.7036608Z -        println!("DEBUG Transform 3 before round 16: a=0x{:08x}, b=0x{:08x}, c=0x{:08x}, d=0x{:08x}", a_before_16, b_before_16, c_before_16, d_before_16);
2025-11-10T00:04:28.7037412Z -        println!("  e=0x{:08x}, f=0x{:08x}, g=0x{:08x}, h=0x{:08x}", e_before_16, f_before_16, g_before_16, h_before_16);
2025-11-10T00:04:28.7038608Z -        println!("  Expected after round 15: a=0xf5539ad2, b=0x2c0362a7, c=0xda1fbbd3, d=0x3c3a4027");
2025-11-10T00:04:28.7038924Z +        println!(
2025-11-10T00:04:28.7039656Z +            "DEBUG Transform 3 before round 16: a=0x{:08x}, b=0x{:08x}, c=0x{:08x}, d=0x{:08x}",
2025-11-10T00:04:28.7040096Z +            a_before_16, b_before_16, c_before_16, d_before_16
2025-11-10T00:04:28.7040392Z +        );
2025-11-10T00:04:28.7040983Z +        println!(
2025-11-10T00:04:28.7041399Z +            "  e=0x{:08x}, f=0x{:08x}, g=0x{:08x}, h=0x{:08x}",
2025-11-10T00:04:28.7041845Z +            e_before_16, f_before_16, g_before_16, h_before_16
2025-11-10T00:04:28.7042345Z +        );
2025-11-10T00:04:28.7042655Z +        println!(
2025-11-10T00:04:28.7043387Z +            "  Expected after round 15: a=0xf5539ad2, b=0x2c0362a7, c=0xda1fbbd3, d=0x3c3a4027"
2025-11-10T00:04:28.7043801Z +        );
2025-11-10T00:04:28.7045146Z          let w0_before_t3_round16 = _mm256_extract_epi32(w0, 0) as u32;
2025-11-10T00:04:28.7045708Z          let w1_before_t3_round16 = _mm256_extract_epi32(w1, 0) as u32;
2025-11-10T00:04:28.7046742Z -        println!("DEBUG Transform 3 round 16 before inc: w0=0x{:08x}, w1=0x{:08x}", w0_before_t3_round16, w1_before_t3_round16);
2025-11-10T00:04:28.7047055Z +        println!(
2025-11-10T00:04:28.7047660Z +            "DEBUG Transform 3 round 16 before inc: w0=0x{:08x}, w1=0x{:08x}",
2025-11-10T00:04:28.7048066Z +            w0_before_t3_round16, w1_before_t3_round16
2025-11-10T00:04:28.7048360Z +        );
2025-11-10T00:04:28.7048650Z      }
2025-11-10T00:04:28.7049260Z      // Save old values before round 16 - these will be needed in round 17
2025-11-10T00:04:28.7049977Z      // Round 16 modifies d and h, so we save c and d (which become $d and $e in round 17)
2025-11-10T00:04:28.7051132Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:818:
2025-11-10T00:04:28.7051432Z      {
2025-11-10T00:04:28.7052071Z          let w0_before = _mm256_extract_epi32(w0, 0) as u32;
2025-11-10T00:04:28.7052601Z          let w1_before = _mm256_extract_epi32(w1, 0) as u32;
2025-11-10T00:04:28.7053290Z -        println!("DEBUG T3 R16 before: w0=0x{:08x} w1=0x{:08x}", w0_before, w1_before);
2025-11-10T00:04:28.7053597Z +        println!(
2025-11-10T00:04:28.7054017Z +            "DEBUG T3 R16 before: w0=0x{:08x} w1=0x{:08x}",
2025-11-10T00:04:28.7054516Z +            w0_before, w1_before
2025-11-10T00:04:28.7054808Z +        );
2025-11-10T00:04:28.7055090Z      }
2025-11-10T00:04:28.7055582Z      helpers::inc(&mut w0, helpers::sigma0_small(w1));
2025-11-10T00:04:28.7055920Z      #[cfg(debug_assertions)]
2025-11-10T00:04:28.7057071Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:839:
2025-11-10T00:04:28.7057498Z          let g_after = _mm256_extract_epi32(g, 0) as u32;
2025-11-10T00:04:28.7057974Z          println!("DEBUG T3 R17 after: g=0x{:08x}", g_after);
2025-11-10T00:04:28.7058262Z      }
2025-11-10T00:04:28.7058950Z -    helpers::inc3(&mut w2, helpers::sigma1_small(w0), helpers::sigma0_small(w3));
2025-11-10T00:04:28.7059269Z +    helpers::inc3(
2025-11-10T00:04:28.7059562Z +        &mut w2,
2025-11-10T00:04:28.7059913Z +        helpers::sigma1_small(w0),
2025-11-10T00:04:28.7060260Z +        helpers::sigma0_small(w3),
2025-11-10T00:04:28.7060548Z +    );
2025-11-10T00:04:28.7061013Z      round!(g, h, a, b, c, d, e, f, add(k(K_ARRAY.0[18]), w2));
2025-11-10T00:04:28.7061693Z -    helpers::inc3(&mut w3, helpers::sigma1_small(w1), helpers::sigma0_small(w4));
2025-11-10T00:04:28.7062014Z +    helpers::inc3(
2025-11-10T00:04:28.7062309Z +        &mut w3,
2025-11-10T00:04:28.7062672Z +        helpers::sigma1_small(w1),
2025-11-10T00:04:28.7063026Z +        helpers::sigma0_small(w4),
2025-11-10T00:04:28.7063309Z +    );
2025-11-10T00:04:28.7063779Z      round!(f, g, h, a, b, c, d, e, add(k(K_ARRAY.0[19]), w3));
2025-11-10T00:04:28.7064636Z -    helpers::inc3(&mut w4, helpers::sigma1_small(w2), helpers::sigma0_small(w5));
2025-11-10T00:04:28.7064967Z +    helpers::inc3(
2025-11-10T00:04:28.7065260Z +        &mut w4,
2025-11-10T00:04:28.7065611Z +        helpers::sigma1_small(w2),
2025-11-10T00:04:28.7065965Z +        helpers::sigma0_small(w5),
2025-11-10T00:04:28.7066244Z +    );
2025-11-10T00:04:28.7066707Z      round!(e, f, g, h, a, b, c, d, add(k(K_ARRAY.0[20]), w4));
2025-11-10T00:04:28.7067392Z -    helpers::inc3(&mut w5, helpers::sigma1_small(w3), helpers::sigma0_small(w6));
2025-11-10T00:04:28.7067716Z +    helpers::inc3(
2025-11-10T00:04:28.7069944Z +        &mut w5,
2025-11-10T00:04:28.7070304Z +        helpers::sigma1_small(w3),
2025-11-10T00:04:28.7070840Z +        helpers::sigma0_small(w6),
2025-11-10T00:04:28.7071126Z +    );
2025-11-10T00:04:28.7071591Z      round!(d, e, f, g, h, a, b, c, add(k(K_ARRAY.0[21]), w5));
2025-11-10T00:04:28.7072836Z -    helpers::inc4(&mut w6, helpers::sigma1_small(w4), k(0x100), helpers::sigma0_small(w7));
2025-11-10T00:04:28.7073171Z +    helpers::inc4(
2025-11-10T00:04:28.7073464Z +        &mut w6,
2025-11-10T00:04:28.7073815Z +        helpers::sigma1_small(w4),
2025-11-10T00:04:28.7074112Z +        k(0x100),
2025-11-10T00:04:28.7074602Z +        helpers::sigma0_small(w7),
2025-11-10T00:04:28.7074886Z +    );
2025-11-10T00:04:28.7075346Z      round!(c, d, e, f, g, h, a, b, add(k(K_ARRAY.0[22]), w6));
2025-11-10T00:04:28.7077712Z      helpers::inc4(&mut w7, helpers::sigma1_small(w5), w0, k(0x11002000));
2025-11-10T00:04:28.7078170Z      round!(b, c, d, e, f, g, h, a, add(k(K_ARRAY.0[23]), w7));
2025-11-10T00:04:28.7079317Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:865:
2025-11-10T00:04:28.7079805Z      round!(d, e, f, g, h, a, b, c, add(k(K_ARRAY.0[29]), w13));
2025-11-10T00:04:28.7080378Z      w14 = helpers::add3(helpers::sigma1_small(w12), w7, k(0x400022));
2025-11-10T00:04:28.7081074Z      round!(c, d, e, f, g, h, a, b, add(k(K_ARRAY.0[30]), w14));
2025-11-10T00:04:28.7081865Z -    w15 = helpers::add4(k(0x100), helpers::sigma1_small(w13), w8, helpers::sigma0_small(w0));
2025-11-10T00:04:28.7082588Z +    w15 = helpers::add4(
2025-11-10T00:04:28.7082894Z +        k(0x100),
2025-11-10T00:04:28.7083257Z +        helpers::sigma1_small(w13),
2025-11-10T00:04:28.7083547Z +        w8,
2025-11-10T00:04:28.7083898Z +        helpers::sigma0_small(w0),
2025-11-10T00:04:28.7084183Z +    );
2025-11-10T00:04:28.7084817Z      round!(b, c, d, e, f, g, h, a, add(k(K_ARRAY.0[31]), w15));
2025-11-10T00:04:28.7085102Z -    
2025-11-10T00:04:28.7085382Z +
2025-11-10T00:04:28.7088170Z      // Continue with standard message schedule for rounds 32-63 (matching Core Transform 3 pattern)
2025-11-10T00:04:28.7088538Z      #[cfg(debug_assertions)]
2025-11-10T00:04:28.7088820Z      {
2025-11-10T00:04:28.7089956Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:874:
2025-11-10T00:04:28.7090437Z          let a_before_32 = _mm256_extract_epi32(a, 0) as u32;
2025-11-10T00:04:28.7090967Z          println!("DEBUG T3 R32 before: a=0x{:08x}", a_before_32);
2025-11-10T00:04:28.7091251Z      }
2025-11-10T00:04:28.7091970Z -    helpers::inc4(&mut w0, helpers::sigma1_small(w14), w9, helpers::sigma0_small(w1));
2025-11-10T00:04:28.7092292Z +    helpers::inc4(
2025-11-10T00:04:28.7092591Z +        &mut w0,
2025-11-10T00:04:28.7092944Z +        helpers::sigma1_small(w14),
2025-11-10T00:04:28.7093232Z +        w9,
2025-11-10T00:04:28.7093586Z +        helpers::sigma0_small(w1),
2025-11-10T00:04:28.7093873Z +    );
2025-11-10T00:04:28.7095109Z      round!(a, b, c, d, e, f, g, h, add(k(K_ARRAY.0[32]), w0));
2025-11-10T00:04:28.7095468Z      #[cfg(debug_assertions)]
2025-11-10T00:04:28.7095771Z      {
2025-11-10T00:04:28.7096926Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:881:
2025-11-10T00:04:28.7097391Z          let a_after_32 = _mm256_extract_epi32(a, 0) as u32;
2025-11-10T00:04:28.7097894Z          println!("DEBUG T3 R32 after: a=0x{:08x}", a_after_32);
2025-11-10T00:04:28.7098181Z      }
2025-11-10T00:04:28.7098921Z -    helpers::inc4(&mut w1, helpers::sigma1_small(w15), w10, helpers::sigma0_small(w2));
2025-11-10T00:04:28.7099241Z +    helpers::inc4(
2025-11-10T00:04:28.7099542Z +        &mut w1,
2025-11-10T00:04:28.7099895Z +        helpers::sigma1_small(w15),
2025-11-10T00:04:28.7100186Z +        w10,
2025-11-10T00:04:28.7100543Z +        helpers::sigma0_small(w2),
2025-11-10T00:04:28.7100835Z +    );
2025-11-10T00:04:28.7101303Z      round!(h, a, b, c, d, e, f, g, add(k(K_ARRAY.0[33]), w1));
2025-11-10T00:04:28.7102240Z -    helpers::inc4(&mut w2, helpers::sigma1_small(w0), w11, helpers::sigma0_small(w3));
2025-11-10T00:04:28.7103044Z +    helpers::inc4(
2025-11-10T00:04:28.7103531Z +        &mut w2,
2025-11-10T00:04:28.7104669Z +        helpers::sigma1_small(w0),
2025-11-10T00:04:28.7105476Z +        w11,
2025-11-10T00:04:28.7106086Z +        helpers::sigma0_small(w3),
2025-11-10T00:04:28.7106556Z +    );
2025-11-10T00:04:28.7107357Z      round!(g, h, a, b, c, d, e, f, add(k(K_ARRAY.0[34]), w2));
2025-11-10T00:04:28.7108642Z -    helpers::inc4(&mut w3, helpers::sigma1_small(w1), w12, helpers::sigma0_small(w4));
2025-11-10T00:04:28.7109168Z +    helpers::inc4(
2025-11-10T00:04:28.7109655Z +        &mut w3,
2025-11-10T00:04:28.7110250Z +        helpers::sigma1_small(w1),
2025-11-10T00:04:28.7110731Z +        w12,
2025-11-10T00:04:28.7111311Z +        helpers::sigma0_small(w4),
2025-11-10T00:04:28.7111790Z +    );
2025-11-10T00:04:28.7112575Z      round!(f, g, h, a, b, c, d, e, add(k(K_ARRAY.0[35]), w3));
2025-11-10T00:04:28.7113854Z -    helpers::inc4(&mut w4, helpers::sigma1_small(w2), w13, helpers::sigma0_small(w5));
2025-11-10T00:04:28.7114542Z +    helpers::inc4(
2025-11-10T00:04:28.7115036Z +        &mut w4,
2025-11-10T00:04:28.7115621Z +        helpers::sigma1_small(w2),
2025-11-10T00:04:28.7116113Z +        w13,
2025-11-10T00:04:28.7116701Z +        helpers::sigma0_small(w5),
2025-11-10T00:04:28.7117173Z +    );
2025-11-10T00:04:28.7117956Z      round!(e, f, g, h, a, b, c, d, add(k(K_ARRAY.0[36]), w4));
2025-11-10T00:04:28.7120110Z -    helpers::inc4(&mut w5, helpers::sigma1_small(w3), w14, helpers::sigma0_small(w6));
2025-11-10T00:04:28.7120656Z +    helpers::inc4(
2025-11-10T00:04:28.7121144Z +        &mut w5,
2025-11-10T00:04:28.7121724Z +        helpers::sigma1_small(w3),
2025-11-10T00:04:28.7122216Z +        w14,
2025-11-10T00:04:28.7122801Z +        helpers::sigma0_small(w6),
2025-11-10T00:04:28.7123273Z +    );
2025-11-10T00:04:28.7124057Z      round!(d, e, f, g, h, a, b, c, add(k(K_ARRAY.0[37]), w5));
2025-11-10T00:04:28.7125491Z -    helpers::inc4(&mut w6, helpers::sigma1_small(w4), w15, helpers::sigma0_small(w7));
2025-11-10T00:04:28.7126036Z +    helpers::inc4(
2025-11-10T00:04:28.7126520Z +        &mut w6,
2025-11-10T00:04:28.7127110Z +        helpers::sigma1_small(w4),
2025-11-10T00:04:28.7127602Z +        w15,
2025-11-10T00:04:28.7128190Z +        helpers::sigma0_small(w7),
2025-11-10T00:04:28.7128662Z +    );
2025-11-10T00:04:28.7129458Z      round!(c, d, e, f, g, h, a, b, add(k(K_ARRAY.0[38]), w6));
2025-11-10T00:04:28.7130729Z -    helpers::inc4(&mut w7, helpers::sigma1_small(w5), w0, helpers::sigma0_small(w8));
2025-11-10T00:04:28.7131256Z +    helpers::inc4(
2025-11-10T00:04:28.7131743Z +        &mut w7,
2025-11-10T00:04:28.7132332Z +        helpers::sigma1_small(w5),
2025-11-10T00:04:28.7132816Z +        w0,
2025-11-10T00:04:28.7133400Z +        helpers::sigma0_small(w8),
2025-11-10T00:04:28.7135915Z +    );
2025-11-10T00:04:28.7136701Z      round!(b, c, d, e, f, g, h, a, add(k(K_ARRAY.0[39]), w7));
2025-11-10T00:04:28.7137977Z -    helpers::inc4(&mut w8, helpers::sigma1_small(w6), w1, helpers::sigma0_small(w9));
2025-11-10T00:04:28.7138524Z +    helpers::inc4(
2025-11-10T00:04:28.7139008Z +        &mut w8,
2025-11-10T00:04:28.7139594Z +        helpers::sigma1_small(w6),
2025-11-10T00:04:28.7140096Z +        w1,
2025-11-10T00:04:28.7140676Z +        helpers::sigma0_small(w9),
2025-11-10T00:04:28.7141145Z +    );
2025-11-10T00:04:28.7141927Z      round!(a, b, c, d, e, f, g, h, add(k(K_ARRAY.0[40]), w8));
2025-11-10T00:04:28.7142523Z      #[cfg(debug_assertions)]
2025-11-10T00:04:28.7142996Z      {
2025-11-10T00:04:28.7146059Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:902:
2025-11-10T00:04:28.7146849Z          let a_after_40 = _mm256_extract_epi32(a, 0) as u32;
2025-11-10T00:04:28.7147603Z          let h_after_40 = _mm256_extract_epi32(h, 0) as u32;
2025-11-10T00:04:28.7148761Z -        println!("DEBUG T3 R40 after: a=0x{:08x}, h=0x{:08x}", a_after_40, h_after_40);
2025-11-10T00:04:28.7150856Z +        println!(
2025-11-10T00:04:28.7151771Z +            "DEBUG T3 R40 after: a=0x{:08x}, h=0x{:08x}",
2025-11-10T00:04:28.7152323Z +            a_after_40, h_after_40
2025-11-10T00:04:28.7152801Z +        );
2025-11-10T00:04:28.7153518Z      }
2025-11-10T00:04:28.7154958Z -    helpers::inc4(&mut w9, helpers::sigma1_small(w7), w2, helpers::sigma0_small(w10));
2025-11-10T00:04:28.7155491Z +    helpers::inc4(
2025-11-10T00:04:28.7155983Z +        &mut w9,
2025-11-10T00:04:28.7156572Z +        helpers::sigma1_small(w7),
2025-11-10T00:04:28.7157054Z +        w2,
2025-11-10T00:04:28.7157657Z +        helpers::sigma0_small(w10),
2025-11-10T00:04:28.7158131Z +    );
2025-11-10T00:04:28.7158915Z      round!(h, a, b, c, d, e, f, g, add(k(K_ARRAY.0[41]), w9));
2025-11-10T00:04:28.7160227Z -    helpers::inc4(&mut w10, helpers::sigma1_small(w8), w3, helpers::sigma0_small(w11));
2025-11-10T00:04:28.7160761Z +    helpers::inc4(
2025-11-10T00:04:28.7161253Z +        &mut w10,
2025-11-10T00:04:28.7161836Z +        helpers::sigma1_small(w8),
2025-11-10T00:04:28.7162347Z +        w3,
2025-11-10T00:04:28.7162938Z +        helpers::sigma0_small(w11),
2025-11-10T00:04:28.7163411Z +    );
2025-11-10T00:04:28.7164201Z      round!(g, h, a, b, c, d, e, f, add(k(K_ARRAY.0[42]), w10));
2025-11-10T00:04:28.7165678Z -    helpers::inc4(&mut w11, helpers::sigma1_small(w9), w4, helpers::sigma0_small(w12));
2025-11-10T00:04:28.7166210Z +    helpers::inc4(
2025-11-10T00:04:28.7169171Z +        &mut w11,
2025-11-10T00:04:28.7169778Z +        helpers::sigma1_small(w9),
2025-11-10T00:04:28.7170261Z +        w4,
2025-11-10T00:04:28.7170851Z +        helpers::sigma0_small(w12),
2025-11-10T00:04:28.7171326Z +    );
2025-11-10T00:04:28.7172131Z      round!(f, g, h, a, b, c, d, e, add(k(K_ARRAY.0[43]), w11));
2025-11-10T00:04:28.7173455Z -    helpers::inc4(&mut w12, helpers::sigma1_small(w10), w5, helpers::sigma0_small(w13));
2025-11-10T00:04:28.7173980Z +    helpers::inc4(
2025-11-10T00:04:28.7174679Z +        &mut w12,
2025-11-10T00:04:28.7175279Z +        helpers::sigma1_small(w10),
2025-11-10T00:04:28.7175780Z +        w5,
2025-11-10T00:04:28.7177927Z +        helpers::sigma0_small(w13),
2025-11-10T00:04:28.7178569Z +    );
2025-11-10T00:04:28.7179426Z      round!(e, f, g, h, a, b, c, d, add(k(K_ARRAY.0[44]), w12));
2025-11-10T00:04:28.7181026Z -    helpers::inc4(&mut w13, helpers::sigma1_small(w11), w6, helpers::sigma0_small(w14));
2025-11-10T00:04:28.7181855Z +    helpers::inc4(
2025-11-10T00:04:28.7199490Z +        &mut w13,
2025-11-10T00:04:28.7200215Z +        helpers::sigma1_small(w11),
2025-11-10T00:04:28.7200701Z +        w6,
2025-11-10T00:04:28.7201299Z +        helpers::sigma0_small(w14),
2025-11-10T00:04:28.7201780Z +    );
2025-11-10T00:04:28.7202584Z      round!(d, e, f, g, h, a, b, c, add(k(K_ARRAY.0[45]), w13));
2025-11-10T00:04:28.7203912Z -    helpers::inc4(&mut w14, helpers::sigma1_small(w12), w7, helpers::sigma0_small(w15));
2025-11-10T00:04:28.7204597Z +    helpers::inc4(
2025-11-10T00:04:28.7205099Z +        &mut w14,
2025-11-10T00:04:28.7205689Z +        helpers::sigma1_small(w12),
2025-11-10T00:04:28.7206194Z +        w7,
2025-11-10T00:04:28.7206791Z +        helpers::sigma0_small(w15),
2025-11-10T00:04:28.7207262Z +    );
2025-11-10T00:04:28.7208071Z      round!(c, d, e, f, g, h, a, b, add(k(K_ARRAY.0[46]), w14));
2025-11-10T00:04:28.7209371Z -    helpers::inc4(&mut w15, helpers::sigma1_small(w13), w8, helpers::sigma0_small(w0));
2025-11-10T00:04:28.7209903Z +    helpers::inc4(
2025-11-10T00:04:28.7210389Z +        &mut w15,
2025-11-10T00:04:28.7210973Z +        helpers::sigma1_small(w13),
2025-11-10T00:04:28.7211457Z +        w8,
2025-11-10T00:04:28.7212034Z +        helpers::sigma0_small(w0),
2025-11-10T00:04:28.7212501Z +    );
2025-11-10T00:04:28.7213291Z      round!(b, c, d, e, f, g, h, a, add(k(K_ARRAY.0[47]), w15));
2025-11-10T00:04:28.7214710Z -    helpers::inc4(&mut w0, helpers::sigma1_small(w14), w9, helpers::sigma0_small(w1));
2025-11-10T00:04:28.7215240Z +    helpers::inc4(
2025-11-10T00:04:28.7215727Z +        &mut w0,
2025-11-10T00:04:28.7217199Z +        helpers::sigma1_small(w14),
2025-11-10T00:04:28.7217691Z +        w9,
2025-11-10T00:04:28.7218271Z +        helpers::sigma0_small(w1),
2025-11-10T00:04:28.7218741Z +    );
2025-11-10T00:04:28.7219783Z      round!(a, b, c, d, e, f, g, h, add(k(K_ARRAY.0[48]), w0));
2025-11-10T00:04:28.7220344Z      #[cfg(debug_assertions)]
2025-11-10T00:04:28.7220810Z      {
2025-11-10T00:04:28.7222864Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:924:
2025-11-10T00:04:28.7223627Z          let a_after_48 = _mm256_extract_epi32(a, 0) as u32;
2025-11-10T00:04:28.7224621Z          println!("DEBUG T3 R48 after: a=0x{:08x}", a_after_48);
2025-11-10T00:04:28.7225109Z      }
2025-11-10T00:04:28.7226405Z -    helpers::inc4(&mut w1, helpers::sigma1_small(w15), w10, helpers::sigma0_small(w2));
2025-11-10T00:04:28.7226927Z +    helpers::inc4(
2025-11-10T00:04:28.7227407Z +        &mut w1,
2025-11-10T00:04:28.7227998Z +        helpers::sigma1_small(w15),
2025-11-10T00:04:28.7228498Z +        w10,
2025-11-10T00:04:28.7229074Z +        helpers::sigma0_small(w2),
2025-11-10T00:04:28.7229552Z +    );
2025-11-10T00:04:28.7230327Z      round!(h, a, b, c, d, e, f, g, add(k(K_ARRAY.0[49]), w1));
2025-11-10T00:04:28.7231614Z -    helpers::inc4(&mut w2, helpers::sigma1_small(w0), w11, helpers::sigma0_small(w3));
2025-11-10T00:04:28.7232140Z +    helpers::inc4(
2025-11-10T00:04:28.7232625Z +        &mut w2,
2025-11-10T00:04:28.7233202Z +        helpers::sigma1_small(w0),
2025-11-10T00:04:28.7233667Z +        w11,
2025-11-10T00:04:28.7234253Z +        helpers::sigma0_small(w3),
2025-11-10T00:04:28.7234836Z +    );
2025-11-10T00:04:28.7235632Z      round!(g, h, a, b, c, d, e, f, add(k(K_ARRAY.0[50]), w2));
2025-11-10T00:04:28.7236914Z -    helpers::inc4(&mut w3, helpers::sigma1_small(w1), w12, helpers::sigma0_small(w4));
2025-11-10T00:04:28.7237440Z +    helpers::inc4(
2025-11-10T00:04:28.7237916Z +        &mut w3,
2025-11-10T00:04:28.7238493Z +        helpers::sigma1_small(w1),
2025-11-10T00:04:28.7238998Z +        w12,
2025-11-10T00:04:28.7239570Z +        helpers::sigma0_small(w4),
2025-11-10T00:04:28.7240036Z +    );
2025-11-10T00:04:28.7241258Z      round!(f, g, h, a, b, c, d, e, add(k(K_ARRAY.0[51]), w3));
2025-11-10T00:04:28.7242561Z -    helpers::inc4(&mut w4, helpers::sigma1_small(w2), w13, helpers::sigma0_small(w5));
2025-11-10T00:04:28.7243080Z +    helpers::inc4(
2025-11-10T00:04:28.7243558Z +        &mut w4,
2025-11-10T00:04:28.7244146Z +        helpers::sigma1_small(w2),
2025-11-10T00:04:28.7244804Z +        w13,
2025-11-10T00:04:28.7245386Z +        helpers::sigma0_small(w5),
2025-11-10T00:04:28.7245851Z +    );
2025-11-10T00:04:28.7246637Z      round!(e, f, g, h, a, b, c, d, add(k(K_ARRAY.0[52]), w4));
2025-11-10T00:04:28.7247902Z -    helpers::inc4(&mut w5, helpers::sigma1_small(w3), w14, helpers::sigma0_small(w6));
2025-11-10T00:04:28.7248419Z +    helpers::inc4(
2025-11-10T00:04:28.7248902Z +        &mut w5,
2025-11-10T00:04:28.7249480Z +        helpers::sigma1_small(w3),
2025-11-10T00:04:28.7249959Z +        w14,
2025-11-10T00:04:28.7250539Z +        helpers::sigma0_small(w6),
2025-11-10T00:04:28.7251020Z +    );
2025-11-10T00:04:28.7251799Z      round!(d, e, f, g, h, a, b, c, add(k(K_ARRAY.0[53]), w5));
2025-11-10T00:04:28.7253069Z -    helpers::inc4(&mut w6, helpers::sigma1_small(w4), w15, helpers::sigma0_small(w7));
2025-11-10T00:04:28.7253595Z +    helpers::inc4(
2025-11-10T00:04:28.7254070Z +        &mut w6,
2025-11-10T00:04:28.7254801Z +        helpers::sigma1_small(w4),
2025-11-10T00:04:28.7255288Z +        w15,
2025-11-10T00:04:28.7255872Z +        helpers::sigma0_small(w7),
2025-11-10T00:04:28.7256342Z +    );
2025-11-10T00:04:28.7257116Z      round!(c, d, e, f, g, h, a, b, add(k(K_ARRAY.0[54]), w6));
2025-11-10T00:04:28.7258379Z -    helpers::inc4(&mut w7, helpers::sigma1_small(w5), w0, helpers::sigma0_small(w8));
2025-11-10T00:04:28.7258902Z +    helpers::inc4(
2025-11-10T00:04:28.7259384Z +        &mut w7,
2025-11-10T00:04:28.7259968Z +        helpers::sigma1_small(w5),
2025-11-10T00:04:28.7260679Z +        w0,
2025-11-10T00:04:28.7261261Z +        helpers::sigma0_small(w8),
2025-11-10T00:04:28.7261730Z +    );
2025-11-10T00:04:28.7262528Z      round!(b, c, d, e, f, g, h, a, add(k(K_ARRAY.0[55]), w7));
2025-11-10T00:04:28.7265344Z -    helpers::inc4(&mut w8, helpers::sigma1_small(w6), w1, helpers::sigma0_small(w9));
2025-11-10T00:04:28.7265902Z +    helpers::inc4(
2025-11-10T00:04:28.7266387Z +        &mut w8,
2025-11-10T00:04:28.7266964Z +        helpers::sigma1_small(w6),
2025-11-10T00:04:28.7267440Z +        w1,
2025-11-10T00:04:28.7268016Z +        helpers::sigma0_small(w9),
2025-11-10T00:04:28.7268491Z +    );
2025-11-10T00:04:28.7269266Z      round!(a, b, c, d, e, f, g, h, add(k(K_ARRAY.0[56]), w8));
2025-11-10T00:04:28.7269830Z      #[cfg(debug_assertions)]
2025-11-10T00:04:28.7270306Z      {
2025-11-10T00:04:28.7272386Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:945:
2025-11-10T00:04:28.7273160Z          let a_after_56 = _mm256_extract_epi32(a, 0) as u32;
2025-11-10T00:04:28.7273998Z          println!("DEBUG T3 R56 after: a=0x{:08x}", a_after_56);
2025-11-10T00:04:28.7274608Z      }
2025-11-10T00:04:28.7275896Z -    helpers::inc4(&mut w9, helpers::sigma1_small(w7), w2, helpers::sigma0_small(w10));
2025-11-10T00:04:28.7276419Z +    helpers::inc4(
2025-11-10T00:04:28.7276906Z +        &mut w9,
2025-11-10T00:04:28.7277484Z +        helpers::sigma1_small(w7),
2025-11-10T00:04:28.7277964Z +        w2,
2025-11-10T00:04:28.7278548Z +        helpers::sigma0_small(w10),
2025-11-10T00:04:28.7279027Z +    );
2025-11-10T00:04:28.7279802Z      round!(h, a, b, c, d, e, f, g, add(k(K_ARRAY.0[57]), w9));
2025-11-10T00:04:28.7281380Z -    helpers::inc4(&mut w10, helpers::sigma1_small(w8), w3, helpers::sigma0_small(w11));
2025-11-10T00:04:28.7281906Z +    helpers::inc4(
2025-11-10T00:04:28.7282391Z +        &mut w10,
2025-11-10T00:04:28.7282964Z +        helpers::sigma1_small(w8),
2025-11-10T00:04:28.7283448Z +        w3,
2025-11-10T00:04:28.7284041Z +        helpers::sigma0_small(w11),
2025-11-10T00:04:28.7284646Z +    );
2025-11-10T00:04:28.7285433Z      round!(g, h, a, b, c, d, e, f, add(k(K_ARRAY.0[58]), w10));
2025-11-10T00:04:28.7288131Z -    helpers::inc4(&mut w11, helpers::sigma1_small(w9), w4, helpers::sigma0_small(w12));
2025-11-10T00:04:28.7288649Z +    helpers::inc4(
2025-11-10T00:04:28.7289132Z +        &mut w11,
2025-11-10T00:04:28.7289715Z +        helpers::sigma1_small(w9),
2025-11-10T00:04:28.7290188Z +        w4,
2025-11-10T00:04:28.7290771Z +        helpers::sigma0_small(w12),
2025-11-10T00:04:28.7291237Z +    );
2025-11-10T00:04:28.7292027Z      round!(f, g, h, a, b, c, d, e, add(k(K_ARRAY.0[59]), w11));
2025-11-10T00:04:28.7293337Z -    helpers::inc4(&mut w12, helpers::sigma1_small(w10), w5, helpers::sigma0_small(w13));
2025-11-10T00:04:28.7293859Z +    helpers::inc4(
2025-11-10T00:04:28.7294483Z +        &mut w12,
2025-11-10T00:04:28.7295070Z +        helpers::sigma1_small(w10),
2025-11-10T00:04:28.7295562Z +        w5,
2025-11-10T00:04:28.7297823Z +        helpers::sigma0_small(w13),
2025-11-10T00:04:28.7298298Z +    );
2025-11-10T00:04:28.7299079Z      round!(e, f, g, h, a, b, c, d, add(k(K_ARRAY.0[60]), w12));
2025-11-10T00:04:28.7300399Z -    helpers::inc4(&mut w13, helpers::sigma1_small(w11), w6, helpers::sigma0_small(w14));
2025-11-10T00:04:28.7300925Z +    helpers::inc4(
2025-11-10T00:04:28.7301410Z +        &mut w13,
2025-11-10T00:04:28.7301988Z +        helpers::sigma1_small(w11),
2025-11-10T00:04:28.7302466Z +        w6,
2025-11-10T00:04:28.7303058Z +        helpers::sigma0_small(w14),
2025-11-10T00:04:28.7303526Z +    );
2025-11-10T00:04:28.7304448Z      round!(d, e, f, g, h, a, b, c, add(k(K_ARRAY.0[61]), w13));
2025-11-10T00:04:28.7306069Z      // Core Transform 3 rounds 62-63: Use Add with 5 args, w14/w15 NOT modified (different from Transform 1)
2025-11-10T00:04:28.7308143Z -    round!(c, d, e, f, g, h, a, b, helpers::add5(k(K_ARRAY.0[62]), w14, helpers::sigma1_small(w12), w7, helpers::sigma0_small(w15)));
2025-11-10T00:04:28.7310398Z -    round!(b, c, d, e, f, g, h, a, helpers::add5(k(K_ARRAY.0[63]), w15, helpers::sigma1_small(w13), w8, helpers::sigma0_small(w0)));
2025-11-10T00:04:28.7311063Z +    round!(
2025-11-10T00:04:28.7311587Z +        c,
2025-11-10T00:04:28.7312062Z +        d,
2025-11-10T00:04:28.7312537Z +        e,
2025-11-10T00:04:28.7313016Z +        f,
2025-11-10T00:04:28.7314025Z +        g,
2025-11-10T00:04:28.7314687Z +        h,
2025-11-10T00:04:28.7315172Z +        a,
2025-11-10T00:04:28.7315642Z +        b,
2025-11-10T00:04:28.7316176Z +        helpers::add5(
2025-11-10T00:04:28.7316710Z +            k(K_ARRAY.0[62]),
2025-11-10T00:04:28.7317239Z +            w14,
2025-11-10T00:04:28.7317840Z +            helpers::sigma1_small(w12),
2025-11-10T00:04:28.7318293Z +            w7,
2025-11-10T00:04:28.7318859Z +            helpers::sigma0_small(w15)
2025-11-10T00:04:28.7319345Z +        )
2025-11-10T00:04:28.7319809Z +    );
2025-11-10T00:04:28.7320282Z +    round!(
2025-11-10T00:04:28.7320787Z +        b,
2025-11-10T00:04:28.7321237Z +        c,
2025-11-10T00:04:28.7321721Z +        d,
2025-11-10T00:04:28.7322193Z +        e,
2025-11-10T00:04:28.7322676Z +        f,
2025-11-10T00:04:28.7323169Z +        g,
2025-11-10T00:04:28.7323639Z +        h,
2025-11-10T00:04:28.7324120Z +        a,
2025-11-10T00:04:28.7324799Z +        helpers::add5(
2025-11-10T00:04:28.7325357Z +            k(K_ARRAY.0[63]),
2025-11-10T00:04:28.7327744Z +            w15,
2025-11-10T00:04:28.7328353Z +            helpers::sigma1_small(w13),
2025-11-10T00:04:28.7328831Z +            w8,
2025-11-10T00:04:28.7329422Z +            helpers::sigma0_small(w0)
2025-11-10T00:04:28.7329902Z +        )
2025-11-10T00:04:28.7330370Z +    );
2025-11-10T00:04:28.7330835Z  
2025-11-10T00:04:28.7331495Z      // Add initial hash values and write output
2025-11-10T00:04:28.7332292Z      // Core: Add initial hash values before writing output
2025-11-10T00:04:28.7334501Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:976:
2025-11-10T00:04:28.7335348Z          let f_before_final = _mm256_extract_epi32(f, 0) as u32;
2025-11-10T00:04:28.7337855Z          let g_before_final = _mm256_extract_epi32(g, 0) as u32;
2025-11-10T00:04:28.7338682Z          let h_before_final = _mm256_extract_epi32(h, 0) as u32;
2025-11-10T00:04:28.7340967Z -        println!("DEBUG Transform 3 after round 63: a=0x{:08x}, b=0x{:08x}, c=0x{:08x}, d=0x{:08x}", a_before_final, b_before_final, c_before_final, d_before_final);
2025-11-10T00:04:28.7342658Z -        println!("  e=0x{:08x}, f=0x{:08x}, g=0x{:08x}, h=0x{:08x}", e_before_final, f_before_final, g_before_final, h_before_final);
2025-11-10T00:04:28.7344579Z -        println!("DEBUG Transform 3 before adding initial hash: a=0x{:08x} (expected 0x78ec3678)", a_before_final);
2025-11-10T00:04:28.7345098Z +        println!(
2025-11-10T00:04:28.7346352Z +            "DEBUG Transform 3 after round 63: a=0x{:08x}, b=0x{:08x}, c=0x{:08x}, d=0x{:08x}",
2025-11-10T00:04:28.7347347Z +            a_before_final, b_before_final, c_before_final, d_before_final
2025-11-10T00:04:28.7347822Z +        );
2025-11-10T00:04:28.7348314Z +        println!(
2025-11-10T00:04:28.7349003Z +            "  e=0x{:08x}, f=0x{:08x}, g=0x{:08x}, h=0x{:08x}",
2025-11-10T00:04:28.7349981Z +            e_before_final, f_before_final, g_before_final, h_before_final
2025-11-10T00:04:28.7350459Z +        );
2025-11-10T00:04:28.7350961Z +        println!(
2025-11-10T00:04:28.7352290Z +            "DEBUG Transform 3 before adding initial hash: a=0x{:08x} (expected 0x78ec3678)",
2025-11-10T00:04:28.7352826Z +            a_before_final
2025-11-10T00:04:28.7353301Z +        );
2025-11-10T00:04:28.7353774Z      }
2025-11-10T00:04:28.7354530Z      // Write8(out, 0, Add(a, K(0x6a09e667ul)));
2025-11-10T00:04:28.7355195Z      let a_final = add(a, k(INITIAL_HASH.0[0]));
2025-11-10T00:04:28.7357314Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:985:
2025-11-10T00:04:28.7358086Z      #[cfg(debug_assertions)]
2025-11-10T00:04:28.7358559Z      {
2025-11-10T00:04:28.7359406Z          let a_final_val = _mm256_extract_epi32(a_final, 0) as u32;
2025-11-10T00:04:28.7361406Z -        println!("DEBUG Transform 3 final a (after adding initial): 0x{:08x}", a_final_val);
2025-11-10T00:04:28.7361914Z +        println!(
2025-11-10T00:04:28.7362882Z +            "DEBUG Transform 3 final a (after adding initial): 0x{:08x}",
2025-11-10T00:04:28.7363398Z +            a_final_val
2025-11-10T00:04:28.7363871Z +        );
2025-11-10T00:04:28.7364477Z      }
2025-11-10T00:04:28.7365026Z      write8(out, 0, a_final);
2025-11-10T00:04:28.7365707Z      write8(out, 4, add(b, k(INITIAL_HASH.0[1])));
2025-11-10T00:04:28.7367794Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:1015:
2025-11-10T00:04:28.7368852Z      // For inputs that aren't exactly 64 bytes, we need to handle padding
2025-11-10T00:04:28.7369743Z      // For now, use sha2 crate as fallback for non-64-byte inputs
2025-11-10T00:04:28.7370554Z      use bitcoin_hashes::{sha256d, Hash as BitcoinHash};
2025-11-10T00:04:28.7371030Z -    
2025-11-10T00:04:28.7371518Z +
2025-11-10T00:04:28.7372179Z      // Check if all inputs are exactly 64 bytes
2025-11-10T00:04:28.7373149Z      let all_64_bytes = inputs.iter().all(|input| input.len() == 64);
2025-11-10T00:04:28.7373621Z -    
2025-11-10T00:04:28.7374083Z +
2025-11-10T00:04:28.7374796Z      if !all_64_bytes {
2025-11-10T00:04:28.7375536Z          // Fallback to sha2 crate for non-64-byte inputs
2025-11-10T00:04:28.7376135Z          let mut results = [[0u8; 32]; 8];
2025-11-10T00:04:28.7378221Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:1028:
2025-11-10T00:04:28.7378696Z          }
2025-11-10T00:04:28.7379219Z          return results;
2025-11-10T00:04:28.7379685Z      }
2025-11-10T00:04:28.7380146Z -    
2025-11-10T00:04:28.7380605Z +
2025-11-10T00:04:28.7381582Z      // Pack 8 inputs into contiguous 512-byte buffer
2025-11-10T00:04:28.7382152Z      let mut input_buf = [0u8; 512];
2025-11-10T00:04:28.7382841Z      for (i, input) in inputs.iter().enumerate() {
2025-11-10T00:04:28.7385065Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:1035:
2025-11-10T00:04:28.7385870Z          input_buf[i * 64..(i + 1) * 64].copy_from_slice(input);
2025-11-10T00:04:28.7386334Z      }
2025-11-10T00:04:28.7386794Z -    
2025-11-10T00:04:28.7387264Z +
2025-11-10T00:04:28.7387836Z      // Transform (double SHA256)
2025-11-10T00:04:28.7388413Z      let mut output_buf = [0u8; 256];
2025-11-10T00:04:28.7389110Z      transform_8way(&mut output_buf, &input_buf);
2025-11-10T00:04:28.7391190Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:1041:
2025-11-10T00:04:28.7391662Z -    
2025-11-10T00:04:28.7392123Z +
2025-11-10T00:04:28.7392643Z      // Unpack results
2025-11-10T00:04:28.7393228Z      let mut results = [[0u8; 32]; 8];
2025-11-10T00:04:28.7393726Z      for i in 0..8 {
2025-11-10T00:04:28.7395949Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:1045:
2025-11-10T00:04:28.7396913Z          results[i].copy_from_slice(&output_buf[i * 32..(i + 1) * 32]);
2025-11-10T00:04:28.7397378Z      }
2025-11-10T00:04:28.7397838Z -    
2025-11-10T00:04:28.7398306Z +
2025-11-10T00:04:28.7398778Z      results
2025-11-10T00:04:28.7399242Z  }
2025-11-10T00:04:28.7399709Z  
2025-11-10T00:04:28.7402155Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:1085:
2025-11-10T00:04:28.7402706Z          input_buf[1] = 0x45;
2025-11-10T00:04:28.7403246Z          input_buf[2] = 0x23;
2025-11-10T00:04:28.7403789Z          input_buf[3] = 0x01;
2025-11-10T00:04:28.7404258Z -        
2025-11-10T00:04:28.7404849Z +
2025-11-10T00:04:28.7405338Z          unsafe {
2025-11-10T00:04:28.7405886Z              // Read from offset 0
2025-11-10T00:04:28.7406701Z              let v = read8(&input_buf, 0);
2025-11-10T00:04:28.7408790Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:1092:
2025-11-10T00:04:28.7409908Z -            
2025-11-10T00:04:28.7410380Z +
2025-11-10T00:04:28.7410958Z              // Extract the first word
2025-11-10T00:04:28.7411714Z              // After _mm256_set_epi32(words[7], ..., words[0]):
2025-11-10T00:04:28.7412328Z              // - Index 0 = words[0] (block 0)
2025-11-10T00:04:28.7414798Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:1096:
2025-11-10T00:04:28.7415419Z              // - Index 7 = words[7] (block 7)
2025-11-10T00:04:28.7417698Z              // So we extract from index 0 for block 0
2025-11-10T00:04:28.7418412Z              let word0 = _mm256_extract_epi32(v, 0) as u32;
2025-11-10T00:04:28.7418890Z -            
2025-11-10T00:04:28.7419358Z +
2025-11-10T00:04:28.7419995Z              println!("Read8 shuffle test:");
2025-11-10T00:04:28.7420877Z              println!("  Input: 0x01234567 (LE bytes: [67, 45, 23, 01])");
2025-11-10T00:04:28.7421593Z              println!("  Output word0: 0x{:08x}", word0);
2025-11-10T00:04:28.7423672Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:1103:
2025-11-10T00:04:28.7425403Z              println!("  Expected: 0x01234567 (if no swap) or 0x67452301 (if byte-reversed)");
2025-11-10T00:04:28.7428119Z              println!("  Or maybe: 0x23014567 or something else depending on shuffle");
2025-11-10T00:04:28.7428598Z -            
2025-11-10T00:04:28.7429061Z +
2025-11-10T00:04:28.7429711Z              // Also check what the shuffle mask does
2025-11-10T00:04:28.7430469Z              let test_word = _mm256_set1_epi32(0x01234567);
2025-11-10T00:04:28.7431093Z              let shuffle_mask = _mm256_set_epi32(
2025-11-10T00:04:28.7433177Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:1109:
2025-11-10T00:04:28.7433921Z -                0x0C0D0E0F, 0x08090A0B, 0x04050607, 0x00010203,
2025-11-10T00:04:28.7434788Z -                0x0C0D0E0F, 0x08090A0B, 0x04050607, 0x00010203,
2025-11-10T00:04:28.7436140Z +                0x0C0D0E0F, 0x08090A0B, 0x04050607, 0x00010203, 0x0C0D0E0F, 0x08090A0B, 0x04050607,
2025-11-10T00:04:28.7436656Z +                0x00010203,
2025-11-10T00:04:28.7437197Z              );
2025-11-10T00:04:28.7438148Z              let shuffled = _mm256_shuffle_epi8(test_word, shuffle_mask);
2025-11-10T00:04:28.7439105Z              let shuffled_word = _mm256_extract_epi32(shuffled, 0) as u32;
2025-11-10T00:04:28.7441198Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:1134:
2025-11-10T00:04:28.7441761Z              let mut f = k(0x9b05688c);
2025-11-10T00:04:28.7442319Z              let mut g = k(0x1f83d9ab);
2025-11-10T00:04:28.7442895Z              let mut h = k(0x5be0cd19);
2025-11-10T00:04:28.7443389Z -            
2025-11-10T00:04:28.7443830Z +
2025-11-10T00:04:28.7444728Z              let d_before = _mm256_extract_epi32(d, 0) as u32;
2025-11-10T00:04:28.7445508Z              let h_before = _mm256_extract_epi32(h, 0) as u32;
2025-11-10T00:04:28.7445993Z -            
2025-11-10T00:04:28.7446465Z +
2025-11-10T00:04:28.7447007Z              // Call round macro
2025-11-10T00:04:28.7447698Z              round!(a, b, c, d, e, f, g, h, k(0x428a2f98));
2025-11-10T00:04:28.7450052Z -            
2025-11-10T00:04:28.7450512Z +
2025-11-10T00:04:28.7451250Z              let d_after = _mm256_extract_epi32(d, 0) as u32;
2025-11-10T00:04:28.7451977Z              let h_after = _mm256_extract_epi32(h, 0) as u32;
2025-11-10T00:04:28.7452452Z -            
2025-11-10T00:04:28.7452919Z +
2025-11-10T00:04:28.7453712Z              println!("Round macro state modification test:");
2025-11-10T00:04:28.7455221Z -            println!("  d before: 0x{:08x}, after: 0x{:08x} (should be different)", d_before, d_after);
2025-11-10T00:04:28.7456747Z -            println!("  h before: 0x{:08x}, after: 0x{:08x} (should be different)", h_before, h_after);
2025-11-10T00:04:28.7457398Z -            
2025-11-10T00:04:28.7459554Z +            println!(
2025-11-10T00:04:28.7460433Z +                "  d before: 0x{:08x}, after: 0x{:08x} (should be different)",
2025-11-10T00:04:28.7460988Z +                d_before, d_after
2025-11-10T00:04:28.7461460Z +            );
2025-11-10T00:04:28.7461961Z +            println!(
2025-11-10T00:04:28.7462832Z +                "  h before: 0x{:08x}, after: 0x{:08x} (should be different)",
2025-11-10T00:04:28.7463386Z +                h_before, h_after
2025-11-10T00:04:28.7463860Z +            );
2025-11-10T00:04:28.7464578Z +
2025-11-10T00:04:28.7465160Z              if d_before == d_after {
2025-11-10T00:04:28.7465855Z                  println!("  ERROR: d was not modified!");
2025-11-10T00:04:28.7466328Z              }
2025-11-10T00:04:28.7468417Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:1168:
2025-11-10T00:04:28.7469071Z          // Test with 8 identical 64-byte inputs
2025-11-10T00:04:28.7469635Z          let test_data = [0u8; 64];
2025-11-10T00:04:28.7470185Z          let inputs: [&[u8]; 8] = [
2025-11-10T00:04:28.7470929Z -            &test_data, &test_data, &test_data, &test_data,
2025-11-10T00:04:28.7471662Z -            &test_data, &test_data, &test_data, &test_data,
2025-11-10T00:04:28.7473277Z +            &test_data, &test_data, &test_data, &test_data, &test_data, &test_data, &test_data,
2025-11-10T00:04:28.7473799Z +            &test_data,
2025-11-10T00:04:28.7474273Z          ];
2025-11-10T00:04:28.7474878Z  
2025-11-10T00:04:28.7475355Z          unsafe {
2025-11-10T00:04:28.7477583Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:1176:
2025-11-10T00:04:28.7478299Z              let avx2_results = sha256_8way_avx2(&inputs);
2025-11-10T00:04:28.7478790Z -            
2025-11-10T00:04:28.7479257Z +
2025-11-10T00:04:28.7480261Z              // Compute expected result using bitcoin_hashes (double SHA256)
2025-11-10T00:04:28.7481772Z              // bitcoin_hashes::sha256d is the standard Bitcoin double SHA256 implementation
2025-11-10T00:04:28.7482463Z              let mut engine = sha256d::Hash::engine();
2025-11-10T00:04:28.7484708Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:1181:
2025-11-10T00:04:28.7485315Z              engine.input(&test_data);
2025-11-10T00:04:28.7486107Z              let expected = sha256d::Hash::from_engine(engine);
2025-11-10T00:04:28.7488517Z              let expected_bytes = expected.into_inner();
2025-11-10T00:04:28.7488990Z -            
2025-11-10T00:04:28.7489456Z +
2025-11-10T00:04:28.7490065Z              // Debug: print first few bytes
2025-11-10T00:04:28.7490837Z              println!("Expected: {:?}", &expected_bytes[..8]);
2025-11-10T00:04:28.7491601Z              println!("Got:      {:?}", &avx2_results[0][..8]);
2025-11-10T00:04:28.7493690Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:1188:
2025-11-10T00:04:28.7494187Z -            
2025-11-10T00:04:28.7494780Z +
2025-11-10T00:04:28.7495533Z              // All 8 results should be identical (same input)
2025-11-10T00:04:28.7496335Z              for (i, result) in avx2_results.iter().enumerate() {
2025-11-10T00:04:28.7496951Z                  if result != &expected_bytes {
2025-11-10T00:04:28.7499416Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:1192:
2025-11-10T00:04:28.7500376Z -                    println!("Mismatch at index {}: expected {:?}, got {:?}", 
2025-11-10T00:04:28.7501065Z -                        i, &expected_bytes[..16], &result[..16]);
2025-11-10T00:04:28.7501595Z +                    println!(
2025-11-10T00:04:28.7502384Z +                        "Mismatch at index {}: expected {:?}, got {:?}",
2025-11-10T00:04:28.7503116Z +                        i,
2025-11-10T00:04:28.7503721Z +                        &expected_bytes[..16],
2025-11-10T00:04:28.7504587Z +                        &result[..16]
2025-11-10T00:04:28.7505089Z +                    );
2025-11-10T00:04:28.7505566Z                  }
2025-11-10T00:04:28.7506085Z                  assert_eq!(
2025-11-10T00:04:28.7506683Z                      result, &expected_bytes,
2025-11-10T00:04:28.7508754Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:1215:
2025-11-10T00:04:28.7509332Z              input_data[i][0] = i as u8;
2025-11-10T00:04:28.7509803Z          }
2025-11-10T00:04:28.7510358Z          let inputs: [&[u8]; 8] = [
2025-11-10T00:04:28.7511387Z -            &input_data[0], &input_data[1], &input_data[2], &input_data[3],
2025-11-10T00:04:28.7512345Z -            &input_data[4], &input_data[5], &input_data[6], &input_data[7],
2025-11-10T00:04:28.7512904Z +            &input_data[0],
2025-11-10T00:04:28.7513435Z +            &input_data[1],
2025-11-10T00:04:28.7513960Z +            &input_data[2],
2025-11-10T00:04:28.7514639Z +            &input_data[3],
2025-11-10T00:04:28.7515188Z +            &input_data[4],
2025-11-10T00:04:28.7515844Z +            &input_data[5],
2025-11-10T00:04:28.7516374Z +            &input_data[6],
2025-11-10T00:04:28.7516908Z +            &input_data[7],
2025-11-10T00:04:28.7517377Z          ];
2025-11-10T00:04:28.7517836Z  
2025-11-10T00:04:28.7518315Z          unsafe {
2025-11-10T00:04:28.7521178Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:1223:
2025-11-10T00:04:28.7521903Z              let avx2_results = sha256_8way_avx2(&inputs);
2025-11-10T00:04:28.7522378Z -            
2025-11-10T00:04:28.7522845Z +
2025-11-10T00:04:28.7523548Z              // Compute expected results using sha2 crate
2025-11-10T00:04:28.7524435Z              for (i, input) in input_data.iter().enumerate() {
2025-11-10T00:04:28.7525171Z                  let mut engine = sha256d::Hash::engine();
2025-11-10T00:04:28.7527256Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha256_avx2.rs:1228:
2025-11-10T00:04:28.7527855Z                  engine.input(input);
2025-11-10T00:04:28.7528999Z                  let expected = sha256d::Hash::from_engine(engine);
2025-11-10T00:04:28.7529731Z                  let expected_bytes = expected.into_inner();
2025-11-10T00:04:28.7530210Z -                
2025-11-10T00:04:28.7530671Z +
2025-11-10T00:04:28.7531198Z                  assert_eq!(
2025-11-10T00:04:28.7532191Z                      &avx2_results[i], &expected_bytes,
2025-11-10T00:04:28.7533259Z                      "AVX2 result {} does not match expected double SHA256 for input {}",
2025-11-10T00:04:28.7535301Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:59:
2025-11-10T00:04:28.7535762Z  
2025-11-10T00:04:28.7537166Z      // SHA256 constants (first 32 bits of fractional parts of cube roots of first 64 primes)
2025-11-10T00:04:28.7537701Z      const K: [u32; 64] = [
2025-11-10T00:04:28.7539384Z -        0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,
2025-11-10T00:04:28.7540997Z -        0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,
2025-11-10T00:04:28.7542624Z -        0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,
2025-11-10T00:04:28.7544227Z -        0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,
2025-11-10T00:04:28.7545958Z -        0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,
2025-11-10T00:04:28.7547562Z -        0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,
2025-11-10T00:04:28.7549176Z -        0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,
2025-11-10T00:04:28.7551031Z -        0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2,
2025-11-10T00:04:28.7552544Z +        0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4,
2025-11-10T00:04:28.7553898Z +        0xab1c5ed5, 0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe,
2025-11-10T00:04:28.7555395Z +        0x9bdc06a7, 0xc19bf174, 0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f,
2025-11-10T00:04:28.7556753Z +        0x4a7484aa, 0x5cb0a9dc, 0x76f988da, 0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7,
2025-11-10T00:04:28.7558094Z +        0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967, 0x27b70a85, 0x2e1b2138, 0x4d2c6dfc,
2025-11-10T00:04:28.7559440Z +        0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85, 0xa2bfe8a1, 0xa81a664b,
2025-11-10T00:04:28.7561099Z +        0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070, 0x19a4c116,
2025-11-10T00:04:28.7562641Z +        0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,
2025-11-10T00:04:28.7564060Z +        0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7,
2025-11-10T00:04:28.7564692Z +        0xc67178f2,
2025-11-10T00:04:28.7565163Z      ];
2025-11-10T00:04:28.7565637Z  
2025-11-10T00:04:28.7566243Z      // Process input data with padding
2025-11-10T00:04:28.7568148Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:73:
2025-11-10T00:04:28.7569214Z      let mut padded = Vec::with_capacity(((data.len() + 9 + 63) / 64) * 64);
2025-11-10T00:04:28.7569818Z      padded.extend_from_slice(data);
2025-11-10T00:04:28.7570282Z -    
2025-11-10T00:04:28.7570749Z +
2025-11-10T00:04:28.7571579Z      // Add padding: 0x80 byte, then zeros, then 64-bit length
2025-11-10T00:04:28.7572119Z      padded.push(0x80);
2025-11-10T00:04:28.7572723Z      let bit_len = (data.len() as u64) * 8;
2025-11-10T00:04:28.7574800Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:102:
2025-11-10T00:04:28.7575380Z          let state1_save = state1;
2025-11-10T00:04:28.7575842Z  
2025-11-10T00:04:28.7576348Z          // Rounds 0-3
2025-11-10T00:04:28.7577641Z -        msg = _mm_add_epi32(msg0, _mm_set_epi32(K[3] as i32, K[2] as i32, K[1] as i32, K[0] as i32));
2025-11-10T00:04:28.7580040Z +        msg = _mm_add_epi32(
2025-11-10T00:04:28.7580517Z +            msg0,
2025-11-10T00:04:28.7581693Z +            _mm_set_epi32(K[3] as i32, K[2] as i32, K[1] as i32, K[0] as i32),
2025-11-10T00:04:28.7582165Z +        );
2025-11-10T00:04:28.7582951Z          state1 = _mm_sha256rnds2_epu32(state1, state0, msg);
2025-11-10T00:04:28.7583561Z          msg = _mm_shuffle_epi32(msg, 0x0E);
2025-11-10T00:04:28.7584462Z          state0 = _mm_sha256rnds2_epu32(state0, state1, msg);
2025-11-10T00:04:28.7586384Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:109:
2025-11-10T00:04:28.7586875Z  
2025-11-10T00:04:28.7587372Z          // Rounds 4-7
2025-11-10T00:04:28.7590505Z -        msg = _mm_add_epi32(msg1, _mm_set_epi32(K[7] as i32, K[6] as i32, K[5] as i32, K[4] as i32));
2025-11-10T00:04:28.7591053Z +        msg = _mm_add_epi32(
2025-11-10T00:04:28.7591542Z +            msg1,
2025-11-10T00:04:28.7592447Z +            _mm_set_epi32(K[7] as i32, K[6] as i32, K[5] as i32, K[4] as i32),
2025-11-10T00:04:28.7592921Z +        );
2025-11-10T00:04:28.7593707Z          state1 = _mm_sha256rnds2_epu32(state1, state0, msg);
2025-11-10T00:04:28.7594441Z          msg = _mm_shuffle_epi32(msg, 0x0E);
2025-11-10T00:04:28.7595226Z          state0 = _mm_sha256rnds2_epu32(state0, state1, msg);
2025-11-10T00:04:28.7597133Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:115:
2025-11-10T00:04:28.7597774Z          msg0 = _mm_sha256msg1_epu32(msg0, msg1);
2025-11-10T00:04:28.7598488Z  
2025-11-10T00:04:28.7598996Z          // Rounds 8-11
2025-11-10T00:04:28.7600368Z -        msg = _mm_add_epi32(msg2, _mm_set_epi32(K[11] as i32, K[10] as i32, K[9] as i32, K[8] as i32));
2025-11-10T00:04:28.7601081Z +        msg = _mm_add_epi32(
2025-11-10T00:04:28.7601564Z +            msg2,
2025-11-10T00:04:28.7602503Z +            _mm_set_epi32(K[11] as i32, K[10] as i32, K[9] as i32, K[8] as i32),
2025-11-10T00:04:28.7602977Z +        );
2025-11-10T00:04:28.7603753Z          state1 = _mm_sha256rnds2_epu32(state1, state0, msg);
2025-11-10T00:04:28.7604557Z          msg = _mm_shuffle_epi32(msg, 0x0E);
2025-11-10T00:04:28.7605788Z          state0 = _mm_sha256rnds2_epu32(state0, state1, msg);
2025-11-10T00:04:28.7607710Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:122:
2025-11-10T00:04:28.7608338Z          msg1 = _mm_sha256msg1_epu32(msg1, msg2);
2025-11-10T00:04:28.7608806Z  
2025-11-10T00:04:28.7609315Z          // Rounds 12-15
2025-11-10T00:04:28.7610623Z -        msg = _mm_add_epi32(msg3, _mm_set_epi32(K[15] as i32, K[14] as i32, K[13] as i32, K[12] as i32));
2025-11-10T00:04:28.7611183Z +        msg = _mm_add_epi32(
2025-11-10T00:04:28.7611681Z +            msg3,
2025-11-10T00:04:28.7612621Z +            _mm_set_epi32(K[15] as i32, K[14] as i32, K[13] as i32, K[12] as i32),
2025-11-10T00:04:28.7613097Z +        );
2025-11-10T00:04:28.7613885Z          state1 = _mm_sha256rnds2_epu32(state1, state0, msg);
2025-11-10T00:04:28.7614650Z          tmp = _mm_alignr_epi8(msg3, msg2, 4);
2025-11-10T00:04:28.7615241Z          msg0 = _mm_add_epi32(msg0, tmp);
2025-11-10T00:04:28.7617162Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:132:
2025-11-10T00:04:28.7617793Z          msg2 = _mm_sha256msg1_epu32(msg2, msg3);
2025-11-10T00:04:28.7618263Z  
2025-11-10T00:04:28.7618777Z          // Rounds 16-19
2025-11-10T00:04:28.7620105Z -        msg = _mm_add_epi32(msg0, _mm_set_epi32(K[19] as i32, K[18] as i32, K[17] as i32, K[16] as i32));
2025-11-10T00:04:28.7620654Z +        msg = _mm_add_epi32(
2025-11-10T00:04:28.7621130Z +            msg0,
2025-11-10T00:04:28.7622068Z +            _mm_set_epi32(K[19] as i32, K[18] as i32, K[17] as i32, K[16] as i32),
2025-11-10T00:04:28.7622562Z +        );
2025-11-10T00:04:28.7623339Z          state1 = _mm_sha256rnds2_epu32(state1, state0, msg);
2025-11-10T00:04:28.7624007Z          tmp = _mm_alignr_epi8(msg0, msg3, 4);
2025-11-10T00:04:28.7624726Z          msg1 = _mm_add_epi32(msg1, tmp);
2025-11-10T00:04:28.7626628Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:142:
2025-11-10T00:04:28.7627263Z          msg3 = _mm_sha256msg1_epu32(msg3, msg0);
2025-11-10T00:04:28.7627735Z  
2025-11-10T00:04:28.7628249Z          // Rounds 20-23
2025-11-10T00:04:28.7629572Z -        msg = _mm_add_epi32(msg1, _mm_set_epi32(K[23] as i32, K[22] as i32, K[21] as i32, K[20] as i32));
2025-11-10T00:04:28.7630116Z +        msg = _mm_add_epi32(
2025-11-10T00:04:28.7630611Z +            msg1,
2025-11-10T00:04:28.7631554Z +            _mm_set_epi32(K[23] as i32, K[22] as i32, K[21] as i32, K[20] as i32),
2025-11-10T00:04:28.7632039Z +        );
2025-11-10T00:04:28.7632823Z          state1 = _mm_sha256rnds2_epu32(state1, state0, msg);
2025-11-10T00:04:28.7633445Z          tmp = _mm_alignr_epi8(msg1, msg0, 4);
2025-11-10T00:04:28.7634025Z          msg2 = _mm_add_epi32(msg2, tmp);
2025-11-10T00:04:28.7637863Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:152:
2025-11-10T00:04:28.7638516Z          msg0 = _mm_sha256msg1_epu32(msg0, msg1);
2025-11-10T00:04:28.7638982Z  
2025-11-10T00:04:28.7639503Z          // Rounds 24-27
2025-11-10T00:04:28.7640824Z -        msg = _mm_add_epi32(msg2, _mm_set_epi32(K[27] as i32, K[26] as i32, K[25] as i32, K[24] as i32));
2025-11-10T00:04:28.7641364Z +        msg = _mm_add_epi32(
2025-11-10T00:04:28.7641847Z +            msg2,
2025-11-10T00:04:28.7642792Z +            _mm_set_epi32(K[27] as i32, K[26] as i32, K[25] as i32, K[24] as i32),
2025-11-10T00:04:28.7643513Z +        );
2025-11-10T00:04:28.7644450Z          state1 = _mm_sha256rnds2_epu32(state1, state0, msg);
2025-11-10T00:04:28.7645574Z          tmp = _mm_alignr_epi8(msg2, msg1, 4);
2025-11-10T00:04:28.7647989Z          msg3 = _mm_add_epi32(msg3, tmp);
2025-11-10T00:04:28.7650006Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:162:
2025-11-10T00:04:28.7650642Z          msg1 = _mm_sha256msg1_epu32(msg1, msg2);
2025-11-10T00:04:28.7651110Z  
2025-11-10T00:04:28.7651621Z          // Rounds 28-31
2025-11-10T00:04:28.7652950Z -        msg = _mm_add_epi32(msg3, _mm_set_epi32(K[31] as i32, K[30] as i32, K[29] as i32, K[28] as i32));
2025-11-10T00:04:28.7653499Z +        msg = _mm_add_epi32(
2025-11-10T00:04:28.7653979Z +            msg3,
2025-11-10T00:04:28.7655063Z +            _mm_set_epi32(K[31] as i32, K[30] as i32, K[29] as i32, K[28] as i32),
2025-11-10T00:04:28.7655567Z +        );
2025-11-10T00:04:28.7656349Z          state1 = _mm_sha256rnds2_epu32(state1, state0, msg);
2025-11-10T00:04:28.7656968Z          tmp = _mm_alignr_epi8(msg3, msg2, 4);
2025-11-10T00:04:28.7657568Z          msg0 = _mm_add_epi32(msg0, tmp);
2025-11-10T00:04:28.7659491Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:172:
2025-11-10T00:04:28.7660121Z          msg2 = _mm_sha256msg1_epu32(msg2, msg3);
2025-11-10T00:04:28.7660584Z  
2025-11-10T00:04:28.7661105Z          // Rounds 32-35
2025-11-10T00:04:28.7662515Z -        msg = _mm_add_epi32(msg0, _mm_set_epi32(K[35] as i32, K[34] as i32, K[33] as i32, K[32] as i32));
2025-11-10T00:04:28.7663043Z +        msg = _mm_add_epi32(
2025-11-10T00:04:28.7663544Z +            msg0,
2025-11-10T00:04:28.7664618Z +            _mm_set_epi32(K[35] as i32, K[34] as i32, K[33] as i32, K[32] as i32),
2025-11-10T00:04:28.7665103Z +        );
2025-11-10T00:04:28.7665888Z          state1 = _mm_sha256rnds2_epu32(state1, state0, msg);
2025-11-10T00:04:28.7666530Z          tmp = _mm_alignr_epi8(msg0, msg3, 4);
2025-11-10T00:04:28.7667111Z          msg1 = _mm_add_epi32(msg1, tmp);
2025-11-10T00:04:28.7670381Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:182:
2025-11-10T00:04:28.7671020Z          msg3 = _mm_sha256msg1_epu32(msg3, msg0);
2025-11-10T00:04:28.7671484Z  
2025-11-10T00:04:28.7672001Z          // Rounds 36-39
2025-11-10T00:04:28.7673321Z -        msg = _mm_add_epi32(msg1, _mm_set_epi32(K[39] as i32, K[38] as i32, K[37] as i32, K[36] as i32));
2025-11-10T00:04:28.7673867Z +        msg = _mm_add_epi32(
2025-11-10T00:04:28.7674476Z +            msg1,
2025-11-10T00:04:28.7675427Z +            _mm_set_epi32(K[39] as i32, K[38] as i32, K[37] as i32, K[36] as i32),
2025-11-10T00:04:28.7675914Z +        );
2025-11-10T00:04:28.7676693Z          state1 = _mm_sha256rnds2_epu32(state1, state0, msg);
2025-11-10T00:04:28.7677318Z          tmp = _mm_alignr_epi8(msg1, msg0, 4);
2025-11-10T00:04:28.7679924Z          msg2 = _mm_add_epi32(msg2, tmp);
2025-11-10T00:04:28.7682031Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:192:
2025-11-10T00:04:28.7682684Z          msg0 = _mm_sha256msg1_epu32(msg0, msg1);
2025-11-10T00:04:28.7683154Z  
2025-11-10T00:04:28.7683671Z          // Rounds 40-43
2025-11-10T00:04:28.7685138Z -        msg = _mm_add_epi32(msg2, _mm_set_epi32(K[43] as i32, K[42] as i32, K[41] as i32, K[40] as i32));
2025-11-10T00:04:28.7685683Z +        msg = _mm_add_epi32(
2025-11-10T00:04:28.7686171Z +            msg2,
2025-11-10T00:04:28.7687110Z +            _mm_set_epi32(K[43] as i32, K[42] as i32, K[41] as i32, K[40] as i32),
2025-11-10T00:04:28.7687582Z +        );
2025-11-10T00:04:28.7688361Z          state1 = _mm_sha256rnds2_epu32(state1, state0, msg);
2025-11-10T00:04:28.7688988Z          tmp = _mm_alignr_epi8(msg2, msg1, 4);
2025-11-10T00:04:28.7689569Z          msg3 = _mm_add_epi32(msg3, tmp);
2025-11-10T00:04:28.7691720Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:202:
2025-11-10T00:04:28.7692354Z          msg1 = _mm_sha256msg1_epu32(msg1, msg2);
2025-11-10T00:04:28.7692986Z  
2025-11-10T00:04:28.7693498Z          // Rounds 44-47
2025-11-10T00:04:28.7694961Z -        msg = _mm_add_epi32(msg3, _mm_set_epi32(K[47] as i32, K[46] as i32, K[45] as i32, K[44] as i32));
2025-11-10T00:04:28.7695512Z +        msg = _mm_add_epi32(
2025-11-10T00:04:28.7695992Z +            msg3,
2025-11-10T00:04:28.7696929Z +            _mm_set_epi32(K[47] as i32, K[46] as i32, K[45] as i32, K[44] as i32),
2025-11-10T00:04:28.7697454Z +        );
2025-11-10T00:04:28.7698241Z          state1 = _mm_sha256rnds2_epu32(state1, state0, msg);
2025-11-10T00:04:28.7698856Z          tmp = _mm_alignr_epi8(msg3, msg2, 4);
2025-11-10T00:04:28.7699446Z          msg0 = _mm_add_epi32(msg0, tmp);
2025-11-10T00:04:28.7701360Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:212:
2025-11-10T00:04:28.7702004Z          msg2 = _mm_sha256msg1_epu32(msg2, msg3);
2025-11-10T00:04:28.7702475Z  
2025-11-10T00:04:28.7702986Z          // Rounds 48-51
2025-11-10T00:04:28.7704447Z -        msg = _mm_add_epi32(msg0, _mm_set_epi32(K[51] as i32, K[50] as i32, K[49] as i32, K[48] as i32));
2025-11-10T00:04:28.7704993Z +        msg = _mm_add_epi32(
2025-11-10T00:04:28.7705479Z +            msg0,
2025-11-10T00:04:28.7706492Z +            _mm_set_epi32(K[51] as i32, K[50] as i32, K[49] as i32, K[48] as i32),
2025-11-10T00:04:28.7706973Z +        );
2025-11-10T00:04:28.7707758Z          state1 = _mm_sha256rnds2_epu32(state1, state0, msg);
2025-11-10T00:04:28.7708380Z          tmp = _mm_alignr_epi8(msg0, msg3, 4);
2025-11-10T00:04:28.7708962Z          msg1 = _mm_add_epi32(msg1, tmp);
2025-11-10T00:04:28.7710870Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:222:
2025-11-10T00:04:28.7711513Z          msg3 = _mm_sha256msg1_epu32(msg3, msg0);
2025-11-10T00:04:28.7711990Z  
2025-11-10T00:04:28.7712500Z          // Rounds 52-55
2025-11-10T00:04:28.7713836Z -        msg = _mm_add_epi32(msg1, _mm_set_epi32(K[55] as i32, K[54] as i32, K[53] as i32, K[52] as i32));
2025-11-10T00:04:28.7714534Z +        msg = _mm_add_epi32(
2025-11-10T00:04:28.7715022Z +            msg1,
2025-11-10T00:04:28.7715967Z +            _mm_set_epi32(K[55] as i32, K[54] as i32, K[53] as i32, K[52] as i32),
2025-11-10T00:04:28.7716438Z +        );
2025-11-10T00:04:28.7717217Z          state1 = _mm_sha256rnds2_epu32(state1, state0, msg);
2025-11-10T00:04:28.7717838Z          tmp = _mm_alignr_epi8(msg1, msg0, 4);
2025-11-10T00:04:28.7718428Z          msg2 = _mm_add_epi32(msg2, tmp);
2025-11-10T00:04:28.7720331Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:231:
2025-11-10T00:04:28.7721117Z          state0 = _mm_sha256rnds2_epu32(state0, state1, msg);
2025-11-10T00:04:28.7721589Z  
2025-11-10T00:04:28.7722118Z          // Rounds 56-59
2025-11-10T00:04:28.7723438Z -        msg = _mm_add_epi32(msg2, _mm_set_epi32(K[59] as i32, K[58] as i32, K[57] as i32, K[56] as i32));
2025-11-10T00:04:28.7723992Z +        msg = _mm_add_epi32(
2025-11-10T00:04:28.7724615Z +            msg2,
2025-11-10T00:04:28.7725556Z +            _mm_set_epi32(K[59] as i32, K[58] as i32, K[57] as i32, K[56] as i32),
2025-11-10T00:04:28.7726032Z +        );
2025-11-10T00:04:28.7726814Z          state1 = _mm_sha256rnds2_epu32(state1, state0, msg);
2025-11-10T00:04:28.7727429Z          tmp = _mm_alignr_epi8(msg2, msg1, 4);
2025-11-10T00:04:28.7728055Z          msg3 = _mm_add_epi32(msg3, tmp);
2025-11-10T00:04:28.7729982Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:240:
2025-11-10T00:04:28.7730764Z          state0 = _mm_sha256rnds2_epu32(state0, state1, msg);
2025-11-10T00:04:28.7731230Z  
2025-11-10T00:04:28.7731743Z          // Rounds 60-63
2025-11-10T00:04:28.7733070Z -        msg = _mm_add_epi32(msg3, _mm_set_epi32(K[63] as i32, K[62] as i32, K[61] as i32, K[60] as i32));
2025-11-10T00:04:28.7733826Z +        msg = _mm_add_epi32(
2025-11-10T00:04:28.7734491Z +            msg3,
2025-11-10T00:04:28.7735628Z +            _mm_set_epi32(K[63] as i32, K[62] as i32, K[61] as i32, K[60] as i32),
2025-11-10T00:04:28.7736102Z +        );
2025-11-10T00:04:28.7736876Z          state1 = _mm_sha256rnds2_epu32(state1, state0, msg);
2025-11-10T00:04:28.7737492Z          msg = _mm_shuffle_epi32(msg, 0x0E);
2025-11-10T00:04:28.7738270Z          state0 = _mm_sha256rnds2_epu32(state0, state1, msg);
2025-11-10T00:04:28.7740606Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:254:
2025-11-10T00:04:28.7741549Z      // state0 contains h0,h1,h4,h5 and state1 contains h2,h3,h6,h7
2025-11-10T00:04:28.7742208Z      // Need to reorder to h0,h1,h2,h3,h4,h5,h6,h7
2025-11-10T00:04:28.7742766Z      let mut result = [0u8; 32];
2025-11-10T00:04:28.7743228Z -    
2025-11-10T00:04:28.7743718Z +
2025-11-10T00:04:28.7744480Z      // Extract and byte-swap each 32-bit word
2025-11-10T00:04:28.7745367Z      let state0_swapped = _mm_shuffle_epi8(state0, shuf_mask);
2025-11-10T00:04:28.7746264Z      let state1_swapped = _mm_shuffle_epi8(state1, shuf_mask);
2025-11-10T00:04:28.7748185Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:261:
2025-11-10T00:04:28.7748652Z -    
2025-11-10T00:04:28.7749113Z +
2025-11-10T00:04:28.7750198Z      _mm_storeu_si128(result.as_mut_ptr() as *mut __m128i, state0_swapped);
2025-11-10T00:04:28.7751379Z      _mm_storeu_si128(result.as_mut_ptr().add(16) as *mut __m128i, state1_swapped);
2025-11-10T00:04:28.7751847Z  
2025-11-10T00:04:28.7753768Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:286:
2025-11-10T00:04:28.7754462Z              fallback_sha256(data)
2025-11-10T00:04:28.7754937Z          }
2025-11-10T00:04:28.7755400Z      }
2025-11-10T00:04:28.7755883Z -    
2025-11-10T00:04:28.7756342Z +
2025-11-10T00:04:28.7756938Z      #[cfg(not(target_arch = "x86_64"))]
2025-11-10T00:04:28.7757403Z      {
2025-11-10T00:04:28.7757949Z          fallback_sha256(data)
2025-11-10T00:04:28.7759880Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:316:
2025-11-10T00:04:28.7760435Z      fn test_sha256_empty() {
2025-11-10T00:04:28.7760962Z          let input = b"";
2025-11-10T00:04:28.7761525Z          let result = sha256(input);
2025-11-10T00:04:28.7762004Z -        
2025-11-10T00:04:28.7762466Z +
2025-11-10T00:04:28.7763978Z          // Expected SHA256(""): e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
2025-11-10T00:04:28.7764711Z          let expected = [
2025-11-10T00:04:28.7767418Z -            0xe3, 0xb0, 0xc4, 0x42, 0x98, 0xfc, 0x1c, 0x14, 0x9a, 0xfb, 0xf4, 0xc8, 0x99, 0x6f, 0xb9, 0x24,
2025-11-10T00:04:28.7768740Z -            0x27, 0xae, 0x41, 0xe4, 0x64, 0x9b, 0x93, 0x4c, 0xa4, 0x95, 0x99, 0x1b, 0x78, 0x52, 0xb8, 0x55,
2025-11-10T00:04:28.7769953Z +            0xe3, 0xb0, 0xc4, 0x42, 0x98, 0xfc, 0x1c, 0x14, 0x9a, 0xfb, 0xf4, 0xc8, 0x99, 0x6f,
2025-11-10T00:04:28.7771145Z +            0xb9, 0x24, 0x27, 0xae, 0x41, 0xe4, 0x64, 0x9b, 0x93, 0x4c, 0xa4, 0x95, 0x99, 0x1b,
2025-11-10T00:04:28.7771695Z +            0x78, 0x52, 0xb8, 0x55,
2025-11-10T00:04:28.7772171Z          ];
2025-11-10T00:04:28.7772647Z -        
2025-11-10T00:04:28.7773110Z +
2025-11-10T00:04:28.7773748Z          assert_eq!(result, expected);
2025-11-10T00:04:28.7774265Z      }
2025-11-10T00:04:28.7774859Z  
2025-11-10T00:04:28.7777549Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:330:
2025-11-10T00:04:28.7778120Z      fn test_sha256_hello_world() {
2025-11-10T00:04:28.7778693Z          let input = b"hello world";
2025-11-10T00:04:28.7779259Z          let result = sha256(input);
2025-11-10T00:04:28.7779729Z -        
2025-11-10T00:04:28.7780278Z +
2025-11-10T00:04:28.7781059Z          // Compare with sha2 crate
2025-11-10T00:04:28.7781917Z          use sha2::{Digest, Sha256};
2025-11-10T00:04:28.7782554Z          let expected = Sha256::digest(input);
2025-11-10T00:04:28.7784785Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:337:
2025-11-10T00:04:28.7785265Z -        
2025-11-10T00:04:28.7785726Z +
2025-11-10T00:04:28.7786361Z          assert_eq!(&result[..], &expected[..]);
2025-11-10T00:04:28.7786820Z      }
2025-11-10T00:04:28.7787285Z  
2025-11-10T00:04:28.7789210Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:343:
2025-11-10T00:04:28.7789788Z          // Test various input sizes
2025-11-10T00:04:28.7790360Z          let zeros_64 = vec![0u8; 64];
2025-11-10T00:04:28.7790925Z          let ff_128 = vec![0xffu8; 128];
2025-11-10T00:04:28.7791399Z -        
2025-11-10T00:04:28.7791859Z +
2025-11-10T00:04:28.7792444Z          let test_cases: Vec<&[u8]> = vec![
2025-11-10T00:04:28.7792982Z              b"" as &[u8],
2025-11-10T00:04:28.7793472Z              b"a",
2025-11-10T00:04:28.7795528Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:357:
2025-11-10T00:04:28.7796011Z  
2025-11-10T00:04:28.7796588Z          for input in test_cases {
2025-11-10T00:04:28.7797609Z              let result = sha256(input);
2025-11-10T00:04:28.7798090Z -            
2025-11-10T00:04:28.7798558Z +
2025-11-10T00:04:28.7799126Z              // Must match sha2 crate
2025-11-10T00:04:28.7799725Z              use sha2::{Digest, Sha256};
2025-11-10T00:04:28.7800367Z              let expected = Sha256::digest(input);
2025-11-10T00:04:28.7802290Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:364:
2025-11-10T00:04:28.7802765Z -            
2025-11-10T00:04:28.7804028Z -            assert_eq!(&result[..], &expected[..], "Mismatch for input length {}", input.len());
2025-11-10T00:04:28.7804722Z +
2025-11-10T00:04:28.7805257Z +            assert_eq!(
2025-11-10T00:04:28.7805779Z +                &result[..],
2025-11-10T00:04:28.7806311Z +                &expected[..],
2025-11-10T00:04:28.7806955Z +                "Mismatch for input length {}",
2025-11-10T00:04:28.7807477Z +                input.len()
2025-11-10T00:04:28.7807945Z +            );
2025-11-10T00:04:28.7808420Z          }
2025-11-10T00:04:28.7808886Z      }
2025-11-10T00:04:28.7809342Z  
2025-11-10T00:04:28.7811258Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:370:
2025-11-10T00:04:28.7811825Z      fn test_double_sha256() {
2025-11-10T00:04:28.7812387Z          let input = b"hello world";
2025-11-10T00:04:28.7812961Z          let result = hash256(input);
2025-11-10T00:04:28.7813433Z -        
2025-11-10T00:04:28.7813891Z +
2025-11-10T00:04:28.7814902Z          // Manually compute double SHA256 with sha2 crate
2025-11-10T00:04:28.7815493Z          use sha2::{Digest, Sha256};
2025-11-10T00:04:28.7816125Z          let first = Sha256::digest(input);
2025-11-10T00:04:28.7818031Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:377:
2025-11-10T00:04:28.7818685Z          let expected = Sha256::digest(&first);
2025-11-10T00:04:28.7819175Z -        
2025-11-10T00:04:28.7819640Z +
2025-11-10T00:04:28.7820270Z          assert_eq!(&result[..], &expected[..]);
2025-11-10T00:04:28.7820744Z      }
2025-11-10T00:04:28.7821204Z  
2025-11-10T00:04:28.7823161Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:384:
2025-11-10T00:04:28.7823852Z          // Test with 64 zero bytes (same as AVX2 test)
2025-11-10T00:04:28.7824545Z          let input = vec![0u8; 64];
2025-11-10T00:04:28.7825127Z          let result = hash256(&input);
2025-11-10T00:04:28.7825598Z -        
2025-11-10T00:04:28.7826064Z +
2025-11-10T00:04:28.7826631Z          // Compare with sha2 crate
2025-11-10T00:04:28.7827202Z          use sha2::{Digest, Sha256};
2025-11-10T00:04:28.7828048Z          let first = Sha256::digest(&input);
2025-11-10T00:04:28.7829989Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:391:
2025-11-10T00:04:28.7830792Z          let expected = Sha256::digest(&first);
2025-11-10T00:04:28.7831271Z -        
2025-11-10T00:04:28.7831729Z +
2025-11-10T00:04:28.7832359Z          assert_eq!(&result[..], &expected[..]);
2025-11-10T00:04:28.7832826Z      }
2025-11-10T00:04:28.7833290Z  }
2025-11-10T00:04:28.7835337Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/sha_ni.rs:396:
2025-11-10T00:04:28.7837429Z -
2025-11-10T00:04:28.7837899Z  
2025-11-10T00:04:28.7840047Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/crypto/simd_bytes.rs:99:
2025-11-10T00:04:28.7840598Z          assert_eq!(dst, src);
2025-11-10T00:04:28.7841063Z      }
2025-11-10T00:04:28.7841534Z  }
2025-11-10T00:04:28.7841992Z -
2025-11-10T00:04:28.7842472Z  
2025-11-10T00:04:28.7844508Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/lib.rs:47:
2025-11-10T00:04:28.7845047Z  pub mod transaction;
2025-11-10T00:04:28.7845633Z  pub mod transaction_hash;
2025-11-10T00:04:28.7847796Z  pub mod types;
2025-11-10T00:04:28.7848699Z +#[cfg(all(feature = "production", feature = "benchmarking"))]
2025-11-10T00:04:28.7849787Z +pub use block::{reset_assume_valid_height, set_assume_valid_height};
2025-11-10T00:04:28.7850361Z  #[cfg(feature = "production")]
2025-11-10T00:04:28.7851015Z  pub use script::batch_verify_signatures;
2025-11-10T00:04:28.7851899Z  #[cfg(all(feature = "production", feature = "benchmarking"))]
2025-11-10T00:04:28.7853567Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/lib.rs:53:
2025-11-10T00:04:28.7854092Z  pub use script::{
2025-11-10T00:04:28.7855830Z -    clear_all_caches, clear_hash_cache, clear_script_cache, clear_stack_pool,
2025-11-10T00:04:28.7874803Z -    disable_caching, reset_benchmarking_state,
2025-11-10T00:04:28.7877718Z +    clear_all_caches, clear_hash_cache, clear_script_cache, clear_stack_pool, disable_caching,
2025-11-10T00:04:28.7880418Z +    reset_benchmarking_state,
2025-11-10T00:04:28.7882095Z  };
2025-11-10T00:04:28.7883596Z -#[cfg(all(feature = "production", feature = "benchmarking"))]
2025-11-10T00:04:28.7887622Z -pub use block::{reset_assume_valid_height, set_assume_valid_height};
2025-11-10T00:04:28.7890187Z  #[cfg(all(feature = "production", feature = "benchmarking"))]
2025-11-10T00:04:28.7892467Z  pub use transaction_hash::clear_sighash_templates;
2025-11-10T00:04:28.7894462Z  pub mod bip113;
2025-11-10T00:04:28.7897659Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/mempool.rs:99:
2025-11-10T00:04:28.7900584Z                  .map(|(i, opt_utxo)| {
2025-11-10T00:04:28.7902268Z                      if let Some(utxo) = opt_utxo {
2025-11-10T00:04:28.7904076Z                          let input = &tx.inputs[*i];
2025-11-10T00:04:28.7906108Z -                        let witness: Option<&ByteString> =
2025-11-10T00:04:28.7908306Z -                            witnesses.and_then(|wits| wits.get(*i)).and_then(|wit| {
2025-11-10T00:04:28.7910466Z -                                wit.first()
2025-11-10T00:04:28.7912085Z -                            });
2025-11-10T00:04:28.7913794Z +                        let witness: Option<&ByteString> = witnesses
2025-11-10T00:04:28.7917845Z +                            .and_then(|wits| wits.get(*i))
2025-11-10T00:04:28.7919690Z +                            .and_then(|wit| wit.first());
2025-11-10T00:04:28.7921376Z  
2025-11-10T00:04:28.7923173Z                          verify_script(&input.script_sig, &utxo.script_pubkey, witness, flags)
2025-11-10T00:04:28.7925706Z                      } else {
2025-11-10T00:04:28.7930053Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/mining.rs:440:
2025-11-10T00:04:28.7932859Z  }
2025-11-10T00:04:28.7933915Z  
2025-11-10T00:04:28.7935478Z  /// Simple SHA256 hash function
2025-11-10T00:04:28.7936935Z -/// 
2025-11-10T00:04:28.7938001Z +///
2025-11-10T00:04:28.7940142Z  /// Performance optimization: Uses OptimizedSha256 (SHA-NI or AVX2) instead of sha2 crate
2025-11-10T00:04:28.7943223Z  /// for faster hashing in Merkle tree construction.
2025-11-10T00:04:28.7945166Z  #[inline(always)]
2025-11-10T00:04:28.7949493Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/optimizations.rs:239:
2025-11-10T00:04:28.7953247Z      /// - Small batches (< 4 items): Sequential (overhead not worth parallelization)
2025-11-10T00:04:28.7957718Z      /// - Medium batches (4-7 items): Chunked sequential
2025-11-10T00:04:28.7960391Z      /// - Large batches (≥8 items): Multi-core parallelization with Rayon
2025-11-10T00:04:28.7962960Z -    /// 
2025-11-10T00:04:28.7964054Z +    ///
2025-11-10T00:04:28.7965333Z      /// # Optimizations
2025-11-10T00:04:28.7967115Z      /// - Uses sha2 crate with "asm" feature for optimized assembly
2025-11-10T00:04:28.7969757Z      /// - For large batches, leverages Rayon for multi-core parallelization
2025-11-10T00:04:28.7973392Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/optimizations.rs:287:
2025-11-10T00:04:28.7977209Z                  return avx2_batch::batch_sha256_avx2(inputs);
2025-11-10T00:04:28.7979000Z              }
2025-11-10T00:04:28.7980145Z          }
2025-11-10T00:04:28.7981449Z -        
2025-11-10T00:04:28.7982525Z +
2025-11-10T00:04:28.7983908Z          // Fallback: Multi-core parallelization using Rayon
2025-11-10T00:04:28.7986193Z          // Rayon is enabled via the 'production' feature
2025-11-10T00:04:28.7988431Z          // This leverages multiple CPU cores for parallel hashing
2025-11-10T00:04:28.7991621Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/script.rs:20:
2025-11-10T00:04:28.7994697Z  #[cfg(feature = "production")]
2025-11-10T00:04:28.7997972Z  use std::collections::VecDeque;
2025-11-10T00:04:28.7999640Z  #[cfg(feature = "production")]
2025-11-10T00:04:28.8001615Z -use std::sync::{OnceLock, RwLock, atomic::{AtomicBool, Ordering}};
2025-11-10T00:04:28.8003698Z +use std::sync::{
2025-11-10T00:04:28.8005383Z +    atomic::{AtomicBool, Ordering},
2025-11-10T00:04:28.8008122Z +    OnceLock, RwLock,
2025-11-10T00:04:28.8009384Z +};
2025-11-10T00:04:28.8010541Z  #[cfg(feature = "production")]
2025-11-10T00:04:28.8012046Z  use std::thread_local;
2025-11-10T00:04:28.8013341Z  
2025-11-10T00:04:28.8015854Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/script.rs:1044:
2025-11-10T00:04:28.8020459Z                          use crate::transaction_hash::batch_compute_sighashes;
2025-11-10T00:04:28.8023038Z                          // Use batch computation if we have multiple inputs (more efficient)
2025-11-10T00:04:28.8025579Z                          if tx.inputs.len() > 1 {
2025-11-10T00:04:28.8028043Z -                            let sighashes = batch_compute_sighashes(tx, prevouts, SighashType::All)?;
2025-11-10T00:04:28.8031094Z +                            let sighashes =
2025-11-10T00:04:28.8033243Z +                                batch_compute_sighashes(tx, prevouts, SighashType::All)?;
2025-11-10T00:04:28.8035614Z                              sighashes[input_index]
2025-11-10T00:04:28.8039186Z                          } else {
2025-11-10T00:04:28.8041064Z                              // Single input: use individual calculation (no overhead)
2025-11-10T00:04:28.8044511Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/script.rs:1051:
2025-11-10T00:04:28.8050349Z -                            calculate_transaction_sighash(tx, input_index, prevouts, SighashType::All)?
2025-11-10T00:04:28.8053024Z +                            calculate_transaction_sighash(
2025-11-10T00:04:28.8058006Z +                                tx,
2025-11-10T00:04:28.8059654Z +                                input_index,
2025-11-10T00:04:28.8061733Z +                                prevouts,
2025-11-10T00:04:28.8063726Z +                                SighashType::All,
2025-11-10T00:04:28.8065567Z +                            )?
2025-11-10T00:04:28.8068703Z                          }
2025-11-10T00:04:28.8070040Z                      }
2025-11-10T00:04:28.8071474Z                      #[cfg(not(feature = "production"))]
2025-11-10T00:04:28.8074599Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/script.rs:1091:
2025-11-10T00:04:28.8077879Z                          use crate::transaction_hash::batch_compute_sighashes;
2025-11-10T00:04:28.8080467Z                          // Use batch computation if we have multiple inputs (more efficient)
2025-11-10T00:04:28.8083040Z                          if tx.inputs.len() > 1 {
2025-11-10T00:04:28.8086207Z -                            let sighashes = batch_compute_sighashes(tx, prevouts, SighashType::All)?;
2025-11-10T00:04:28.8089032Z +                            let sighashes =
2025-11-10T00:04:28.8091196Z +                                batch_compute_sighashes(tx, prevouts, SighashType::All)?;
2025-11-10T00:04:28.8093411Z                              sighashes[input_index]
2025-11-10T00:04:28.8095268Z                          } else {
2025-11-10T00:04:28.8097145Z                              // Single input: use individual calculation (no overhead)
2025-11-10T00:04:28.8100453Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/script.rs:1098:
2025-11-10T00:04:28.8104246Z -                            calculate_transaction_sighash(tx, input_index, prevouts, SighashType::All)?
2025-11-10T00:04:28.8107025Z +                            calculate_transaction_sighash(
2025-11-10T00:04:28.8108817Z +                                tx,
2025-11-10T00:04:28.8110385Z +                                input_index,
2025-11-10T00:04:28.8112039Z +                                prevouts,
2025-11-10T00:04:28.8115776Z +                                SighashType::All,
2025-11-10T00:04:28.8117550Z +                            )?
2025-11-10T00:04:28.8118945Z                          }
2025-11-10T00:04:28.8120280Z                      }
2025-11-10T00:04:28.8121714Z                      #[cfg(not(feature = "production"))]
2025-11-10T00:04:28.8124840Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/script.rs:1474:
2025-11-10T00:04:28.8127981Z      clear_all_caches();
2025-11-10T00:04:28.8129364Z      clear_stack_pool();
2025-11-10T00:04:28.8131086Z      disable_caching(false); // Re-enable caching by default
2025-11-10T00:04:28.8133925Z -    // Also clear sighash templates (currently no-op as templates aren't populated yet)
2025-11-10T00:04:28.8138942Z +                            // Also clear sighash templates (currently no-op as templates aren't populated yet)
2025-11-10T00:04:28.8141608Z      #[cfg(feature = "benchmarking")]
2025-11-10T00:04:28.8143491Z      crate::transaction_hash::clear_sighash_templates();
2025-11-10T00:04:28.8147069Z  }
2025-11-10T00:04:28.8149384Z Diff in /home/jswift/actions-runner-org2/_work/bllvm-consensus/bllvm-consensus/src/types.rs:32:
2025-11-10T00:04:28.8152712Z  #[derive(Debug, Clone, PartialEq, Eq, Serialize, Deserialize)]
2025-11-10T00:04:28.8154986Z  pub struct TransactionInput {
2025-11-10T00:04:28.8156996Z      pub prevout: OutPoint,      // Hot: 40 bytes (frequently accessed)
2025-11-10T00:04:28.8159599Z -    pub sequence: Natural,     // Hot: 8 bytes (frequently accessed)
2025-11-10T00:04:28.8162188Z +    pub sequence: Natural,      // Hot: 8 bytes (frequently accessed)
2025-11-10T00:04:28.8165124Z      pub script_sig: ByteString, // Cold: Vec (pointer, less frequently accessed)
2025-11-10T00:04:28.8168427Z  }
2025-11-10T00:04:28.8169479Z  
2025-11-10T00:04:28.8685078Z ##[error]Process completed with exit code 1.
